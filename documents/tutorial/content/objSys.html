<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Object and Class System of Kekule.js &mdash; Kekule Tutorial 2016.4 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2016.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Kekule Tutorial 2016.4 documentation" href="../index.html" />
    <link rel="next" title="Atom and Bond" href="atomAndBond.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="atomAndBond.html" title="Atom and Bond"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Kekule Tutorial 2016.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Object and Class System of Kekule.js</a><ul>
<li><a class="reference internal" href="#defining-new-class">Defining New Class</a></li>
<li><a class="reference internal" href="#create-instance-of-class">Create Instance of Class</a></li>
<li><a class="reference internal" href="#serialize-deserialize-of-object">Serialize/deserialize of Object</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="atomAndBond.html"
                        title="next chapter">Atom and Bond</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="object-and-class-system-of-kekule-js">
<h1>Object and Class System of Kekule.js<a class="headerlink" href="#object-and-class-system-of-kekule-js" title="Permalink to this headline">¶</a></h1>
<p>Kekule.js is an object-oriented chemoinformatics toolkit written in JavaScript.
Developers usually need to dealing with objects and classes.
Concepts in chemistry, such as atom, bond and molecule are represented as objects in the toolkit
and different types of concepts deprived from different classes.
The following simplified UML diagram shows some core classes and their relations of the toolkit.</p>
<div class="figure align-center" id="id4">
<img alt="../_images/coreClassesUml.png" src="../_images/coreClassesUml.png" />
<p class="caption"><span class="caption-text">&lt; Simplified UML diagram of core classes &gt;</span></p>
</div>
<div class="section" id="defining-new-class">
<h2>Defining New Class<a class="headerlink" href="#defining-new-class" title="Permalink to this headline">¶</a></h2>
<p>Developers can even deprive their own new classes from those existing ones. Traditionally,
defining class in JavaScript involves in a lot of ugly and clumsy codes. To simplify that
process, Kekule.js provides a handy way to define new classes (similar as the approach of
prototype.js):<a class="footnote-reference" href="#example" id="id1">[1]</a></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">MyCustomAtom</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Kekule</span><span class="p">.</span><span class="nx">Atom</span><span class="p">,</span> <span class="p">{</span> <span class="c1">// Creating a new class deprived from Kekule.Atom</span>
  <span class="nx">CLASS_NAME</span><span class="o">:</span> <span class="s1">&#39;MyCustomAtom&#39;</span><span class="p">,</span>                  <span class="c1">// Explicitly set the name of class</span>
  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$super</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span>             <span class="c1">// Method initialize will be regarded as constructor of class</span>
  <span class="p">{</span>
    <span class="nx">$super</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>                                <span class="c1">// Use $super parameter to call inherited method from ancestor class</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_customText</span> <span class="o">=</span> <span class="s1">&#39;My value&#39;</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">initProperties</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>                   <span class="c1">// Special method, defining new properties of class</span>
  <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">defineProp</span><span class="p">(</span><span class="s1">&#39;myProperty&#39;</span><span class="p">,</span> <span class="p">{</span>            <span class="c1">// defining integer property: myProperty</span>
      <span class="s1">&#39;dataType&#39;</span><span class="o">:</span> <span class="nx">DataType</span><span class="p">.</span><span class="nx">INT</span><span class="p">,</span>
      <span class="s1">&#39;getter&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Reading myProperty&#39;</span><span class="p">);</span>     <span class="c1">// additional operation in property getter</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getPropStoreFieldValue</span><span class="p">(</span><span class="s1">&#39;myProperty&#39;</span><span class="p">);</span>  <span class="c1">// return value from default storing field of object</span>
      <span class="p">},</span>
      <span class="s1">&#39;setter&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Writing myProperty&#39;</span><span class="p">);</span>     <span class="c1">// additional operation in property setter</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setPropStoreFieldValue</span><span class="p">(</span><span class="s1">&#39;myProperty&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>  <span class="c1">// set value to default storing field of object</span>
      <span class="p">}</span>
    <span class="p">});</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">defineProp</span><span class="p">(</span><span class="s1">&#39;customText&#39;</span><span class="p">,</span> <span class="p">{</span>            <span class="c1">// defining string property: customField</span>
      <span class="s1">&#39;dataType&#39;</span><span class="o">:</span> <span class="nx">DataType</span><span class="p">.</span><span class="nx">STRING</span><span class="p">,</span>
      <span class="s1">&#39;getter&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_customText</span><span class="p">;</span> <span class="p">},</span>      <span class="c1">// return value from a custom storing field</span>
      <span class="s1">&#39;setter&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">_customText</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// set value to a custom storing field</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">showNewPropertyValues</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>            <span class="c1">// defining new method</span>
  <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getMyProperty</span><span class="p">(),</span> <span class="k">this</span><span class="p">.</span><span class="nx">getCustomText</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Method Class.create is used to create a new class and this method accept two parameters. The first
parameter is the ancestor class which can be omitted if the new class does not inherit from any existing
ones. The second parameter is a JavaScript object defining the methods and attributes of new class. Among
those methods, there are two special ones: <em>initialize</em> plays as the constructor of class and <em>initProperties</em>
defines all new properties of class.</p>
<p>In Kekule.js class system, property is a little different from traditional JavaScript property. In order
to avoid compatiblity problems in different web browsers, property need be accessed by getter and setter
methods (e.g <code class="docutils literal"><span class="pre">getMyProperty()</span></code>, <code class="docutils literal"><span class="pre">setCustomText('Text')</span></code>). Aside from read/write value to property itself,
getter and setter methods are able to perform some additional operations as shown in the previous example.</p>
</div>
<div class="section" id="create-instance-of-class">
<h2>Create Instance of Class<a class="headerlink" href="#create-instance-of-class" title="Permalink to this headline">¶</a></h2>
<p>After defining the new class, developer can create new instances same as traditional JavaScript:<a class="footnote-reference" href="#example" id="id2">[1]</a></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">myInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyCustomAtom</span><span class="p">(</span><span class="s1">&#39;myId&#39;</span><span class="p">);</span>  <span class="c1">// create new instance</span>
<span class="nx">myInstance</span><span class="p">.</span><span class="nx">setMyProperty</span><span class="p">(</span><span class="mi">10</span><span class="p">).</span><span class="nx">setCustomText</span><span class="p">(</span><span class="s1">&#39;Custom Text&#39;</span><span class="p">);</span>  <span class="c1">// set property values</span>
<span class="nx">myInstance</span><span class="p">.</span><span class="nx">setSymbol</span><span class="p">(</span><span class="s1">&#39;Cl&#39;</span><span class="p">);</span>   <span class="c1">// set property value inherited from ancestor classes</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myInstance</span><span class="p">.</span><span class="nx">getAtomicNumber</span><span class="p">());</span>  <span class="c1">// get property value inherited from ancestor classes</span>
<span class="kd">var</span> <span class="nx">dupInstance</span> <span class="o">=</span> <span class="nx">myInstance</span><span class="p">.</span><span class="nx">clone</span><span class="p">();</span>        <span class="c1">// access inherited method</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">dupInstance</span><span class="p">.</span><span class="nx">getSymbol</span><span class="p">(),</span>
  <span class="nx">dupInstance</span><span class="p">.</span><span class="nx">getMyProperty</span><span class="p">(),</span>
  <span class="nx">dupInstance</span><span class="p">.</span><span class="nx">getCustomText</span><span class="p">()</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="serialize-deserialize-of-object">
<h2>Serialize/deserialize of Object<a class="headerlink" href="#serialize-deserialize-of-object" title="Permalink to this headline">¶</a></h2>
<p>Kekule.js provides methods to save/load class instances to/from JSON or XML. Different from traditional
JSON approaches, those methods usually only save/load defined properties of object. <a class="footnote-reference" href="#example" id="id3">[1]</a></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">jsonData</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">myInstance</span><span class="p">.</span><span class="nx">saveObj</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">newInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyCustomAtom</span><span class="p">();</span>
<span class="nx">newInstance</span><span class="p">.</span><span class="nx">loadObj</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">,</span> <span class="s1">&#39;json&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">newInstance</span><span class="p">.</span><span class="nx">getSymbol</span><span class="p">(),</span>
  <span class="nx">newInstance</span><span class="p">.</span><span class="nx">getMyProperty</span><span class="p">(),</span>
  <span class="nx">newInstance</span><span class="p">.</span><span class="nx">getCustomText</span><span class="p">()</span>
<span class="p">);</span>
</pre></div>
</div>
<table class="docutils footnote" frame="void" id="example" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>, <a class="fn-backref" href="#id3">3</a>)</em> Example of this chapter can be found and run at <a class="reference external" href="../examples/objSys.html">here</a>.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="atomAndBond.html" title="Atom and Bond"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Kekule Tutorial 2016.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Partridge Jiang.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>