<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: widgets/chem/editor/kekule.chemEditor.chemSpaceEditors.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: widgets/chem/editor/kekule.chemEditor.chemSpaceEditors.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview
 * Editor for Kekule.ChemSpace.
 * @author Partridge Jiang
 */

/*
 * requires /lan/classes.js
 * requires /core/kekule.common.js
 * requires /render/kekule.render.base.js
 * requires /render/kekule.render.extensions.js
 * requires /render/kekule.render.kekule.render.utils.js
 * requires /widgets/operation/kekule.operations.js
 * requires /widgets/commonCtrls/kekule.widget.formControls.js
 * requires /widgets/commonCtrls/kekule.widget.dialogs.js
 * requires /widgets/chem/periodicTable/kekule.chemWidget.periodicTables.js
 * requires /widgets/chem/uiMarker/kekule.chemWidget.uiMarkers.js
 * requires /widgets/chem/editor/kekule.chemEditor.extensions.js
 * requires /widgets/chem/editor/kekule.chemEditor.editorUtils.js
 * requires /widgets/chem/editor/kekule.chemEditor.configs.js
 * requires /widgets/chem/editor/kekule.chemEditor.operations.js
 * requires /widgets/chem/editor/kekule.chemEditor.baseEditors.js
 * requires /widgets/chem/editor/kekule.chemEditor.repositories.js
 * requires /widgets/chem/editor/kekule.chemEditor.utilWidgets.js
 */

(function(){

"use strict";

var AU = Kekule.ArrayUtils;
var CU = Kekule.CoordUtils;
var CCNS = Kekule.ChemWidget.HtmlClassNames;
//var CWT = Kekule.ChemWidgetTexts;

/** @ignore */
Kekule.ChemWidget.HtmlClassNames = Object.extend(Kekule.ChemWidget.HtmlClassNames, {
	CHEMSPACE_EDITOR: 'K-Chem-Space-Editor',
	CHEMSPACE_EDITOR2D: 'K-Chem-Space-Editor2D',
	CHEMSPACE_EDITOR3D: 'K-Chem-Space-Editor3D',

	CHEMEDITOR_ATOM_SETTER: 'K-ChemEditor-Atom-Setter',
	CHEMEDITOR_TEXT_SETTER: 'K-ChemEditor-Text-Setter',
	CHEMEDITOR_FORMULA_SETTER: 'K-ChemEditor-Formula-Setter'
});

/**
 * A chem editor to edit chemspace object and other chem objects.
 * When load a chem object other than instance of Kekule.ChemSpace, an empty ChemSpace instance will
 * be created and loaded object should be insert into it.
 * @class
 * @augments Kekule.Editor.BaseEditor
 * @param {Variant} parentOrElementOrDocument
 * @param {Kekule.ChemObject} chemObj initially loaded chemObj.
 * @param {Int} renderType Display in 2D or 3D. Value from {@link Kekule.Render.RendererType}.
 * @param {Kekule.Editor.BaseEditorConfigs} editorConfigs Configuration of this editor.
 *
 * @property {Kekule.ChemSpace} chemSpace ChemSpace loaded in this editor.
 * @property {Float} defBondLength
 * @property {Bool} allowCreateNewChild Whether new direct child of space can be created.
 *   Note: if the space is empty, one new child will always be allowed to create.
 * @property {Bool} autoCreateNewStructFragment Whether new molecule object can be created in space.
 *   Note: if property {@link Kekule.Editor.ChemSpaceEditor.allowCreateNewChild} is false, this property
 *   will always be false.
 */
Kekule.Editor.ChemSpaceEditor = Class.create(Kekule.Editor.BaseEditor,
/** @lends Kekule.Editor.ChemSpaceEditor# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.ChemSpaceEditor',
	/** @constructs */
	initialize: function($super, parentOrElementOrDocument, chemObj, renderType, editorConfigs)
	{
		this.setPropStoreFieldValue('allowCreateNewChild', true);
		this.setPropStoreFieldValue('autoCreateNewStructFragment', true);
		$super(parentOrElementOrDocument, chemObj, renderType, editorConfigs);
		this._containerChemSpace = null;  // private field, used to mark that a extra chem space container is used

	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('chemSpace', {'dataType': 'Kekule.ChemSpace', 'serializable': false,
			'getter': function() { return this.getChemObj(); },
			'setter': function(value) { this.setChemObj(value); }
		});
		this.defineProp('autoCreateNewStructFragment', {'dataType': DataType.BOOL,
			'getter': function()
			{
				return this.getPropStoreFieldValue('autoCreateNewStructFragment') &amp;&amp; this.canCreateNewChild();
			}
		});
		this.defineProp('allowCreateNewChild', {'dataType': DataType.BOOL});
	},

	/**
	 * Returns whether new direct child can be created in current space.
	 * This method will returns true of property {@link Kekule.Editor.ChemSpaceEditor.allowCreateNewChild} is true
	 * or the space is empty.
	 * @returns {Bool}
	 */
	canCreateNewChild: function()
	{
		return this.getChemSpace() &amp;&amp; (this.getAllowCreateNewChild() || (this.getChemSpace().getChildCount() &lt;= 0));
	},

	/** @ignore */
	getActualDrawOptions: function($super)
	{
		var result = $super();
		// a special field to ensure use explict size of space
		// rather than calc size based on child objects
		result.useExplicitSpaceSize = true;
		return result;
	},

	/** @private */
	doSetChemObj: function($super, value)
	{
		var old = this.getChemObj();
		if (old !== value)
		{
			if (old &amp;&amp; this._containerChemSpace)
			{
				old.finalize();
				this._containerChemSpace = null;
			}
			if (value)
			{
				if (value instanceof Kekule.ChemSpace)
				{
					this._initChemSpaceDefProps(value);
					return $super(value);
				}
				else
				{
					var space = this.createContainerChemSpace(null, value);
					//this._initChemSpaceDefProps(space, value);
					//space.appendChild(value);
					this._containerChemSpace = space;
					$super(space);
				}
			}
			else
				$super(value);
		}
		else
			$super(value);
	},

	/** @ignore */
	getExportableClasses: function($super)
	{
		var result = $super();  // now result includes chemSpace
		// add child objects of chemspace to result
		var space = this.getChemSpace();
		if (space)
		{
			for (var i = 0, l = space.getChildCount(); i &lt; l; ++i)
			{
				var obj = space.getChildAt(i);
				if (obj &amp;&amp; obj.getClass)
					Kekule.ArrayUtils.pushUnique(result, obj.getClass());
			}
		}
		return result;
	},
	/** @ignore */
	exportObjs: function($super, objClass)
	{
		var result = $super(objClass);
		if ((!result || !result.length) &amp;&amp; objClass)  // check child objects of chemSpace
		{
			result = [];
			var space = this.getChemSpace();
			if (space)
			{
				for (var i = 0, l = space.getChildCount(); i &lt; l; ++i)
				{
					var obj = space.getChildAt(i);
					if (obj &amp;&amp; (obj instanceof objClass))
						result.push(obj);
				}
			}
		}
		return result;
	},
	/** @ignore */
	getSavingTargetObj: function($super)
	{
		// if only one child in chemspace, save this obj alone (rather than the space).
		var space = this.getChemSpace();
		var childCount = space.getChildCount();
		if (childCount === 1)
		{
			return space.getChildAt(0);
		}
		else
			return $super();
	},

	/** @ignore */
	createDefaultConfigs: function()
	{
		//return new Kekule.Editor.ChemSpaceEditorConfigs();
		return Kekule.Editor.ChemSpaceEditorConfigs.getInstance();
	},

	/** @private */
	doCreateNewDocObj: function()
	{
		return this.createContainerChemSpace();
	},

	/** @private */
	doLoad: function($super, chemObj)
	{
		// supply essential charge and radical markers
		this._supplyChemMarkersOnObj(chemObj);
		$super(chemObj);
	},
	/** @private */
	doLoadEnd: function($super, chemObj)
	{
		var result = $super(chemObj);
		// calc def bond length
		var defBondLength = null;
		if (chemObj)
		{
			var connectors = chemObj.getAllContainingConnectors();
			if (connectors &amp;&amp; connectors.length)
			{
				var coordMode = (this.getRenderType() === Kekule.Render.RendererType.R3D)?
					Kekule.CoordMode.COORD3D: Kekule.CoordMode.COORD2D;
				defBondLength = Kekule.ChemStructureUtils.getConnectorLengthMedian(connectors, coordMode, this.getAllowCoordBorrow());
			}
		}
		this.setDefBondLength(defBondLength);

		return result;
	},
	/** @ignore */
	resetDisplay: function($super)
	{
		// called after loading a new chemObj, or creating a new doc
		$super();
		// adjust editor size
		var space = this.getChemObj();
		if (space)
		{
			//console.log('decide size', space, space.getScreenSize);
			var screenSize = space.getScreenSize();
			this.changeClientSize(screenSize.x, screenSize.y, this.getCurrZoom());
			// scroll to top center
			var elem = this.getEditClientElem().parentNode;
			var visibleClientSize = Kekule.HtmlElementUtils.getElemClientDimension(elem);
			this.scrollClientTo(0, (screenSize.x * this.getCurrZoom() - visibleClientSize.width) / 2);
		}
	},

	/** @ignore */
	zoomChanged: function($super, zoomLevel)
	{
		$super();
		var space = this.getChemObj();
		if (space)
		{
			var screenSize = space.getScreenSize();
			this.changeClientSize(screenSize.x, screenSize.y, zoomLevel);
		}
	},

	/** @ignore */
	createNewBoundInfoRecorder: function($super, renderer)
	{
		$super(renderer);
		var recorder = this.getBoundInfoRecorder();
		if (recorder)  // add event listener to update text box size
		{
			recorder.addEventListener('updateBasicDrawObject', this.reactUpdateBasicDrawObject, this);
		}
	},
	/** @private */
	reactUpdateBasicDrawObject: function(e)
	{
		var obj = e.obj;
		// TODO: use such a method to set text block size may not be a good approach
		if (obj &amp;&amp; (obj instanceof Kekule.TextBlock))
		{
			var boundInfo = e.boundInfo;
			this.updateTextBlockSize(obj, boundInfo);
		}
	},
	/* @ignore */
	objectChanged: function($super, obj, changedPropNames)
	{
		/*
		if (this.getCoordMode() === Kekule.CoordMode.COORD2D)  // only works in 2D mode
		{
			if (obj instanceof Kekule.TextBlock)  // size need to be recalculated
			{
				//console.log('text box changed', obj.getId());
				// must not use setSize2D, otherwise a new object change event will be triggered
				//obj.setPropStoreFieldValue('size2D', {'x': null, 'y': null});
				obj.__$needRecalcSize__ = true;  // special flag, indicating to recalculate size
			}
		}
		*/
		return $super(obj, changedPropNames);
	},
	/** @private */
	updateTextBlockSize: function(textBlock, boundInfo)
	{
		if (this.getCoordMode() !== Kekule.CoordMode.COORD2D)  // only works in 2D mode
			return;
		/*
		var oldSize = textBlock.getSize2D();
		if (Kekule.ObjUtils.notUnset(oldSize.x) || Kekule.ObjUtils.notUnset(oldSize.y))  // size already set, by pass
			return;
    */
		//if (!textBlock.__$needRecalcSize__)
		if (!textBlock.getNeedRecalcSize())
			return;

		var stype = boundInfo.shapeType;
		if (stype === Kekule.Render.BoundShapeType.RECT)
		{
			/*
			console.log('boundddddd', boundInfo);
			var coords = boundInfo.coords;  // context coords
			var objCoord1 = this.contextCoordToObj(coords[0]);
			var objCoord2 = this.contextCoordToObj(coords[1]);
			var delta = Kekule.CoordUtils.substract(objCoord2, objCoord1);
			// must not use setSize2D, otherwise a new object change event will be triggered and a new update process will be launched
			textBlock.setPropStoreFieldValue('size2D', {'x': Math.abs(delta.x), 'y': Math.abs(delta.y)});
			//textBlock.setSize2D({'x': Math.abs(delta.x), 'y': Math.abs(delta.y)});
			//delete textBlock.__$needRecalcSize__;
			textBlock.setNeedRecalcSize(false);
			*/
		}
	},

	/** @private */
	createContainerChemSpace: function(id, containingChemObj)
	{
		//var result = new Kekule.ChemSpace(id);
		var result = new Kekule.ChemDocument(id);
		this._initChemSpaceDefProps(result, containingChemObj);
		if (containingChemObj)
		{
			result.appendChild(containingChemObj);

			// adjust child position
			var spaceSize = result.getSizeOfMode(this.getCoordMode(), this.getAllowCoordBorrow());

			var coord, ratio;
			var objBox = Kekule.Render.ObjUtils.getContainerBox(containingChemObj, this.getCoordMode(), this.getAllowCoordBorrow());
			if (this.getCoordMode() === Kekule.CoordMode.COORD2D)
			{
				/*
				var clientElem = this.getEditClientElem();
				var clientDim = Kekule.HtmlElementUtils.getElemClientDimension(clientElem);

				var clientScrollX = clientDim.scrollTop;
				var clientScrollY = clientDim.scrollLeft;
				var padding = clientDim.height / 2;
				*/
				var padding = this.getEditorConfigs().getChemSpaceConfigs().getDefPadding();

				var ratio = result.getObjScreenLengthRatio();
				//console.log('adjust inside obj size', objBox, this.isShown());
			}

			/*
			var oldObjCoord = containingChemObj.getCoordOfMode?
				containingChemObj.getCoordOfMode(this.getCoordMode(), this.getAllowCoordBorrow()) || {}:
				{};
			*/
			var oldObjCoord = containingChemObj.getAbsBaseCoord?
				containingChemObj.getAbsBaseCoord(this.getCoordMode(), this.getAllowCoordBorrow()) || {}:
				{};

			if (ratio &amp;&amp; objBox)  // 2D and calc padding
			{
				/*
				var oldObjCoord = containingChemObj.getCoordOfMode?
					containingChemObj.getCoordOfMode(this.getCoordMode()) || {}:
					{};
				*/
				coord = Kekule.CoordUtils.divide(spaceSize, 2);
				//coord.y = spaceSize.y - /*(objBox.y2 - objBox.y1) / 2*/objBox.y2 - padding * ratio;
				//coord.y = spaceSize.y - Math.abs(objBox.y2 - objBox.y1) / 2 - padding * ratio;
				//coord.x -= (objBox.x2 + objBox.x1) / 2;
				/*
				coord.y = (oldObjCoord.y || 0) + spaceSize.y - padding * ratio - objBox.y2;
				coord.x += (oldObjCoord.x || 0) - (objBox.x2 + objBox.x1) / 2;
				*/
				var objBoxCenter = {x: (objBox.x1 + objBox.x2) / 2, y: (objBox.y1 + objBox.y2) / 2};
				var newObjCenter = {x: coord.x, y: spaceSize.y - padding * ratio - (objBox.y2 - objBox.y1) / 2};
				var centerDelta = Kekule.CoordUtils.substract(newObjCenter, objBoxCenter);
				coord = Kekule.CoordUtils.add(oldObjCoord, centerDelta);
				/*
				coord.y = spaceSize.y - padding * ratio - (objBox.y2 - objBox.y1) / 2 - objBoxCenter.y;
				coord.x = coord.x - (objBox.x2 + objBox.x1) / 2;
				*/
				//console.log(spaceSize, coord, objBox);
			}
			else
			{
				//var oldObjCoord = containingChemObj.getCoordOfMode(this.getCoordMode()) || {};
				coord = Kekule.CoordUtils.divide(spaceSize, 2);
				/*
				coord.x -= (objBox.x2 + objBox.x1) / 2;
				coord.y -= (objBox.y2 + objBox.y1) / 2;
				if (this.getCoordMode() === Kekule.CoordMode.COORD3D)
					coord.z -= (objBox.z2 + objBox.z1) / 2;

				coord = Kekule.CoordUtils.add(coord, oldObjCoord);
				*/
			}

			/*
			if (containingChemObj.setCoordOfMode)
				containingChemObj.setCoordOfMode(coord, this.getCoordMode());
			*/
			if (containingChemObj.setAbsBaseCoord)
				containingChemObj.setAbsBaseCoord(coord, this.getCoordMode());

			//this.setObjCoord(containingChemObj, coord, Kekule.Render.CoordPos.CENTER);
		}

		return result;
	},
	/** @private */
	_initChemSpaceDefProps: function(chemSpace, containingChemObj)
	{
		var configs = this.getEditorConfigs();
		var chemSpaceConfigs = configs.getChemSpaceConfigs();
		if (this.getCoordMode() === Kekule.CoordMode.COORD2D)  // now only handles 2D size
		{
			var screenSize = chemSpace.getScreenSize();
			if (!screenSize.x &amp;&amp; !screenSize.y)
			{
				screenSize = chemSpaceConfigs.getDefScreenSize2D();
				chemSpace.setScreenSize(screenSize);
			}
			if (!chemSpace.getDefAutoScaleRefLength())
			{
				var refLength;
				if (containingChemObj &amp;&amp; containingChemObj.getAllAutoScaleRefLengths)
				{
					var refLengths = containingChemObj.getAllAutoScaleRefLengths(this.getCoordMode(), this.getAllowCoordBorrow());
					refLength = refLengths &amp;&amp; refLengths.length? Kekule.ArrayUtils.getMedian(refLengths): null;
				}
				else
				{
					var refLengths = chemSpace.getAllAutoScaleRefLengths(this.getCoordMode(), this.getAllowCoordBorrow());
					refLength = refLengths.length? Kekule.ArrayUtils.getMedian(refLengths): null;
				}
				if (!refLength)
					refLength = configs.getStructureConfigs().getDefBondLength();
				chemSpace.setDefAutoScaleRefLength(refLength);
			}
			if (!chemSpace.getSize2D())
			{
				var refScreenLength = this.getRenderConfigs().getLengthConfigs().getDefBondLength();
				var ratio = chemSpace.getDefAutoScaleRefLength() / refScreenLength;
				chemSpace.setObjScreenLengthRatio(ratio);
				chemSpace.setSize2D({'x': screenSize.x * ratio, 'y': screenSize.y * ratio});
			}
		}
	},

	/**
	 * Create new molecule or structure fragment in chem space.
	 * @param {String} id
	 * @returns {Kekule.StructureFragment}
	 */
	createNewStructFragmentAnchor: function(id)
	{
		/*
		if (!id)  // debug, auto add
		{
			id = 'M' + this.getChemObj().getChildCount();
		}
		*/
		if (this.getAutoCreateNewStructFragment())
		{
			var result = new Kekule.Molecule(id);
			this.getChemSpace().appendChild(result);
			return result;
		}
		else
			return null;
	},

	/**
	 * Create a new atom in a blank parentMol to growing bonds.
	 * @param {Kekule.StructFragment} parentMol
	 * @param {String} id
	 * @param {Hash} absCoord
	 * @param {String} isotopeId Set null to create a default one
	 * @returns {Kekule.ChemStructureNode}
	 */
	createStructStartingAtom: function(parentMol, id, absCoord, isotopeId)
	{
		this.beginUpdateObject();
		try
		{
			if (parentMol)
			{
				if (!isotopeId)
				{
					// create default one
					isotopeId = this.getEditorConfigs().getStructureConfigs().getDefIsotopeId();
				}
				var initialNode = new Kekule.Atom(null, isotopeId);
				parentMol.appendNode(initialNode);
				initialNode.setAbsCoordOfMode(absCoord, this.getCoordMode());
				return initialNode;
			}
			else
				return null;
		}
		finally
		{
			this.endUpdateObject();
		}
	},

	/**
	 * Create new molecule or structure fragment in chem space, the fragment containing a
	 * starting node (atom) to growing bond.
	 * @param {String} id
	 * @param {Hash} absCoord
	 * @param {String} isotopeId Set null to create a default one
	 * @returns {Kekule.ChemStructureNode}
	 */
	createNewStructFragmentAndStartingAtom: function(id, absCoord, isotopeId)
	{
		this.beginUpdateObject();
		try
		{
			var struct;
			/*
			if (this.hasOnlyOneBlankStructFragment())  // only one blank molecule, use it as the new structure fragment's parent.
				struct = this.getChemSpace().getChildAt(0);
			else
			*/
				struct = this.createNewStructFragmentAnchor(id);
			if (struct)
			{
				return this.createStructStartingAtom(struct, id, absCoord, isotopeId);
			}
			else
				return null;
		}
		finally
		{
			this.endUpdateObject();
		}
	},

	/**
	 * Check if there is only one blank structure fragment (with no node and connector or formula) in editor.
	 * @returns {Bool}
	 */
	hasOnlyOneBlankStructFragment: function()
	{
		var result = false;
		if (this.getChemSpace().getChildCount() === 1)
		{
			var obj = this.getChemSpace().getChildAt(0);
			if (obj instanceof Kekule.StructureFragment)
			{
				if (obj.getNodeCount() &lt;= 0 &amp;&amp; obj.getConnectorCount() &lt;= 0 &amp;&amp; !obj.hasFormula())  // empty molecule
					result = true;
			}
		}
		return result;
	},
	/**
	 * If there is only one blank structure fragment (with no node and connector or formula) in editor,
	 * returns it.
	 * @returns {Kekule.StructureFragment}
	 */
	getOnlyOneBlankStructFragment: function()
	{
		if (this.hasOnlyOneBlankStructFragment())
			return this.getChemSpace().getChildAt(0);
	},
	/**
	 * Returns whether a new standalone object (e.g. molecule) can be added to editor.
	 * @returns {Bool}
	 */
	canAddNewStandaloneObject: function()
	{
		return this.getAllowCreateNewChild() || (this.getChemSpace().getChildCount() &lt;= 0);
	},
	/**
	 * Returns whether a new structure fragment that doest not connected to any existing ones can be added to space.
	 * This function returns true if property autoCreateNewStructFragment is true or there is an empty molecule in space.
	 * @returns {Bool}
	 */
	canAddUnconnectedStructFragment: function()
	{
		return this.canAddNewStandaloneObject() || this.hasOnlyOneBlankStructFragment();
	},
	/**
	 * Returns whether current editor allows clone objects.
	 * @returns {Bool}
	 */
	canCloneObjects: function()
	{
		return this.getAllowCreateNewChild();
	},
	/**
	 * Clone objects in space.
	 * Note that this method only works when property allowCreateNewChild is true.
	 * @param {Array} objects
	 * @param {Hash} screenCoordOffset If this value is set, new cloned objects will be moved based on this coord.
	 * @param {Bool} addToSpace If true, the cloned objects will add to current space immediately.
	 * @returns {Array} Actually cloned objects.
	 */
	cloneObjects: function(objects, screenCoordOffset, addToSpace)
	{
		if (!this.getChemSpace())
			return null;
		/*
		if (!this.getAllowCreateNewChild())
			return null;
		*/
		var allowAddToSpace = this.getAllowCreateNewChild();

		var isParentOfOneObj = function(obj, childObjs)
		{
			for (var i = 0, l = childObjs.length; i &lt; l; ++i)
			{
				var childObj = childObjs[i];
				if (/*(obj === childObj) ||*/ (childObj.isChildOf(obj)))
					return true;
			}
			return false;
		};
		var removeUnessentialChildren = function(rootObj, refObj, reservedChildObjs)
		{
			if (reservedChildObjs.indexOf(refObj) >= 0)
			{
				AU.remove(reservedChildObjs, refObj);
				return;
			}
			if (rootObj.getChildAt &amp;&amp; refObj.getChildAt)
			{
				var refChildObjCount = refObj.getChildCount();
				for (var i = refChildObjCount - 1; i >= 0; --i)
				{
					var o = rootObj.getChildAt(i);
					if (!reservedChildObjs.length)
					{
						rootObj.removeChild(o);
						continue;
					}
					var refChildObj = refObj.getChildAt(i);
					if (reservedChildObjs.indexOf(refChildObj) >= 0)
					{
						AU.remove(reservedChildObjs, refChildObj);
					}
					else if (isParentOfOneObj(refChildObj, reservedChildObjs))
					{
						if (refChildObj.getChildObjs)
							removeUnessentialChildren(o, refChildObj, reservedChildObjs);
					}
					else  // can delete
					{
						rootObj.removeChild(o);
					}
				}
			}
		};

		var targetObjs = Kekule.ArrayUtils.toArray(objects);
		var standAloneObjs = [];
		var childObjMap = new Kekule.MapEx();
		for (var i = 0, l = targetObjs.length; i &lt; l; ++i)
		{
			var obj = targetObjs[i];
			var standAloneObj = obj.getStandaloneAncestor? obj.getStandaloneAncestor(): obj;
			if (standAloneObj.clone)  // object can be cloned
			{
				Kekule.ArrayUtils.pushUnique(standAloneObjs, standAloneObj);
				var mapItem = childObjMap.get(standAloneObj);
				if (!mapItem)
				{
					mapItem = [];
					childObjMap.set(standAloneObj, mapItem);
				}
				mapItem.push(obj);
			}
		}

		// start clone
		var space = this.getChemSpace();
		var clonedObjs = [];
		var coordMode = this.getCoordMode();
		var allowCoordBorrow = this.getAllowCoordBorrow();
		var standAloneObjCount = standAloneObjs.length;
		for (var i = 0; i &lt; standAloneObjCount; ++i)
		{
			var obj = standAloneObjs[i];
			var clonedObj = obj.clone();
			// clear ids to avoid conflict
			if (clonedObj.clearIds)
				clonedObj.clearIds();
			/*
			if (coordOffset &amp;&amp; clonedObj.getCoordOfMode &amp;&amp; clonedObj.setCoordOfMode)
			{
				var coord = clonedObj.getCoordOfMode(coordMode, allowCoordBorrow);
				var newCoord = Kekule.CoordUtils.add(coord, coordOffset);
				clonedObj.setCoordOfMode(newCoord, coordMode);
			}
			*/

			// remove unessential child objects of cloned object
			removeUnessentialChildren(clonedObj, obj, childObjMap.get(obj));

			if (addToSpace &amp;&amp; allowAddToSpace)
			{
				space.appendChild(clonedObj);
				if (screenCoordOffset)
				{
					var coord = this.getObjectScreenCoord(clonedObj);
					var newCoord = Kekule.CoordUtils.add(coord, screenCoordOffset);
					this.setObjectScreenCoord(clonedObj, newCoord);
				}
			}
			clonedObjs.push(clonedObj);
		}

		childObjMap.finalize();
		return clonedObjs;
	},

	/**
	 * Clone objects in editor's selection.
	 * @param {Hash} coordOffset New cloned objects will be moved based on this coord.
	 *   If this value is not set, a default one will be used.
	 * @param {Bool} addToSpace If true, the objects cloned will be added to space immediately.
	 * @returns {Array} Actually cloned objects.
	 */
	cloneSelection: function(coordOffset, addToSpace)
	{
		if (coordOffset === undefined)  // use default one
		{
			coordOffset = this.getDefaultCloneScreenCoordOffset();
		}
		var objs = this.getSelection();
		var clonedObjs = this.cloneObjects(objs, coordOffset, addToSpace);
		if (addToSpace)
			this.setSelection(clonedObjs);
		return clonedObjs;
	},

	/**
	 * Returns default coord offset when doing clone selection job in editor.
	 * @returns {Hash}
	 */
	getDefaultCloneScreenCoordOffset: function()
	{
		var screenOffset = this.getEditorConfigs().getInteractionConfigs().getClonedObjectScreenOffset() || 0;
		var coordMode = this.getCoordMode();
		var coordOffset = {'x': screenOffset, 'y': screenOffset};
		if (coordMode === Kekule.CoordMode.COORD3D)
		{
			coordOffset.z = screenOffset;
		}
		//coordOffset = this.translateCoord(coordOffset, Kekule.Editor.CoordSys.SCREEN, Kekule.Editor.CoordSys.OBJ);
		return coordOffset;
	},

	/**
	 * Supply essential charge and radical markers when loading a new chemObj.
	 * @private
	 */
	_supplyChemMarkersOnObj: function(chemObj)
	{
		if (chemObj)
		{
			var structFragments = Kekule.ChemStructureUtils.getAllStructFragments(chemObj, true);
			if (structFragments || structFragments.length)
			{
				for (var i = 0, l = structFragments.length; i &lt; l; ++i)
				{
					this._createLosingChemMarkerOnStructFragment(structFragments[i]);
				}
			}
		}
	},
	/** @private */
	_createLosingChemMarkerOnStructFragment: function(mol)
	{
		mol.beginUpdate();
		try
		{
			if (mol.getCharge &amp;&amp; mol.getCharge())
				mol.fetchChargeMarker(true);
			// then the children
			var nodes = mol.getNodes();
			for (var i = 0, l = mol.getNodeCount(); i &lt; l; ++i)
			{
				var node = mol.getNodeAt(i);
				node.beginUpdate();
				try
				{
					if (node.getCharge())
						node.fetchChargeMarker(true);
					if (node.getRadical())
						node.fetchRadicalMarker(true);
					if (node.getNodeAt)  // is sub fragment
						this._createLosingChemMarkerOnStructFragment(node);
				}
				finally
				{
					node.endUpdate();
				}
			}
		}
		finally
		{
			mol.endUpdate();
		}
	},

	/**
	 * A helper function returning the available non-atom settings used by atom setter widget.
	 * @returns {Array}
	 */
	getEnabledNonAtomInputData: function()
	{
		var result = [];
		var labelConfigs = this.getRenderConfigs().getDisplayLabelConfigs();
		var nonAtomSetting = this.getEditorConfigs().getStructureConfigs().getEnabledNonAtomNodeTypes();

		// R group
		if (nonAtomSetting.RGroup)
			result.push({
				'text': labelConfigs.getRgroup(), 'nodeClass': Kekule.RGroup,
				'description': Kekule.$L('ChemWidgetTexts.CAPTION_RGROUP') //Kekule.ChemWidgetTexts.CAPTION_RGROUP
			});
		// Kekule.Pseudoatom
		if (nonAtomSetting.pseudoatomDummy)
			result.push({
				'text': labelConfigs.getDummyAtom(), 'nodeClass': Kekule.Pseudoatom,
				'props': {'atomType': Kekule.PseudoatomType.DUMMY},
				'description': Kekule.$L('ChemWidgetTexts.CAPTION_DUMMY_ATOM') //Kekule.ChemWidgetTexts.CAPTION_DUMMY_ATOM
			});
		if (nonAtomSetting.pseudoatomHetero)
			result.push({
				'text': labelConfigs.getHeteroAtom(), 'nodeClass': Kekule.Pseudoatom,
				'props': {'atomType': Kekule.PseudoatomType.HETERO},
				'description': Kekule.$L('ChemWidgetTexts.CAPTION_HETERO_ATOM') //Kekule.ChemWidgetTexts.CAPTION_HETERO_ATOM
			});
		if (nonAtomSetting.pseudoatomAny)
			result.push({
				'text': labelConfigs.getAnyAtom(), 'nodeClass': Kekule.Pseudoatom,
				'props': {'atomType': Kekule.PseudoatomType.ANY},
				'description': Kekule.$L('ChemWidgetTexts.CAPTION_ANY_ATOM') //Kekule.ChemWidgetTexts.CAPTION_ANY_ATOM
			});
		// Kekule.VariableAtom List and Not List
		if (nonAtomSetting.variableAtomList)
			result.push({
				'text': this._getVarAtomListLabel(), 'nodeClass': Kekule.VariableAtom,
				'isVarList': true,
				'description': Kekule.$L('ChemWidgetTexts.CAPTION_VARIABLE_ATOM') //Kekule.ChemWidgetTexts.CAPTION_VARIABLE_ATOM
			});
		if (nonAtomSetting.variableAtomNotList)
			result.push({
				'text': this._getVarAtomNotListLabel(), 'nodeClass': Kekule.VariableAtom,
				'isNotVarList': true,
				'description': Kekule.$L('ChemWidgetTexts.CAPTION_VARIABLE_NOT_ATOM') //Kekule.ChemWidgetTexts.CAPTION_VARIABLE_NOT_ATOM
			});
		return result;
	},
	/** @private */
	_getVarAtomListLabel: function()
	{
		var labelConfigs = this.getRenderConfigs().getDisplayLabelConfigs();
		return labelConfigs? labelConfigs.getVariableAtom(): Kekule.ChemStructureNodeLabels.VARIABLE_ATOM;
	},
	/** @private */
	_getVarAtomNotListLabel: function()
	{
		var labelConfigs = this.getRenderConfigs().getDisplayLabelConfigs();
		return '~' + (labelConfigs? labelConfigs.getVariableAtom(): Kekule.ChemStructureNodeLabels.VARIABLE_ATOM);
	},

	/**
	 * A helper function returning the available bond form data used by bond setter widget.
	 * @returns {Array}
	 */
	getEnabledBondFormData: function()
	{
		var BT = Kekule.BondType;
		var BO = Kekule.BondOrder;
		var BS = Kekule.BondStereo;
		var $L = Kekule.$L;
		var HTMLCLASS_PREFIX = 'K-Chem-MolBondIaController-';
		var predefinedBondData = {
			// covalent bond types
			'single': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_SINGLE'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_SINGLE'),
				'htmlClass': HTMLCLASS_PREFIX + 'Single',
				'isDefault': true,   // the default bond type
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.SINGLE,	'stereo': BS.NONE}
			},
			'double': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_DOUBLE'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_DOUBLE'),
				'htmlClass': HTMLCLASS_PREFIX + 'Double',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.DOUBLE,	'stereo': BS.NONE}
			},
			'triple': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_TRIPLE'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_TRIPLE'),
				'htmlClass': HTMLCLASS_PREFIX + 'Triple',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.TRIPLE, 'stereo': BS.NONE}
			},
			'quad': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_QUAD'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_QUAD'),
				'htmlClass': HTMLCLASS_PREFIX + 'Quad',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.QUAD,	'stereo': BS.NONE}
			},
			'explicitAromatic': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_EXPLICIT_AROMATIC'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_EXPLICIT_AROMATIC'),
				'htmlClass': HTMLCLASS_PREFIX + 'Aromatic',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.EXPLICIT_AROMATIC,	'stereo': BS.NONE}
			},
			// stereo bond types
			'up': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_WEDGEUP'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_WEDGEUP'),
				'htmlClass': HTMLCLASS_PREFIX + 'WedgeUp',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.SINGLE,	'stereo': BS.UP}
			},
			'upInverted': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_WEDGEUP_INVERTED'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_WEDGEUP_INVERTED'),
				'htmlClass': HTMLCLASS_PREFIX + 'WedgeUpInverted',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.SINGLE,	'stereo': BS.UP_INVERTED}
			},
			'down': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_WEDGEDOWN'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_WEDGEDOWN'),
				'htmlClass': HTMLCLASS_PREFIX + 'WedgeDown',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.SINGLE,	'stereo': BS.DOWN}
			},
			'downInverted': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_WEDGEDOWN_INVERTED'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_WEDGEDOWN_INVERTED'),
				'htmlClass': HTMLCLASS_PREFIX + 'WedgeDownInverted',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.SINGLE,	'stereo': BS.DOWN_INVERTED}
			},
			'upOrDown': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_WAVY'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_WAVY'),
				'htmlClass': HTMLCLASS_PREFIX + 'WedgeUpOrDown',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.SINGLE,	'stereo': BS.UP_OR_DOWN}
			},
			'closer': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_CLOSER'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_CLOSER'),
				'htmlClass': HTMLCLASS_PREFIX + 'Closer',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.SINGLE,	'stereo': BS.CLOSER}
			},
			'eOrZ': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_DOUBLE_EITHER'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_DOUBLE_EITHER'),
				'htmlClass': HTMLCLASS_PREFIX + 'Double-Either',
				'bondProps': {'bondType': BT.COVALENT, 'bondOrder': BO.DOUBLE,	'stereo': BS.E_OR_Z}
			},
			// other types
			'ionic': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_IONIC'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_IONIC'),
				'htmlClass': HTMLCLASS_PREFIX + 'Ionic',
				'bondProps': {'bondType': BT.IONIC}
			},
			'coordinate': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_COORDINATE'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_COORDINATE'),
				'htmlClass': HTMLCLASS_PREFIX + 'Coordinate',
				'bondProps': {'bondType': BT.COORDINATE}
			},
			'metallic': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_METALLIC'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_METALLIC'),
				'htmlClass': HTMLCLASS_PREFIX + 'Metallic',
				'bondProps': {'bondType': BT.METALLIC}
			},
			'hydrogen': {
				'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_HYDROGEN'),
				'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_HYDROGEN'),
				'htmlClass': HTMLCLASS_PREFIX + 'Hydrogen',
				'bondProps': {'bondType': BT.HYDROGEN}
			}
		};
		var predefinedExtraData = {
			'single': {},
			'double': {'text': $L('ChemWidgetTexts.CAPTION_MOL_BOND_DOUBLE'), 'hint': $L('ChemWidgetTexts.HINT_MOL_BOND_DOUBLE')}
		};
		var bondForms = this.getEditorConfigs().getStructureConfigs().getEnabledBondForms();
		var keys = Kekule.ObjUtils.getOwnedFieldNames(bondForms, false);
		var result = [];
		for (var i = 0, l = keys.length; i &lt; l; ++i)
		{
			var key = keys[i];
			if (bondForms[key]) // this form should be available
			{
				if (DataType.isObjectValue(bondForms[key]))  // a custom bond form
					result.push(bondForms[key]);
				else if (predefinedBondData[key])
					result.push(predefinedBondData[key]);
			}
		}
		return result;
	}
});

/**
 * A special class to give a setting facade for ChemSpaceEditor.
 * Do not use this class alone.
 * @class
 * @augments Kekule.Editor.BaseEditor.Settings
 * @ignore
 */
Kekule.Editor.ChemSpaceEditor.Settings = Class.create(Kekule.Editor.BaseEditor.Settings,
/** @lends Kekule.Editor.ChemSpaceEditor.Settings# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.ChemSpaceEditor.Settings',
	/** @private */
	initProperties: function()
	{
		this.defineProp('allowCreateNewChild', {'dataType': DataType.BOOL, 'serializable': false,
			'getter': function() { return this.getEditor().getAllowCreateNewChild(); },
			'setter': function(value) { this.getEditor().setAllowCreateNewChild(value); }
		});
	}
});

/**
 * Controller for deleting objects (including molecules) in chem space editor.
 * @class
 * @augments Kekule.Widget.BasicEraserIaController
 *
 * @param {Kekule.Editor.BaseEditor} widget Editor of current object being installed to.
 */
Kekule.Editor.BasicMolEraserIaController = Class.create(Kekule.Editor.BasicEraserIaController,
/** @lends Kekule.Editor.BasicMolEraserIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.BasicMolEraserIaController',
	/** @constructs */
	initialize: function($super, widget)
	{
		$super(widget);
	},
	/*
	 * @private
	 */
	doGetActualRemovedObjs: function(objs)
	{
		var result = [];
		Kekule.ArrayUtils.pushUnique(result, objs);
		for (var i = 0, l = objs.length; i &lt; l; ++i)
		{
			var delObjs = objs[i].getCascadeDeleteObjs? objs[i].getCascadeDeleteObjs(): [];
			//Kekule.Editor.StructureUtils.getCascadeDeleteObjs(objs[i]);
			if (delObjs)
				Kekule.ArrayUtils.pushUnique(result, delObjs);
		}
		return result;
	},
	/** @private */
	doRemoveObjs: function(objs)
	{
		if (!objs.length)
			return;
		var operGroup = new Kekule.MacroOperation();
		var molParents = [];
		for (var i = 0, l = objs.length; i &lt; l; ++i)
		{
			var obj = objs[i];
			var parent = obj.getParent();
			var editor = this.getEditor();
			var oper;
			if (obj instanceof /*Kekule.ChemStructureNode*/Kekule.BaseStructureNode)
			{
				oper = new Kekule.ChemStructOperation.RemoveNode(obj, null, null, editor);
				Kekule.ArrayUtils.pushUnique(molParents, obj.getParent());
			}
			else if (obj instanceof /*Kekule.ChemStructureConnector*/Kekule.BaseStructureConnector)
			{
				oper = new Kekule.ChemStructOperation.RemoveConnector(obj, null, null, editor);
				Kekule.ArrayUtils.pushUnique(molParents, obj.getParent());
			}
			else
			{
				oper = new Kekule.ChemObjOperation.Remove(obj, null, null, editor);
			}
			if (oper)
				operGroup.add(oper);
		}
		// check if molecules need to be splitted
		for (var i = 0, l = molParents.length; i &lt; l; ++i)
		{
			var mol = molParents[i];
			if (mol &amp;&amp; (mol instanceof Kekule.StructureFragment))
			{
				var standardizeOper = new Kekule.ChemStructOperation.StandardizeStructFragment(mol, editor);
				standardizeOper.setEnableSplit(this.getEditor().canCreateNewChild());  // if can not create new child, split is disabled.
				operGroup.add(standardizeOper);
			}
		}

		//operGroup.execute();
		editor.execOperation(operGroup);

		/* Do not need to add to history, since it has been done in editor.execOperation
		// add to history
		if (editor &amp;&amp; editor.getEnableOperHistory())
		{
			editor.pushOperation(operGroup);
		}
		*/
	}
});
/** @ignore */
Kekule.Editor.IaControllerManager.register(Kekule.Editor.BasicMolEraserIaController, Kekule.Editor.ChemSpaceEditor);


/**
 * Advanced controller for selecting, moving or rotating chem objects in molecule (ctab) based editor.
 * @class
 * @augments Kekule.Editor.BasicManipulationIaController
 *
 * @property {Bool} enableMagneticMerge Whether nearing node will be merged when moving their position.
 * @property {Bool} enableNodeMerge Whether node merging is allowed.
 * @property {Bool} enableNeighborNodeMerge Whether neighboring node merging is allowed.
 * @property {Bool} enableConnectorMerge Whether connector merging is allowed.
 * @property {Bool} enableStructFragmentMerge Whether node or connector merging between different molecule is allowed.
 * @property {Bool} enableConstrainedMove
 * @property {Bool} enableConstrainedRotate
 * @property {Bool} enableConstrainedResize
 * @property {Bool} enableDirectedMove When true, pres shift key during moving will cause object moves only at X or Y direction.
 */
Kekule.Editor.BasicMolManipulationIaController = Class.create(Kekule.Editor.BasicManipulationIaController,
/** @lends Kekule.Editor.BasicMolManipulationIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.BasicMolManipulationIaController',
	/** @constructs */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setEnableMagneticMerge(true);
		this.setEnableNodeMerge(true);
		this.setEnableNeighborNodeMerge(true);
		this.setEnableConnectorMerge(true);
		this.setEnableStructFragmentMerge(true);
		this.setEnableConstrainedMove(true);
		this.setEnableConstrainedRotate(true);
		this.setEnableConstrainedResize(true);
		this.setEnableDirectedMove(true);
		this._suppressConstrainedMoving = false;  // used internally
		this._suppressConstrainedRotating = false;  // used internally
		this._isInDirectedMoving = false;
		this._directedMovingDirection = null;  // used internally
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('enableMagneticMerge', {'dataType': DataType.BOOL});
		this.defineProp('enableNodeMerge', {'dataType': DataType.BOOL});
		this.defineProp('enableNeighborNodeMerge', {'dataType': DataType.BOOL});
		this.defineProp('enableConnectorMerge', {'dataType': DataType.BOOL});
		this.defineProp('enableStructFragmentMerge', {'dataType': DataType.BOOL});
		//this.defineProp('mergeOperation', {'dataType': 'Kekule.MacroOperation', 'serializable': false});  // store operation of merging nodes
		//this.defineProp('connectorMergeOperation', {'dataType': 'Kekule.Operation', 'serializable': false});  // store operation of merging
		this.defineProp('allManipulateObjsMerged', {'dataType': DataType.BOOL, 'serializable': false});  // store whether a merge operation merges all current objects
		this.defineProp('isMergeDone', {'dataType': DataType.BOOL, 'serializable': false});  // store whether a merge operation is done
		this.defineProp('enableConstrainedMove', {'dataType': DataType.BOOL, 'serializable': false});
		this.defineProp('enableConstrainedRotate', {'dataType': DataType.BOOL, 'serializable': false});
		this.defineProp('enableConstrainedResize', {'dataType': DataType.BOOL, 'serializable': false});

		this.defineProp('enableDirectedMove', {'dataType': DataType.BOOL, 'serializable': false});

		this.defineProp('mergeOperations', {'dataType': DataType.ARRAY, 'serializable': false});  // store operations of merging
		this.defineProp('mergePreviewOperations', {'dataType': DataType.ARRAY, 'serializable': false});  // store preview operations of merging
		//this.defineProp('prevMergeOperations', {'dataType': DataType.ARRAY, 'serializable': false});  // store operations of merging of last phrase
		this.defineProp('mergingDests', {'dataType': DataType.ARRAY, 'serializable': false});  // private
	},

	/** @private */
	canInteractWithObj: function($super, obj)
	{
		return $super(obj) || (this._isMerging &amp;&amp; obj);
	},

	/** @ignore */
	doSetManipulateObjs: function($super, value)
	{
		// When merging just node to another, operating node will be removed from
		// space temporily, add dest mol to operating objs avoid the disappearing of
		// mol in editor when using operContext
		var objs = value? AU.clone(value): [];
		if (this.getMergingDests() &amp;&amp; !this.useMergePreview())
		{
			AU.pushUnique(objs, this.getMergingDests());
		}
		this.setPropStoreFieldValue('manipulateObjs', value);
		if (!value)
			this.getEditor().endOperatingObjs();
		else
			this.getEditor().prepareOperatingObjs(objs);
	},

	/**
	 * Check if currently is in constrained rotate mode.
	 * In that mode, objects can only be rotate to some certain angle.
	 * @returns {Bool}
	 * @private
	 */
	isConstrainedRotate: function()
	{
		return this.getEnableConstrainedMove();
	},
	/**
	 * Check if currently is in constrained resize mode.
	 * In that mode, objects can only be rotate to some certain angle.
	 * @returns {Bool}
	 * @private
	 */
	isConstrainedResize: function()
	{
		return this.getEnableConstrainedResize();
	},
	/**
	 * Check if currently is in constrained move mode.
	 * That is to say, have not select any object, directly move a node and the node has only one connector connected.
	 * In that case, original connector length should be retained.
	 * @returns {Bool}
	 * @private
	 */
	isConstrainedMove: function()
	{
		if (!this.getEnableConstrainedMove())
			return false;
		/*
		 if (this._suppressConstrainedMoving)
		 return false;
		 */
		var objs = this.getManipulateObjs();
		if (objs.length === 1)
		{
			var obj = objs[0];
			var selection = this.getEditor().getSelection();
			if (selection &amp;&amp; (selection.indexOf(obj) &lt; 0))
			{
				/*
				if (obj instanceof Kekule.ChemStructureNode)
				{
					return (obj.getLinkedObjs().length === 1);
				}
				*/
				return obj.getConstraintManipulationBaseObj &amp;&amp; obj.getConstraintManipulationBaseObj();
			}
		}
		return false;
	},
	/**
	 * Check if currently in real constrained rotation and the constrains are not suppressed (e.g., pressing the Alt key).
	 * @returns {Bool}
	 */
	isInActualConstrainedRotation: function()
	{
		return (this.isConstrainedRotate() &amp;&amp; (!this._suppressConstrainedRotating));
	},
	/**
	 * Check if currently is in directed move mode.
	 * @returns {Bool}
	 * @private
	 */
	isDirectedMove: function()
	{
		return (this.getEnableDirectedMove() &amp;&amp; (!this.isConstrainedMove()) &amp;&amp; this._isInDirectedMoving);
	},

	/** @private */
	useMergePreview: function()
	{
		return this._useMergePreview;
	},
	/** @private */
	setUseMergePreview: function(value)
	{
		this._useMergePreview = value;
	},
	/** @private */
	getMergeOperationsInManipulating: function()
	{
		return this._useMergePreview? this.getMergePreviewOperations(): this.getMergeOperations();
	},

	/** @private */
	createManipulateObjInfo: function($super, obj, objIndex, startContextCoord)
	{
		var editor = this.getEditor();
		var info = $super(obj, objIndex, startContextCoord);
		var isConstrained = this.isConstrainedMove();
		if (isConstrained)  // constrained move, store connector length into info
		{
			/*
			var connector = obj.getLinkedConnectors()[0];
			var connectedNode = obj.getLinkedObjs()[0];
			*/
			var stubObj = obj.getConstraintManipulationBaseObj();
			//if (connector &amp;&amp; connectedNode)
			if (stubObj)
			{
				info.isConstrained = true;
				if (!info.hasNoCoord)
				{
					info.originScreenCoord = editor.getObjectScreenCoord(obj);
					//info.refScreenCoord = editor.getObjectScreenCoord(connectedNode);
					info.refScreenCoord = editor.getObjectScreenCoord(stubObj);

					info.connectorScreenLength = Kekule.CoordUtils.getDistance(info.screenCoord, info.refScreenCoord);
					//info.connectorObjLength = connector.getLength(this.getEditor().getCoordMode(), this.getEditor().getAllowCoordBorrow());
					info.connectorObjLength = Kekule.CoordUtils.getDistance(editor.getObjCoord(obj), editor.getObjCoord(stubObj));
					var delta = Kekule.CoordUtils.substract(info.originScreenCoord, info.refScreenCoord);
					info.originBondDirectionAngle = Math.atan2(delta.y, delta.x);
					//console.log('create Info', info.screenCoord, info.refScreenCoord, info.connectorScreenLength);
					info.constrainedBondDirectionDelta = this.getEditorConfigs().getStructureConfigs().getBondConstrainedDirectionDelta();
					info.constrainedBondDirectionAngles = this.getEditorConfigs().getStructureConfigs().getBondConstrainedDirectionAngles();
					info.constrainedBondDirectionAngleThreshold = this.getEditorConfigs().getStructureConfigs().getBondConstrainedDirectionAngleThreshold();
				}
			}
		}
		return info;
	},
	/** @private */
	_calcActualMovedScreenCoord: function($super, obj, info, newScreenCoord)
	{
		var C = Kekule.CoordUtils;
		var result;
		var screenCoord = newScreenCoord;
		if (info.isConstrained &amp;&amp; (!this._suppressConstrainedMoving))  // constrained, need to reserve bond length, recalc coord
		{
			var constrainedBondDirectionDelta = info.constrainedBondDirectionDelta || null;
			var constrainedBondDirectionAngles = info.constrainedBondDirectionAngles || null;
			var constrainedBondDirectionAngleThreshold = info.constrainedBondDirectionAngleThreshold || null;
			var directionAngleResolved = false;
			var directionAngle;
			var currVector = C.substract(newScreenCoord, info.refScreenCoord);
			var currDirection = Math.atan2(currVector.y, currVector.x);

			if (constrainedBondDirectionAngles &amp;&amp; constrainedBondDirectionAngleThreshold)
			{
				for (var i = 0, l = constrainedBondDirectionAngles.length; i &lt; l; ++i)
				{
					var dAngle = constrainedBondDirectionAngles[i];
					if (Math.abs(dAngle - currDirection) &lt;= constrainedBondDirectionAngleThreshold)
					{
						directionAngleResolved = true;
						directionAngle = dAngle;
					}
				}
			}

			if (!directionAngleResolved &amp;&amp; constrainedBondDirectionDelta)
			{
				var step = Math.round((currDirection - info.originBondDirectionAngle) / constrainedBondDirectionDelta);
				//console.log()
				directionAngle = info.originBondDirectionAngle + step * constrainedBondDirectionDelta;
				directionAngleResolved = true;
			}

			if (!directionAngleResolved)
				directionAngle = currDirection;

			result = C.add(info.refScreenCoord,
				{'x': info.connectorScreenLength * Math.cos(directionAngle), 'y': info.connectorScreenLength * Math.sin(directionAngle)});
			//console.log(directionAngle, result);
			/*
			 var currLength = C.getDistance(screenCoord, info.refScreenCoord);
			 if (currLength !== info.connectorScreenLength)
			 {
			 var ratio = info.connectorScreenLength / currLength;
			 var delta = C.substract(screenCoord, info.refScreenCoord);
			 //console.log('constrained', info, ratio);
			 result = C.add(info.refScreenCoord, C.multiply(delta, ratio));
			 //console.log(result, info.connectorScreenLength, C.getDistance(result, info.refScreenCoord));
			 }
			 */
		}
		else
			result = screenCoord;

		return result;
	},
	/** @private */
	_calcActualRotateAngle: function($super, objs, newDeltaAngle, oldAbsAngle, newAbsAngle)
	{
		var isConstrained = (this.isConstrainedRotate() &amp;&amp; (!this._suppressConstrainedRotating));
		var angleStep = isConstrained?
			this.getEditorConfigs().getInteractionConfigs().getConstrainedRotateStep(): null;

		if (angleStep)
		{
			//var times = Math.floor(newDeltaAngle / angleStep);
			var times = Math.round(newDeltaAngle / angleStep);
			return times * angleStep;
		}
		else
			return $super(objs, newDeltaAngle/*, oldAbsAngle, newAbsAngle*/);
	},
	/** @private */
	_calcActualResizeScales: function(objs, newScales)
	{
		var isConstrained = (this.isConstrainedResize() &amp;&amp; (!this._suppressConstrainedResize));
		if (!isConstrained)
			return newScales;
		else  // constrained scale calculation
		{
			var scaleStep = this.getEditorConfigs().getInteractionConfigs().getConstrainedResizeStep();
			if (scaleStep)
			{
				var sx = (Math.round(newScales.scaleX / scaleStep) || 1) * scaleStep;  // do not scale to 0
				var sy = (Math.round(newScales.scaleY / scaleStep) || 1) * scaleStep;
				var actualScales = {
					'scaleX': sx,
					'scaleY': sy
				};
				return actualScales;
			}
			else
				return newScales;
		}
	},

	/** @private */
	prepareManipulating: function($super, manipulationType, manipulatingObjs, startScreenCoord, startBox, rotateCenter, rotateRefCoord)
	{
		/*
		this.setIsMergeDone(false);
		this.setMergeOperation(null);
		*/
		this.setUseMergePreview(this.getEditorConfigs().getInteractionConfigs().getEnableMergePreview());
		this.setMergeOperations([]);
		this.setMergePreviewOperations([]);
		//this.setPrevMergeOperations([]);
		$super(manipulationType, manipulatingObjs, startScreenCoord, startBox, rotateCenter, rotateRefCoord);
		//this._mergeReversed = false;  // internal flag
		this._directedMovingDirection = null;
		this.setManuallyHotTrack(true);  // manully hot track
		//console.log('start', this.getManuallyHotTrack());
	},

	/** @ignore */
	manipulateEnd: function($super)
	{
		$super();
		this.getEditor().hideHotTrack();
		this.setManuallyHotTrack(false);
	},

	/** @ignore */
	createManipulateOperation: function($super)
	{
		$super();
		this.setMergeOperations([]);
		this.setMergePreviewOperations([]);
	},

	/** @ignore */
	getAllObjOperations: function($super, isTheFinalOperationToEditor)
	{
		/*
		var moveOpers = this.getMoveOperations();
		var mergeOpers = this.getMergeOperations();
		var count = Math.max(moveOpers.length, mergeOpers.length);
		var result = [];
		for (var i = 0; i &lt; count; ++i)
		{
			if (mergeOpers[i])
				result.push(mergeOpers[i]);
			else
				result.push(moveOpers[i]);
		}
		return result;
		*/

		//console.log('getAllObjOperations', isTheFinalOperationToEditor, this.useMergePreview());
		var mergeOpers;
		// if use merge preview, we should do the actual merging when the manipulation is done
		if (isTheFinalOperationToEditor &amp;&amp; this.useMergePreview())
		{
			var previewOpers = this.getMergePreviewOperations();
			if (previewOpers &amp;&amp; previewOpers.length)
			{
				//console.log('preview opers', previewOpers);
				var opers = this.getMergeOperations();
				for (var i = 0, l = previewOpers.length; i &lt; l; ++i)
				{
					var previewOper = previewOpers[i];
					if (previewOper)  // may be empty slot in operations
					{
						var mergeConnector = (previewOper instanceof Kekule.ChemStructOperation.MergeConnectorsBase);
						/*
						 Kekule.ChemStructOperation.MergeConnectors:
						 Kekule.ChemStructOperation.MergeNodes;
						 */
						var oper = mergeConnector ?
								this.createConnectorMergeOperation(previewOper.getTarget(), previewOper.getDest()) :
								this.createNodeMergeOperation(previewOper.getTarget(), previewOper.getDest());
						opers.push(oper);
					}
				}
				this.executeMergeOpers(opers);
			}
			mergeOpers = opers;  // this.getMergeOperations();
		}
		else
		{
			mergeOpers = this.getMergeOperationsInManipulating();
		}

		//console.log('merge operations', mergeOpers);

		var result = $super() || [];
		if (mergeOpers &amp;&amp; mergeOpers.length)
			Kekule.ArrayUtils.pushUnique(result, mergeOpers);
		return result;
	},

	/** @private */
	_canMergeNodes: function(targetNode, destNode)
	{
		var allowMolMerge = this.getEnableStructFragmentMerge();
		var allowNeighborNodeMerge = this.getEnableNeighborNodeMerge();
		if (this.getEnableNodeMerge())
		{
			/*
			if (this.getEnableStructFragmentMerge())
				result = true;
			else
				result = (targetNode.getParent() === destNode.getParent());
			*/
			return Kekule.ChemStructOperation.MergeNodes.canMerge(targetNode, destNode, allowMolMerge, allowNeighborNodeMerge);
		}
		else
			return false;
	},
	/** @private */
	_canMergeConnectors: function(targetConnector, destConnector)
	{
		var allowMolMerge = this.getEnableStructFragmentMerge();
		if (this.getEnableConnectorMerge())
		{
			return Kekule.ChemStructOperation.MergeConnectors.canMerge(targetConnector, destConnector, allowMolMerge);
		}
		else
			return false;
	},

	/** @private */
	_findSuitableMergeTargetBoundInfo: function(boundInfos, excludedObjs, targetClass, checkFunc)
	{
		for (var i = boundInfos.length - 1; i >= 0; --i)
		{
			var info = boundInfos[i];
			var obj = info.obj;
			if (excludedObjs.indexOf(obj) >= 0)
				continue;
			if (!(obj instanceof targetClass))
				continue;
			if (checkFunc &amp;&amp; !checkFunc(obj))
				continue;
			return info;
		}
		return null;
	},

	/** @private */
	_getMagneticNodeMergeDest: function(node, nodeScreenCoord, excludedObjs)
	{
		var editor = this.getEditor();
		var self = this;
		var filterFunc = function(bound)
		{
			var obj = bound.obj;
			return (node !== obj) &amp;&amp; (excludedObjs.indexOf(obj) &lt; 0)
					&amp;&amp; (obj instanceof Kekule.ChemStructureNode)
					&amp;&amp; self._canMergeNodes(node, obj);
		};
		if (nodeScreenCoord)
		{
			var boundInfos = editor.getBoundInfosAtCoord(nodeScreenCoord, filterFunc, this.getCurrBoundInflation());
			//console.log('boundInfos', boundInfos);
			/*
			var overlapBoundInfo = this._findSuitableMergeTargetBoundInfo(boundInfos, excludedObjs, Kekule.ChemStructureNode,
					function(destObj)
					{
						return self._canMergeNodes(node, destObj);
					}
			);
			*/
			var overlapBoundInfo = boundInfos.length? boundInfos[boundInfos.length - 1]: null;
			return overlapBoundInfo? overlapBoundInfo.obj: null;
		}
		else
			return null;
	},

	/** @ignore */
	moveManipulatedObjs: function($super, endScreenCoord)
	{
		var actualEndCoord;  // = Object.extend({}, endScreenCoord);
		//console.log(this.isDirectedMove(), this._isInDirectedMoving);
		if (this.isDirectedMove())
		{
			var C = Kekule.CoordUtils;
			var startCoord = this.getStartCoord();
			var distance = C.getDistance(startCoord, endScreenCoord);
			var delta = C.substract(endScreenCoord, startCoord);
			var directedDirection = this._directedMovingDirection;
			if (this._directedMovingDirection)  // already set direction
			{

			}
			else  // not set, need calculate
			{
				directedDirection = (Math.abs(delta.x) >= Math.abs(delta.y))? 'x': 'y';
				if (distance &lt; this.getEditor().getEditorConfigs().getInteractionConfigs().getDirectedMoveDistanceThreshold())
				{
					// do nothing
				}
				else  // set _directedMovingDirection
				{
					this._directedMovingDirection = directedDirection;
				}
			}

			actualEndCoord = Object.extend({}, startCoord);
			actualEndCoord[directedDirection] = endScreenCoord[directedDirection];
		}
		else  // normal move
			actualEndCoord = endScreenCoord;
		return $super(actualEndCoord);
	},

	/** @ignore */
	applyManipulatingObjsInfo: function($super, endScreenCoord)
	{
		this.setAllManipulateObjsMerged(false);
		var useMergePreview = this.useMergePreview();

		var editor = this.getEditor();
		editor.hotTrackOnObj(null);  // clear old hot track objects

		var MT = Kekule.Editor.BasicManipulationIaController.ManipulationType;
		var manipulateType = this.getManipulationType();
		var originManipulatedObjs = this.getManipulateOriginObjs();
		var manipulatedObjs = this.getManipulateObjs();

		var excludedObjs = [].concat(originManipulatedObjs);
		Kekule.ArrayUtils.pushUnique(excludedObjs, manipulatedObjs);

		//var oldMergeOpers = this.getMergeOperations();
		var oldMergeOpers = this.getMergeOperationsInManipulating();
		//console.log(this.getMergeOperationsInManipulating() === this.getMergeOperations());
		//var oldMergeOpers = this.getMergeOperations();

		//var allowMolMerge = this.getEnableStructFragmentMerge();
		var self = this;

		var objCanBeMerged = function(obj)
		{
			if (obj instanceof Kekule.StructureFragment)
				return false;
			else
				return (obj instanceof Kekule.ChemStructureNode) || (obj instanceof Kekule.ChemStructureConnector);
		} ;

		// handle mouse position merge and magnetic merge here

		var isMovingOneBond = (originManipulatedObjs.length === 1) &amp;&amp; (originManipulatedObjs[0] instanceof Kekule.ChemStructureConnector);
		var isMovingOneNode = (manipulatedObjs.length === 1) &amp;&amp; (manipulatedObjs[0] instanceof Kekule.ChemStructureNode) &amp;&amp; objCanBeMerged(manipulatedObjs[0]);
		if (!isMovingOneBond &amp;&amp; this.getEnableMagneticMerge())
		{
			var currManipulateInfoMap = this.getManipulateObjCurrInfoMap();
			var manipulateInfoMap = this.getManipulateObjInfoMap();
			var self = this;
			var magneticMergeObjIndexes = [];
			var magneticMergeObjs = [];
			var magneticMergeDests = [];
			// filter out all merge nodes
			//console.log('manipulate objects count', manipulatedObjs.length);
			for (var i = 0, l = manipulatedObjs.length; i &lt; l; ++i)
			{
				var obj = manipulatedObjs[i];
				if (!objCanBeMerged(obj))
					continue;
				var currInfo = currManipulateInfoMap.get(obj);
				var currCoord = currInfo.screenCoord;
				if (currCoord)
				{
					var boundInfos = editor.getBoundInfosAtCoord(currCoord, null, this.getCurrBoundInflation());
					/*
					 var overlapBoundInfo = this._findSuitableMergeTargetBoundInfo(boundInfos, excludedObjs, Kekule.ChemStructureNode,
					 function(destObj)
					 {
					 return self._canMergeNodes(obj, destObj);
					 }
					 );
					 if (overlapBoundInfo &amp;&amp; overlapBoundInfo.obj)  // may merge, store info
					 */
					var mergeDest = this._getMagneticNodeMergeDest(obj, currCoord, excludedObjs);
					if (mergeDest)  // may merge, store info
					{
						magneticMergeObjIndexes.push(i);
						magneticMergeObjs.push(obj);
						magneticMergeDests.push(mergeDest);
						//console.log('check merge ok on', i);
					}
					else
					{
						//console.log('check merge fail on', i, currCoord);
					}
				}
			}
			if (magneticMergeObjs.length)  // has merge items
			{
				var mergedObjCount = magneticMergeObjs.length;
				this.setAllManipulateObjsMerged(mergedObjCount === manipulatedObjs.length);
				/*
				if (this.getAllManipulateObjsMerged())
					console.log('all merged!', mergedObjCount);
        */
				var mergeSingleObj = (mergedObjCount &lt;= 1);  // merge only one node
				/*
				// If merge on only one node, other node position may also be changed
				// e.g. add repository ring structure to another node
				var needCreateNewMerge = (mergedObjCount &lt;= 1); // false;
				*/
				var needCreateNewMerge = false;
				// check if need create new merge operation
				if (!needCreateNewMerge)
				{
					var sameMergeOpers = [];
					//console.log('oldMergeOpers', oldMergeOpers, magneticMergeObjIndexes);
					for (var i = 0, l = magneticMergeObjs.length; i &lt; l; ++i)
					{
						var obj = magneticMergeObjs[i];
						var dest = magneticMergeDests[i];
						var index = magneticMergeObjIndexes[i];
						var oldMergeOper = oldMergeOpers[index];
						if (!oldMergeOper || !this.isSameNodeMerge(oldMergeOper, obj, dest))
						{
							//console.log('need new', oldMergeOper, obj.getId(), dest.getId(), index);
							needCreateNewMerge = true;
							break;
						}
						else
							sameMergeOpers.push(oldMergeOper);
					}
					for (var i = 0, l = oldMergeOpers.length; i &lt; l; ++i)
					{
						var oldMergeOper = oldMergeOpers[i];
						if (oldMergeOper)
						{
							var index = sameMergeOpers.indexOf(oldMergeOper);
							if (index &lt; 0)   // old merge has more nodes than current, need to recreate new merge
							{
								needCreateNewMerge = true;
								break;
							}
							else
								sameMergeOpers.splice(index, 1);
						}
					}
				}

				//console.log('need new', needCreateNewMerge, mergeSingleObj);
				if (needCreateNewMerge || mergeSingleObj)
				{
					if (needCreateNewMerge)
					{
						//console.log('need new');
						//this.reverseMergeOpers();
						this.reverseMergeOpers(this.getMergeOperationsInManipulating());
					}
					// also need to adjust position of rest manipulatedObjs
					var CU = Kekule.CoordUtils;
					if ((mergedObjCount === 1) || (editor.getCoordMode() === Kekule.CoordMode.COORD3D))
					{
						var currInfo = currManipulateInfoMap.get(magneticMergeObjs[0]);
						var currCoord = currInfo.screenCoord;
						var destCoord = editor.getObjectScreenCoord(magneticMergeDests[0]);
						var coordTranslate = CU.substract(destCoord, currCoord);
						// change all currInfo coord, and redo apply job
						var needReApply = false;

						var fequal = Kekule.NumUtils.isFloatEqual;
						var threshold = 1e-10; //{x: Math.abs(currCoord.x) * 1e-8, y: Math.abs(currCoord.y) * 1e-8}
						if (!fequal(coordTranslate.x, 0, threshold) || !fequal(coordTranslate.y, 0, threshold))  // if transalte coord is {0, 0} (often ocurrs in ring / chain ia controller, no need to adjust coords)
						{
							//console.log('here', coordTranslate, currCoord, destCoord);
							for (var i = 0, l = manipulatedObjs.length; i &lt; l; ++i)
							{
								var obj = manipulatedObjs[i];
								if (obj !== magneticMergeObjs[0])
								{
									var info = currManipulateInfoMap.get(obj);
									if (info.screenCoord)
									{
										var newCoord = CU.add(info.screenCoord, coordTranslate);
										info.screenCoord = newCoord;
										if (this._getMagneticNodeMergeDest(obj, newCoord, excludedObjs))  // move position can do another magnetic merge
											needReApply = true;
									}
									//this.applySingleManipulatingObjInfo(i, obj, info, endScreenCoord);
								}
							}
						}
						if (needReApply)
						{
							return this.applyManipulatingObjsInfo(endScreenCoord);
						}
						else
						{
							for (var i = 0, l = manipulatedObjs.length; i &lt; l; ++i)
							{
								var obj = manipulatedObjs[i];
								//if (obj !== magneticMergeObjs[0])
								{
									var info = currManipulateInfoMap.get(obj);
									this.applySingleManipulatingObjInfo(i, obj, info, endScreenCoord);
								}
							}
						}
					}
					else if ((mergedObjCount > 1) &amp;&amp; (editor.getCoordMode() !== Kekule.CoordMode.COORD3D))  // 2 or more, first two one decide all others' position
					{
						var obj0 = magneticMergeObjs[0];
						var obj1 = magneticMergeObjs[1];
						var coordObj0 = manipulateInfoMap.get(obj0).screenCoord;
						var coordObj1 = manipulateInfoMap.get(obj1).screenCoord;
						//console.log(coordObj0, coordObj1, manipulateInfoMap.get(obj0));

						/*
						 var distanceObj = CU.getDistance(coordObj0, coordObj1);
						 var deltaObj = CU.substract(coordObj1, coordObj0);
						 var angleObj = Math.atan2(deltaObj.y, deltaObj.x);
						 */

						var coordDest0 = editor.getObjectScreenCoord(magneticMergeDests[0]);
						var coordDest1 = editor.getObjectScreenCoord(magneticMergeDests[1]);
						/*
						 var distanceDest = CU.getDistance(coordDest0, coordDest1);
						 var deltaDest = CU.substract(coordDest1, coordDest0);
						 var angleDest = Math.atan2(deltaDest.y, deltaDest.x);

						 var coordDelta = CU.substract(coordDest0, coordObj0);
						 //console.log(coordDelta, coordDest0, coordObj0);

						 var transParam = {
						 'translateX': coordDelta.x,
						 'translateY': coordDelta.y,
						 'scale': distanceDest / distanceObj,
						 'rotateAngle': angleDest - angleObj,
						 'center': coordObj0  //coordDest0
						 }
						 */
						// TODO: currently only handle 2D situation
						var transParam = CU.calcCoordGroup2DTransformParams(coordObj0, coordObj1, coordDest0, coordDest1);
						//console.log(transParam, transParam.rotateAngle * 180 / Math.PI);
						var matrix = CU.calcTransform2DMatrix(transParam);

						// change all currInfo coord, and redo apply job
						var needReApply = false;
						for (var i = 0, l = manipulatedObjs.length; i &lt; l; ++i)
						{
							var obj = manipulatedObjs[i];
							if (magneticMergeObjs.indexOf(obj) &lt; 0)
							{
								var info = manipulateInfoMap.get(obj);
								var currInfo = currManipulateInfoMap.get(obj);
								if (info.screenCoord)
								{
									var newCoord = CU.transform2DByMatrix(info.screenCoord, matrix);
									currInfo.screenCoord = newCoord;
									if (this._getMagneticNodeMergeDest(obj, newCoord, excludedObjs))  // move position can do another magnetic merge
										needReApply = true;
								}
								if (info.size)
									currInfo.size = CU.multiply(info.size, transParam.scale);

								//this.applySingleManipulatingObjInfo(i, obj, currInfo, endScreenCoord);
							}
						}

						if (needReApply)
							return this.applyManipulatingObjsInfo(endScreenCoord);
						else
						{
							for (var i = 0, l = manipulatedObjs.length; i &lt; l; ++i)
							{
								var obj = manipulatedObjs[i];
								if (magneticMergeObjs.indexOf(obj) &lt; 0)
								{
									var currInfo = currManipulateInfoMap.get(obj);
									this.applySingleManipulatingObjInfo(i, obj, currInfo, endScreenCoord);
								}
							}
						}
					}

					if (needCreateNewMerge)
					{
						//console.log('here');
						for (var i = 0, l = mergedObjCount; i &lt; l; ++i)
						{
							var obj = magneticMergeObjs[i];
							var dest = magneticMergeDests[i];
							var index = magneticMergeObjIndexes[i];
							if (useMergePreview)
							{
								var mergePreviewOper = this.createNodeMergeOperation(obj, dest, true);
								this.getMergePreviewOperations()[index] = mergePreviewOper;
							}
							else
							{
								var mergeOper = this.createNodeMergeOperation(obj, dest);
								this.getMergeOperations()[index] = mergeOper;
							}
						}
						//console.log('execute merge on', mergedObjCount);
						//console.log('create new', magneticMergeObjIndexes, this.getMergeOperationsInManipulating());

						//this.executeMergeOpers();
						this.executeMergeOpers(this.getMergeOperationsInManipulating());
					}
				}

				//console.log('hot track on', magneticMergeDests.length, mergedObjCount, magneticMergeObjs.length);
				editor.hotTrackOnObj(magneticMergeDests);

				return;
			}
		}

		// check if do magnetic merge

		// then check if mouse position merge
		if (manipulateType === MT.MOVE)
		{
			var doMousePosMerge = false;

			if ((isMovingOneBond &amp;&amp; this.getEnableConnectorMerge()) || (isMovingOneNode &amp;&amp; this.getEnableNodeMerge()))
			{
				// check if endScreenCoord (mouse position) overlap with an existing object
				var overlapedObj;
				var boundInfos = editor.getBoundInfosAtCoord(endScreenCoord, null, this.getCurrBoundInflation());
				var targetClass = isMovingOneBond? Kekule.ChemStructureConnector: Kekule.ChemStructureNode;
				var targetObj = isMovingOneBond? originManipulatedObjs[0]: manipulatedObjs[0];
				var checkFunc = isMovingOneBond?
					function(obj)
					{
						return self._canMergeConnectors(targetObj, obj);
					}:
					function(obj)
					{
						return self._canMergeNodes(targetObj, obj);
					};
				var overlapBoundInfo = this._findSuitableMergeTargetBoundInfo(boundInfos, excludedObjs, targetClass, checkFunc);
				if (overlapBoundInfo)  // has bound info, do merge
				{
					var destObj = overlapBoundInfo.obj;
					//console.log('can merge to', destObj.getClassName());
					if (destObj)
					{
						this.setAllManipulateObjsMerged(true);
						// can actual do merge, hot track on editor
						editor.hotTrackOnObj(destObj);

						var oldMergeOper = oldMergeOpers[0];
						if ((isMovingOneBond &amp;&amp; this.isSameConnectorMerge(oldMergeOper, targetObj, destObj))
							|| (isMovingOneNode &amp;&amp; this.isSameNodeMerge(oldMergeOper, targetObj, destObj)))  // merged already in last phrase
						{
							//console.log('!!!!same merge!!!!!');
							return;
							// do nothing here
						}
						else
						{
							if (oldMergeOper)
							{
								//this.reverseMergeOpers();
								this.reverseMergeOpers(this.getMergeOperationsInManipulating());
							}

							/*
							var mergeOper = isMovingOneBond?
								this.createConnectorMergeOperation(targetObj, destObj):
								this.createNodeMergeOperation(targetObj, destObj);
							this.getMergeOperations()[0] = mergeOper;
							*/
							if (useMergePreview)
							{
								var mergeOper = isMovingOneBond?
										this.createConnectorMergeOperation(targetObj, destObj, useMergePreview):
										this.createNodeMergeOperation(targetObj, destObj, useMergePreview);
								this.getMergePreviewOperations()[0] = mergeOper;
							}
							else
							{
								var mergeOper = isMovingOneBond?
										this.createConnectorMergeOperation(targetObj, destObj):
										this.createNodeMergeOperation(targetObj, destObj);
								this.getMergeOperations()[0] = mergeOper;
							}

							//mergeOper.execute();
							//this.executeMergeOpers();
							this.executeMergeOpers(this.getMergeOperationsInManipulating());
							return;
						}
					}
				}
			}
		}

		// no merge, just reverse old one and do normal move
		//this.reverseMergeOpers();
		this.reverseMergeOpers(this.getMergeOperationsInManipulating());

		$super(endScreenCoord);
	},

	/**
	 * @private
	 * @deprecated
	 */
	doMoveManipulatedObj_old: function($super, objIndex, obj, newScreenCoord, moverScreenCoord)
	{
		var editor = this.getEditor();

		var info = this.getManipulateObjInfoMap().get(obj);
		//var actualNewScreenCoord = this._calcActualMovedScreenCoord(obj, info, newScreenCoord);
		var actualNewScreenCoord = newScreenCoord;

		var manipulatedObjs = this.getManipulateOriginObjs(); //this.getManipulateObjs();
		var manipulateType = this.getManipulationType();

		var isMovingBond = (manipulateType === Kekule.Editor.BasicManipulationIaController.ManipulationType.MOVE)
			&amp;&amp; (manipulatedObjs.length === 1) &amp;&amp; (manipulatedObjs[0] instanceof Kekule.ChemStructureConnector);

		// check if magnetic merge
		var coord = actualNewScreenCoord;
		var mergeOper = null;
		//var merged = false;
		var mergeOpers = this.getMergeOperations();
		var oldMergeOper = mergeOpers[objIndex];

		var currManipulatingObjs = this.getManipulateObjs();

		if (!isMovingBond &amp;&amp; this.getEnableMagneticMerge() &amp;&amp; (obj instanceof Kekule.ChemStructureNode))
		{
			var boundInfos = editor.getBoundInfosAtCoord(coord);
			if (boundInfos &amp;&amp; boundInfos.length)  // may magnetic merge
			{
				for (var i = boundInfos.length - 1; i >= 0; --i)
				{
					var info = boundInfos[i];
					var boundObj = info.obj;
					if (boundObj === obj)
						continue;
					if (currManipulatingObjs.indexOf(boundObj) >= 0)
						continue;


					if (boundObj instanceof Kekule.ChemStructureNode)  // node on node, may merge
					{
						if (this._canMergeNodes(obj, boundObj))  // do merge
						{
							editor.addHotTrackedObj(boundObj);
							if (this.isSameNodeMerge(oldMergeOper, obj, boundObj))
								return;
							mergeOper = this.createNodeMergeOperation(obj, boundObj);
							//editor.hotTrackOnObj(boundObj);
							//console.log('add hot track', boundObj.getId(), editor.getHotTrackedObjs());
							//console.log('merge on', boundObj);
							break;
						}
					}
				}
				if (!mergeOper)
				{
					editor.hotTrackOnObj(null);
					//console.log('can not merge');
				}
				else  // actually do merge
				{
					if (oldMergeOper)
					{
						this.reverseMergeOpers(objIndex);
					}
					this.getMergeOperations()[objIndex] = mergeOper;
					//this.getPrevMergeOperations()[objIndex] = null;  // avoid this oper be reversed in following old manipulation

					//mergeOper.execute();
					this.executeMergeOpers();
				}
			}
		}

		/*
		if (mergeOper)  // do magnetic merge
			return;
		*/

		//console.log('move', objIndex, newContextCoord);

		// try do mouse pointed merge
		var coord = moverScreenCoord;
		var merged = false;
		if ((manipulateType === Kekule.Editor.BasicManipulationIaController.ManipulationType.MOVE))
		{
			var currObj = manipulatedObjs[0];
			if (manipulatedObjs &amp;&amp; (manipulatedObjs.length === 1))  // move object, only one obj to move, merge is possible
			{
				//console.log('may merge');
				// check if newScreenCoord overlaps with a bound item
				var boundItem = editor.getTopmostBoundInfoAtCoord(coord, [currObj]); // exclude obj, find the most top other object
				if (boundItem)  // overlaps on mouse position, may merge
				{
					var destObj = boundItem.obj;

					if (destObj &amp;&amp; (currManipulatingObjs.indexOf(destObj) &lt; 0))
					{
						if (isMovingBond &amp;&amp; (currObj instanceof Kekule.ChemStructureConnector) &amp;&amp; (destObj instanceof Kekule.ChemStructureConnector))  // merge connector
						{
							if (this.getEnableConnectorMerge())
							{
								editor.hotTrackOnObj(destObj);
								if (this.getEnableStructFragmentMerge())
									merged = true;
								else
									merged = (currObj.getParent() === destObj.getParent());
								if (merged)
								{
									mergeOper = this.createConnectorMergeOperation(currObj, destObj);
								}
							}
						}
						else if ((currObj instanceof Kekule.ChemStructureNode) &amp;&amp; (destObj instanceof Kekule.ChemStructureNode))  // merge node
						{
							//if ((currObj.getLinkedObjs().indexOf(destObj) &lt; 0))  // connected node can not merge
							{
								if (this._canMergeNodes(currObj, destObj))
								{
									editor.hotTrackOnObj(destObj);
									if (this.isSameNodeMerge(oldMergeOper, currObj, destObj))
									{
										return;
									}
									else
									{
										//console.log('different merge', oldMergeOper);
									}
									mergeOper = this.createNodeMergeOperation(currObj, destObj);
								}
							}
						}

						if (mergeOper)  // actually do merge
						{
							var oldMergeOper = mergeOpers[objIndex];  // important, must retrieve again, as mergeOpers[index] may be set at magnetic merge
							if (oldMergeOper)
							{
								this.reverseMergeOpers(objIndex);
							}
							this.getMergeOperations()[objIndex] = mergeOper;
							//this.getPrevMergeOperations()[objIndex] = null;  // avoid this oper be reversed in following old manipulation
							//mergeOper.execute();
							this.executeMergeOpers();
							return;
						}
					}
				}
			}
		}
		/*
		else
			$super(objIndex, obj, newScreenCoord, moverScreenCoord);
		*/

		if (!mergeOper)  // no merge available
		{
			// hide hot track
			editor.hideHotTrack();

			var prevMerged = /*!this._mergeReversed &amp;&amp;*/ !!this.getMergeOperations().length;
			//if (this.getMergeOperation() &amp;&amp; (this.getMergeOperation() === this.getActiveOperation()))  // a merge operation is created and executed before
			if (prevMerged)
			{
				this.reverseMergeOpers(objIndex);
			}
			$super(objIndex, obj, newScreenCoord, moverScreenCoord);
		}
	},

	/*
	 * Add a merge operation.
	 * @param {Kekule.Operation} mergeOper
	 * @private
	 */
	/*
	addMergeOperation: function(mergeOper)
	{
		var oper = this.getMergeOperation();
		if (!oper)
		{
			oper = new Kekule.MacroOperation();
			this.setMergeOperation(oper);
		}
		oper.add(mergeOper);
	},
	*/
	/*
	 * Remove an unneed merge operation.
	 * @param {Kekule.Operation} mergeOper
	 * @private
	 */
	/*
	removeMergeOperation: function(mergeOper)
	{
		var oper = this.getMergeOperation();
		if (oper)
		{
			oper.remove(mergeOper);
			if (oper.getChildCount() &lt;= 0)  // empty
			{
				this.setMergeOperation(null);
				oper.finalize();
			}
		}
	},
	*/
	/*
	 * Returns a merge operation related with object.
	 * @param {Kekule.ChemObject} obj
	 * @returns {Kekule.Operation}
	 * @private
	 */
	/*
	getMergeOperOnObject: function(obj)
	{
		var opers = this.getMergeOperation();
		if (opers)
		{
			var count = opers.getChildCount();
			for (var i = 0; i &lt; count; ++i)
			{
				var oper = opers.getChildAt(i);
				if (oper.getTarget &amp;&amp; oper.getTarget() === obj)
					return oper;
			}
		}
		return null;
	},
	*/

	/** @private */
	createNodeMergeOperation: function(fromNode, toNode, useMergePreview)
	{
		var allowMolMerge = this.getEnableStructFragmentMerge();
		/*
		var parent = fromNode.getParent();
		if ((parent !== toNode.getParent()) &amp;&amp; !allowMolMerge)  // not same parent, can not merge
			return null;
		*/
		if (!Kekule.ChemStructOperation.MergeNodes.canMerge(fromNode, toNode, allowMolMerge, this.getEnableNeighborNodeMerge()))
			return null;
		else
		{
			//var op = new Kekule.EditorOperation.OpMergeNodes(this.getEditor(), parent, fromNode, toNode);
			//var op = new Kekule.ChemStructOperation.MergeNodes(fromNode, toNode, allowMolMerge);
			var op = useMergePreview?
					(new Kekule.ChemStructOperation.MergeNodesPreview(fromNode, toNode, allowMolMerge, this.getEditor())):
					(new Kekule.ChemStructOperation.MergeNodes(fromNode, toNode, allowMolMerge, this.getEditor()));
			return op;
		}
	},
	/** @private */
	createConnectorMergeOperation: function(fromConnector, toConnector, useMergePreview)
	{
		var allowMolMerge = this.getEnableStructFragmentMerge();
		if (!Kekule.ChemStructOperation.MergeConnectors.canMerge(fromConnector, toConnector, allowMolMerge))
			return null;
		else
		{
			//var op = new Kekule.EditorOperation.OpMergeNodes(this.getEditor(), parent, fromNode, toNode);
			//var op = new Kekule.ChemStructOperation.MergeConnectors(fromConnector, toConnector, this.getEditor().getCoordMode(), allowMolMerge);
			var mergeClass = useMergePreview? Kekule.ChemStructOperation.MergeConnectorsPreview: Kekule.ChemStructOperation.MergeConnectors;
			var op = new mergeClass(fromConnector, toConnector, this.getEditor().getCoordMode(), allowMolMerge, this.getEditor());
			return op;
		}
	},

	/** @private */
	isSameConnectorMerge: function(mergeOper, fromConnector, toConnector)
	{
		return mergeOper &amp;&amp; (mergeOper instanceof Kekule.ChemStructOperation.MergeConnectorsBase)
				&amp;&amp; (fromConnector === mergeOper.getTarget()) &amp;&amp; (toConnector === mergeOper.getDest());
	},
	/** @private */
	isSameNodeMerge: function(mergeOper, fromNode, toNode)
	{
		//console.log('check same', fromNode.getId(), toNode.getId(), mergeOper.getTarget().getId(), mergeOper.getDest().getId());
		return mergeOper &amp;&amp; (mergeOper instanceof Kekule.ChemStructOperation.MergeNodesBase)
			&amp;&amp; (fromNode === mergeOper.getTarget()) &amp;&amp; (toNode === mergeOper.getDest());
	},

	/** @private */
	executeMergeOpers: function(mergeOpers)
	{
		//var opers = Kekule.ArrayUtils.toUnique(this.getMergeOperations());
		var editor = this.getEditor();
		var opers = Kekule.ArrayUtils.toUnique(mergeOpers || this.getMergeOperationsInManipulating());
		var mergingDests = [];
		editor.beginUpdateObject();
		try
		{
			for (var i = 0, l = opers.length; i &lt; l; ++i)
			{
				if (opers[i])
				{
					opers[i].execute();
					var dest = opers[i].getDest ? opers[i].getDest() : null;
					if (dest)
						AU.pushUnique(mergingDests, dest);
				}
			}
			this.setMergingDests(mergingDests.length ? mergingDests : null);

			//console.log('[merge!!!!!]');
			this.refreshManipulateObjs();
			this._mergeJustReversed = false;
		}
		finally
		{
			editor.endUpdateObject();
		}
	},
	/** @private */
	reverseMergeOpers: function(mergeOperations)
	{
		var editor = this.getEditor();
		this.setMergingDests(null);
		var originOpers = mergeOperations || this.getMergeOperationsInManipulating();
		var opers = Kekule.ArrayUtils.toUnique(originOpers);
		//var opers = Kekule.ArrayUtils.toUnique(mergeOperations || this.getMergeOperations());
		if (!opers || !opers.length)
			;  // do nothing
		else
		{
			editor.beginUpdateObject();
			try
			{
				for (var i = opers.length - 1; i >= 0; --i)
				{
					if (opers[i])
					{
						//console.log('reverse at', i, opers.length);
						opers[i].reverse();
						//delete opers[i];
					}
				}
				//this._mergeReversed = true;
				//this.setMergeOperations([]);
				//console.log('reverse merge oper', opers);
				//this.getMergeOperations().length = utilIndex;
				originOpers.length = 0;
				this._mergeJustReversed = true;   // a special flag
				//console.log('reverse', this.getManipulateObjs());
				this.refreshManipulateObjs();
			}
			finally
			{
				editor.endUpdateObject();
			}
		}
	},

	/** @private */
	react_pointermove: function($super, e)
	{
		// check if ALT key is pressed, if so, constrained move/rotate mode should be disabled
		this._suppressConstrainedMoving = e.getAltKey();
		this._suppressConstrainedRotating = e.getAltKey();
		this._isInDirectedMoving = e.getShiftKey();
		return $super(e);
	}
});
// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.BasicMolManipulationIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * IA Controller to select and manipulate objects in editor.
 * @class
 * @augments Kekule.Editor.BasicMolManipulationIaController
 */
Kekule.Editor.SelectIaController = Class.create(Kekule.Editor.BasicMolManipulationIaController,
/** @lends Kekule.Editor.SelectIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.SelectIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setEnableSelect(true);
		this.setEnableGestureManipulation(true);
	}
});
// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.SelectIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Base IA Controller to insert structure objects (bonds, structure fragments...) into editor.
 * @class
 * @augments Kekule.Editor.BasicMolManipulationIaController
 */
Kekule.Editor.StructureInsertIaController = Class.create(Kekule.Editor.BasicMolManipulationIaController,
/** @lends Kekule.Editor.StructureInsertIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.StructureInsertIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this._manipulatedBasicObjs = null;  // used internally
	},
	/**
	 * Returns newly inserted objects to editor.
	 * Descendants may override this method.
	 * @private
	 */
	getInsertedObjs: function()
	{
		return this._manipulatedBasicObjs;
	},
	/** @ignore */
	doSetManipulateOriginObjs: function($super, objs)
	{
		this._manipulatedBasicObjs = this._getManipulatedBasicObjects(objs);
		return $super(objs);
	},
	/** @private */
	_getManipulatedBasicObjects: function(manipulatingObjs)
	{
		var result = [];
		for (var i = 0, l = manipulatingObjs.length; i &lt; l; ++i)
		{
			var obj = manipulatingObjs[i];
			if (obj instanceof Kekule.ChemStructureObject)
			{
				if (obj instanceof Kekule.StructureFragment &amp;&amp; obj.isExpanded())
				{
					var children = [].concat(obj.getNodes()).concat(obj.getConnectors());
					AU.pushUnique(result, children);
				}
				else
					AU.pushUnique(result, obj);
			}
			else
				AU.pushUniqueEx(result, obj);
		}
		return result;
	},
	/** @ignore */
	stopManipulate: function($super)
	{
		if (this.getEditorConfigs().getInteractionConfigs().getAutoSelectNewlyInsertedObjects())
		{
			var basicObjs = this.getInsertedObjs();
			this.doneInsertOrModifyBasicObjects(basicObjs);
			//console.log(basicObjs.length, filteredObjs.length);
		}
		return $super();
	}
});

/**
 * Controller to add bond or change bond property.
 * @class
 * @augments Kekule.Editor.StructureInsertIaController
 *
 * @property {Bool} allowBondingToBond Whether bond-bond connection (e.g., in Zeise salt) is allowed.
 * @property {Bool} enableBondModification Whether modification existing bond is enabled.
 * @property {Bool} autoSwitchBondOrder If true, click on bond will switch bond order between single, double and triple.
 * @property {Kekule.ChemStructureObject} startingObj
 * @property {Kekule.ChemStructureObject} endingObj
 * @property {String} bondType
 * @property {Int} bondOrder
 * @property {Int} bondStereo
 * //@property {Bool} autoCreateNewStructFragment Whether a new molecule is created when a bond appointed to a blank space in editor.
 */
Kekule.Editor.MolBondIaController = Class.create(Kekule.Editor.StructureInsertIaController,
/** @lends Kekule.Editor.MolBondIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.MolBondIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setState(BC.State.INITIAL);
		this.setBondOrder(Kekule.BondOrder.SINGLE);  // default is single bond
		this.setAllowBondingToBond(false);
		this.setEnableBondModification(true);
		this.setEnableSelect(false);
		this.setEnableMove(true);
		//this.setEnableRemove(false);
		this.setAutoSwitchBondOrder(false);
		this.setEnableNeighborNodeMerge(false);
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('allowBondingToBond', {'dataType': DataType.BOOL, 'serializable': false});
		this.defineProp('state', {'dataType': DataType.INT, 'serializable': false});
		this.defineProp('enableBondModification', {'dataType': DataType.BOOL, 'serializable': false});
		this.defineProp('autoSwitchBondOrder', {'dataType': DataType.BOOL, 'serializable': false});

		this.defineProp('startingObj', {'dataType': 'Kekule.ChemStructureObject', 'serializable': false});
		this.defineProp('endingObj', {'dataType': 'Kekule.ChemStructureObject', 'serializable': false});
		this.defineProp('structFragment', {'dataType': 'Kekule.ChemStructureFragment', 'serializable': false});
		this.defineProp('autoCreatedStructFragment', {'dataType': 'Kekule.StructureFragment', 'serializable': false});
		this.defineProp('autoCreatedStartingObj', {'dataType': 'Kekule.ChemStructureObject', 'serializable': false});
		this.defineProp('bond', {'dataType': 'Kekule.Bond', 'serializable': false});
		this.defineProp('bondType', {'dataType': DataType.STRING, 'serializable': false});
		this.defineProp('bondOrder', {'dataType': DataType.INT, 'serializable': false});
		this.defineProp('bondStereo', {'dataType': DataType.INT, 'serializable': false});
		//this.defineProp('autoCreateNewStructFragment', {'dataType': DataType.BOOL});
		this.defineProp('initialBondDirection', {'dataType': DataType.FLOAT});
	},

	/** @private */
	_isBondDifferent: function(bond)
	{
		var stereo = this.getBondStereo();
		var BS = Kekule.BondStereo;
		if (stereo === BS.UP || stereo === BS.UP_INVERTED
			|| stereo === BS.DOWN || stereo === BS.DOWN_INVERTED)  // can swith between normal and inverted
			return true;
		else
			return (bond.getBondType() !== this.getBondType())
				|| (bond.getBondOrder() !== this.getBondOrder())
				|| (bond.getStereo() !== this.getBondStereo());
	},

	/** @private */
	canInteractWithObj: function($super, obj)
	{
		var state = this.getState();
		//console.log(state, BC.State.INITIAL);
		if (state === BC.State.INITIAL)
		{
			if (obj instanceof Kekule.ChemStructureNode)
				return true;
			else if (obj instanceof Kekule.ChemStructureConnector)
			{
				if (this.getAllowBondingToBond())
					return true;
				else if (this.getEnableBondModification())
				{
					if (obj instanceof Kekule.Bond)
					{
						/*
						//console.log(obj.getBondOrder(), this.getBondOrder());
						return this.getAutoSwitchBondOrder()
							|| (obj.getBondOrder() !== this.getBondOrder());
						*/
						return this._isBondDifferent(obj);
					}
				}
				else return false;
			}
		}
		else
			return $super(obj);
	},

	/** @ignore */
	doTestMouseCursor: function(coord, e)
	{
			return '';  // do not change mouse cursor
	},

	/** @ignore */
	getInsertedObjs: function($super)
	{
		var bond = this.getBond();
		return bond? [bond]: $super();
	},

	/**
	 * Check if a object can be a valid starting or ending point of bond.
	 * @private
	 */
	isObjValidBondTerminator: function(obj)
	{
		if (!obj)
			return false;
		if (!this.getAllowBondingToBond())  // allow only node to be a starting/ending point
			return (obj instanceof Kekule.ChemStructureNode);
		else  // allow bond-bond connection, every object can be a starting/ending point
			return ((obj instanceof Kekule.ChemStructureNode) || (obj instanceof Kekule.ChemStructureConnector));
	},
	/**
	 * Check if an object is a modifiable bond.
	 * @param {Object} obj
	 */
	isBond: function(obj)
	{
		return (obj instanceof Kekule.Bond);
	},

	/** @private */
	getNewBondDefAngle: function(startObj, newBondOrder)
	{
		var structConfig = this.getEditorConfigs().getStructureConfigs();
		/*
		var result;
		var surroundingObjs = Kekule.Editor.StructureUtils.getSurroundingObjs(startObj);
		if (surroundingObjs.length === 1)  // one existing bond, defAngle is decided by new bond order and existing bond order
		{
			var existingConnector = startObj.getLinkedConnectorAt(0);
			if (existingConnector &amp;&amp; (existingConnector.getConnectedObjs().indexOf(surroundingObjs[0]) >= 0))
			{
				var existingBondOrder = existingConnector.getBondOrder? existingConnector.getBondOrder(): null;
				if (Kekule.ObjUtils.notUnset(existingBondOrder))
					result = structConfig.getDefAngleOfBonds(newBondOrder, existingBondOrder);
				//result = Math.max(result, structConfig.getDefAngleOfBond(existingBondOrder));
			}
		}
		else if (surroundingObjs.length === 0)  // no connected bond, use initialDirection
			result = structConfig.getInitialBondDirection();
		else
			result = structConfig.getDefAngleOfBonds(newBondOrder, 0);
		return result;
		*/
		return structConfig.getNewBondDefAngle(startObj, newBondOrder);
	},

	/** @private */
	addDefBond: function(startCoord, startObj, notifyEditor)
	{
		var result;
		var editor = this.getEditor();
		editor.beginUpdateObject();
		try
		{
			if (!startObj)  // add bond from blank, create new node or growing existing blank molecule
			{
				//if (!this.getEditor().getAutoCreateNewStructFragment())
				if (!this.getEditor().canAddUnconnectedStructFragment())
					return null;
				var objCoord = this.getEditor().screenCoordToObj(startCoord);
				var baseMol = this.getEditor().getOnlyOneBlankStructFragment();
				if (!baseMol)  // totally blank space
				{
					startObj = this.getEditor().createNewStructFragmentAndStartingAtom(null, objCoord);
					this.setAutoCreatedStartingObj(null);
					this.setAutoCreatedStructFragment(startObj? startObj.getParent(): null);
				}
				else  // create on base Mol
				{
				  startObj = this.getEditor().createStructStartingAtom(baseMol, null, objCoord);
					this.setAutoCreatedStructFragment(null);
					this.setAutoCreatedStartingObj(startObj);
				}
			}
			else
			{
				this.setAutoCreatedStartingObj(null);
				this.setAutoCreatedStructFragment(null);
			}

			if (this.isObjValidBondTerminator(startObj))
			{
				var editor = this.getEditor();
				// set starting point
				this.setStartingObj(startObj);
				var parent = startObj.getParent();
				this.setStructFragment(parent); // IMPORTANT, save current parent, as molecule may be merged during operation
				var structConfigs = this.getEditorConfigs().getStructureConfigs();
				// add a bond at preferred position
				var bondType = Kekule.oneOf(this.getBondType(), structConfigs.getDefBondType());
				var bondOrder = Kekule.oneOf(this.getBondOrder(), structConfigs.getDefBondOrder());
				var bondStereo = Kekule.oneOf(this.getBondStereo(), Kekule.BondStereo.NONE);
				//var bondLength = this.getEditor().getDefBondLength();
				var bondLength = editor.getDefBondLength? editor.getDefBondLength(): structConfigs.getDefBondLength();
				var defbondAngle = this.getNewBondDefAngle(startObj, bondOrder);  //structConfigs.getDefAngleOfBond(bondOrder);
				var endCoord = Kekule.Editor.StructureUtils.calcPreferred2DBondGrowingLocation(startObj, bondLength, defbondAngle, this.getEditor().getAllowCoordBorrow());
				//console.log('add bond', bondLength, startCoord, objCoord, endCoord);
				// create a node and a new bond
				var node = this.getEditor().createDefaultNode(endCoord, Kekule.Editor.CoordSys.OBJ, parent);
				//parent.appendNode(node);
				this.setEndingObj(node);

				var bond = new Kekule.Bond();
				bond.setBondType(bondType);
				bond.setBondOrder(bondOrder);
				bond.setStereo(bondStereo);
				parent.appendConnector(bond);
				bond.appendConnectedObj(startObj);
				bond.appendConnectedObj(node);
				this.setBond(bond);

				if (notifyEditor)
				{
					this.getEditor().objectsChanged([{'obj': bond}, {'obj': node}]);
				}
				result = endCoord;
			}
			else
				result = null;
		}
		finally
		{
			editor.endUpdateObject();
		}
		return result;
	},

	/** @private */
	addOperationToEditor: function($super)
	{
		/*
		if (this.getAllManipulateObjsMerged())
			return null;
		else
		*/
		return $super();
	},
	/** @ignore */
	getAllObjOperations: function($super, isTheFinalOperationToEditor)
	{
		var result = $super(isTheFinalOperationToEditor) || [];
		var op = this.getAddBondOperation();
		if (op)
			result.unshift(op);
		return result;
	},

	/** @private */
	getAddBondOperation: function()
	{
		var group = new Kekule.MacroOperation();
		// new add node / bond operation
		var editor = this.getEditor();
		var mol = this.getAutoCreatedStructFragment();
		if (mol)
		{
			var addMolOperation = new Kekule.ChemObjOperation.Add(mol, this.getEditor().getChemObj(), null, this.getEditor());
			group.add(addMolOperation);
		}
		var startObj = this.getStartingObj();
		var endObj = this.getEndingObj();
		var bond = this.getBond();
		//var parent = startObj.getParent();
		var parent = this.getStructFragment();
		var editor = this.getEditor();

		var node = this.getAutoCreatedStartingObj();
		if (node)
		{
			var addNodeOperation = new Kekule.ChemStructOperation.AddNode(node, parent, null, editor);
			group.add(addNodeOperation);
		}

		var addNodeOperation = new Kekule.ChemStructOperation.AddNode(endObj, parent, null, editor);
		group.add(addNodeOperation);
		var addConnectorOperation = new Kekule.ChemStructOperation.AddConnector(bond, parent, null, [startObj, endObj], editor);
		group.add(addConnectorOperation);

		return group;
	},
	/* @private */
	/*
	wrapAddBondOperation: function()
	{
		if (this.getAllManipulateObjsMerged())  // bond been merged into old molecule, do not need to add operation
		{
			return null;
		}

		var moveOperation = this.getActiveOperation();  // move operation
		var group = new Kekule.MacroOperation();

		// new add node / bond operation
		var editor = this.getEditor();
		var mol = this.getAutoCreatedStructFragment();
		if (mol)
		{
			var addMolOperation = new Kekule.ChemObjOperation.Add(mol, this.getEditor().getChemObj(), null);
			group.add(addMolOperation);
		}
		var startObj = this.getStartingObj();
		var endObj = this.getEndingObj();
		var bond = this.getBond();
		//var parent = startObj.getParent();
		var parent = this.getStructFragment();
		var addNodeOperation = new Kekule.ChemStructOperation.AddNode(endObj, parent);
		group.add(addNodeOperation);
		var addConnectorOperation = new Kekule.ChemStructOperation.AddConnector(bond, parent, null, [startObj, endObj]);
		group.add(addConnectorOperation);

		if (moveOperation)
			group.add(moveOperation);
		//this.setActiveOperation(group);

		return group;
	},
	*/

	/**
	 * Change property of an existing bond
	 * @param {Kekule.Bond} bond
	 */
	modifyBond: function(bond)
	{
		var bondType = this.getBondType();
		// change bond order
		var bondOrder;
		var BO = Kekule.BondOrder;
		var loopBondOrders = [BO.SINGLE, BO.DOUBLE, BO.TRIPLE];
		if (this.getAutoSwitchBondOrder() &amp;&amp; (bondType === Kekule.BondType.COVALENT) &amp;&amp; (bond.getBondType === Kekule.BondType.COVALENT))
		{
			var oldOrder = bond.getBondOrder();
			var index = loopBondOrders.indexOf(oldOrder);
			if (index >= 0)
			{
				index = (++index) % loopBondOrders.length;
			}
			else
				index = 0;
			bondOrder = loopBondOrders[index];
		}
		else
			bondOrder = this.getBondOrder();

		var oldBondStereo = bond.getStereo();
		var bondStereo = this.getBondStereo();
		if (oldBondStereo === bondStereo) // need switch between normal and inv
		{
			bondStereo = Kekule.BondStereo.getInvertedDirection(bondStereo);
			//console.log('inv stereo', oldBondStereo, bondStereo);
		}

		var newPropValues = {'bondType': bondType, 'bondOrder': bondOrder, 'stereo': bondStereo};
		var needModify = false;
		for (var prop in newPropValues)  // check if bond is really need to be changed
		{
			var oldValue = bond.getPropValue(prop);
			if (oldValue !== newPropValues[prop])  // need change
			{
				needModify = true;
				break;
			}
		}

		if (needModify)
		{
			var editor = this.getEditor();
			editor.beginUpdateObject();
			try
			{
				// create operation
				//var oper = new Kekule.EditorOperation.OpModifyConnector(this.getEditor(), bond.getParent(), bond, newPropValues);
				var oper = new Kekule.ChemObjOperation.Modify(bond, newPropValues, this.getEditor());
				oper.execute();
				editor.pushOperation(oper);
				// notify editor, the connected objecs should be redrawn too
				var changedObjs = [bond].concat(bond.getConnectedObjs());
				var changedDetails = [];
				for (var i = 0, l = changedObjs.length; i &lt; l; ++i)
					changedDetails.push({'obj':changedObjs[i]});
				this.getEditor().objectsChanged(changedDetails);
			}
			finally
			{
				editor.endUpdateObject();
			}
		}
	},

	/** @private */
	react_pointerdown: function(e)
	{
		if (e.getButton() === Kekule.X.Event.MOUSE_BTN_LEFT)
		{
			var S = BC.State;
			var coord = this._getEventMouseCoord(e);
			var state = this.getState();
			if (state === S.INITIAL)
			{
				var boundItem = this.getEditor().getTopmostBoundInfoAtCoord(coord, null, this.getCurrBoundInflation());
				if (boundItem)
				{
					var obj = boundItem.obj;
					if (this.isObjValidBondTerminator(obj))
					{
						var endCoord = this.addDefBond(coord, obj, true);
						//endCoord = this.getEditor().objCoordToContext(endCoord);
						//console.log('add bond end with', endCoord, coord);
						if (endCoord)  // add bond success
						{
							// then manipulate the bond
							this.startDirectManipulate(null, this.getEndingObj(), coord);
							this.moveManipulatedObjs(coord);  // force a "move" action, to apply possible merge
						}
						return true; // important
					}
					else if (this.isBond(obj) &amp;&amp; this.getEnableBondModification())  // change bond property
					{
						this.modifyBond(obj);
						return true;
					}
					e.preventDefault();
				}
				else if (this.getEditor().canAddUnconnectedStructFragment()) // click on a blank area, add new molecule if needed
				{
					/*
					var objCoord = this.getEditor().screenCoordToObj(coord);
					var startNode = this.getEditor().createNewStructFragmentAndStartingAtom(null, objCoord);
					if (startNode &amp;&amp; this.isObjValidBondTerminator(startNode))
					{
						var endCoord = this.addDefBond(startNode, true);
						//endCoord = this.getEditor().objCoordToContext(endCoord);
						//console.log('add bond end with', endCoord, coord);
						// then manipulate the bond
						this.startDirectManipulate(this.getEndingObj(), coord);
						return true; // important
					}
					*/
					var endCoord = this.addDefBond(coord, null, true);
					if (endCoord)  // add successfully
					{
						//this.setManipulateOriginObjs(obj);
						this.startDirectManipulate(null, this.getEndingObj(), coord);
						this.moveManipulatedObjs(coord);  // force a "move" action, to apply possible merge
					}
					e.preventDefault();
					return true; // important
				}
			}
		}
	},
	/** @private */
	react_pointerup: function($super, e)
	{
		var state = this.getState();
		var startCoord = this.getStartCoord();
		var endCoord = this._getEventMouseCoord(e);
		var S = Kekule.Editor.BasicManipulationIaController.State;
		if ((state === S.MANIPULATING) &amp;&amp; (e.getButton() === Kekule.X.Event.MOUSE_BTN_LEFT))
		{
			e.preventDefault();
			if (Kekule.CoordUtils.isEqual(startCoord, endCoord))  // click
			{
				// wrap up, add bond and append operation
				this.addOperationToEditor();
				this.stopManipulate();
				this.setState(S.NORMAL);
				return true;
			}
		}

		return $super(e);  // finish move operation first;
	}
});

/**
 * Enumeration of state of a {@link Kekule.Editor.MolBondIaController}.
 * Currently not used.
 * @class
 */
Kekule.Editor.MolBondIaController.State = {
	/** Normal state. */
	INITIAL: 0,
	/** A starting node is set. */
	START_NODE_SET: 21,
	/** Starting node set and is now adjust bond direction and ending node */
	ADJUSTING: 22
};

var BC = Kekule.Editor.MolBondIaController;

// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.MolBondIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Controller to set atom property.
 * @class
 * @augments Kekule.Editor.BaseEditorIaController
 */
Kekule.Editor.MolAtomIaController_OLD = Class.create(Kekule.Editor.BaseEditorIaController,
/** @lends Kekule.Editor.MolAtomIaController_OLD# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.MolAtomIaController_OLD',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this._createNonAtomLabelInfos();
		this._setterShown = false;  // user internally
	},
	finalize: function($super)
	{
		if (this.getAtomSetter())
			this.getAtomSetter().finalize();
		$super();
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('currAtom', {'dataType': DataType.OBJECT, 'serializable': false});  // private
		this.defineProp('atomSetter', {'dataType': DataType.OBJECT, 'serializable': false});  // private
		this.defineProp('periodicTable', {'dataType': DataType.OBJECT, 'serializable': false});  // private
		this.defineProp('periodicTableDialog', {'dataType': DataType.OBJECT, 'serializable': false});  // private
		this.defineProp('nonAtomLabelInfos', {'dataType': DataType.ARRAY, 'serializable': false});  // private
	},

	/** @private */
	canInteractWithObj: function($super, obj)
	{
		if (this.isValidNode(obj))
			return true;
		else
			return false;
	},

	/**
	 * Check if obj is a valid chem node and can be edited.
	 * @param {Kekule.ChemObject} obj
	 * @returns {Bool}
	 * @private
	 */
	isValidNode: function(obj)
	{
		return obj instanceof Kekule.ChemStructureNode;
	},

	/**
	 * Returns label that shows in node edit.
	 * @param {Kekule.ChemStructureNode} node
	 * @returns {String}
	 * @private
	 */
	getNodeLabel: function(node)
	{
		var editor = this.getEditor();
		var labelConfigs = editor.getRenderConfigs().getDisplayLabelConfigs();
		if (node.getIsotopeId)  // atom
			return node.getIsotopeId();
		else if (node instanceof Kekule.SubGroup)
		{
			var groupLabel = node.getAbbr() || node.getFormulaText();
			return groupLabel || labelConfigs.getRgroup();
		}
		else if (node instanceof Kekule.VariableAtom)  // return 'L' rather than actual atom list to activate element table
		{
			var allowedIds = node.getAllowedIsotopeIds();
			var disallowedIds = node.getDisallowedIsotopeIds();
			return (allowedIds &amp;&amp; allowedIds.length)? this._getVarAtomListLabel():
					(disallowedIds &amp;&amp; disallowedIds.length)? this._getVarAtomNotListLabel():
					this._getVarAtomListLabel();
		}
		else
		{
			var ri = node.getCoreDisplayRichTextItem(null, null, labelConfigs);
			return Kekule.Render.RichTextUtils.toText(ri);
		}
	},

	/** @private */
	_getVarAtomListLabel: function()
	{
		var labelConfigs = this.getEditor().getRenderConfigs().getDisplayLabelConfigs();
		return labelConfigs.getVariableAtom();
	},
	_getVarAtomNotListLabel: function()
	{
		var labelConfigs = this.getEditor().getRenderConfigs().getDisplayLabelConfigs();
		return '~' + labelConfigs.getVariableAtom();
	},
	/** @private */
	_createNonAtomLabelInfos: function()
	{
		var result = [];
		var labelConfigs = this.getEditor().getRenderConfigs().getDisplayLabelConfigs();
		// R group
		result.push({
			'nodeLabel': labelConfigs.getRgroup(), 'nodeClass': Kekule.RGroup,
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_RGROUP') //Kekule.ChemWidgetTexts.CAPTION_RGROUP
		});
		// Kekule.Pseudoatom
		result.push({
			'nodeLabel': labelConfigs.getDummyAtom(), 'nodeClass': Kekule.Pseudoatom,
			'props': {'atomType': Kekule.PseudoatomType.DUMMY},
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_DUMMY_ATOM') //Kekule.ChemWidgetTexts.CAPTION_DUMMY_ATOM
		});
		result.push({
			'nodeLabel': labelConfigs.getHeteroAtom(), 'nodeClass': Kekule.Pseudoatom,
			'props': {'atomType': Kekule.PseudoatomType.HETERO},
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_HETERO_ATOM') //Kekule.ChemWidgetTexts.CAPTION_HETERO_ATOM
		});
		result.push({
			'nodeLabel': labelConfigs.getAnyAtom(), 'nodeClass': Kekule.Pseudoatom,
			'props': {'atomType': Kekule.PseudoatomType.ANY},
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_ANY_ATOM') //Kekule.ChemWidgetTexts.CAPTION_ANY_ATOM
		});
		// Kekule.VariableAtom List and Not List
		result.push({
			'nodeLabel': this._getVarAtomListLabel(), 'nodeClass': Kekule.VariableAtom,
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_VARIABLE_ATOM') //Kekule.ChemWidgetTexts.CAPTION_VARIABLE_ATOM
		});
		result.push({
			'nodeLabel': this._getVarAtomNotListLabel(), 'nodeClass': Kekule.VariableAtom,
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_VARIABLE_NOT_ATOM') //Kekule.ChemWidgetTexts.CAPTION_VARIABLE_NOT_ATOM
		});
		this.setNonAtomLabelInfos(result);
		return result;
	},
	/** @private */
	_indexOfNonAtomLabel: function(nodeLabel)
	{
		var infos = this.getNonAtomLabelInfos();
		for (var i = 0, l = infos.length; i &lt; l; ++i)
		{
			var info = infos[i];
			if (info.nodeLabel === nodeLabel)
				return i;
		}
		return -1;
	},
	/** @private */
	_getNonAtomInfo: function(nodeLabel)
	{
		var index = this._indexOfNonAtomLabel(nodeLabel);
		return (index &lt; 0)? null: this.getNonAtomLabelInfos()[index];
	},

	/** @private */
	getAtomSetterWidget: function(canCreate)
	{
		var result = this.getAtomSetter();
		if (!result &amp;&amp; canCreate)  // create new one
		{
			var parentElem = this.getEditor().getCoreElement();
			var doc = parentElem.ownerDocument;
			result = this._createAtomSetterWidget(doc, parentElem);
			this.setAtomSetter(result);
		}
		return result;
	},
	/** @private */
	_createAtomSetterWidget: function(doc, parentElem)
	{
		var result = new Kekule.Widget.ComboBox(doc);
		var listAtoms = this.getEditor().getEditorConfigs().getStructureConfigs().getPrimaryOrgChemAtoms();
		var listItems = [];
		// add ususal atoms
		for (var i = 0, l = listAtoms.length; i &lt; l; ++i)
		{
			listItems.push({'value': listAtoms[i], 'data': {'props': {'isotopeId': listAtoms[i]}}});
		}
		// add "open periodic table" option
		listItems.push({'value': Kekule.$L('ChemWidgetTexts.CAPTION_ATOMLIST_PERIODIC_TABLE') /*CWT.CAPTION_ATOMLIST_PERIODIC_TABLE*/});
		// non-atom nodes
		var nonAtomLabelInfos = this.getNonAtomLabelInfos();
		for (var i = 0, l = nonAtomLabelInfos.length; i &lt; l; ++i)
		{
			var info = nonAtomLabelInfos[i];
			var listItem = {'value': info.nodeLabel, 'data': {'props': info.props}};
			if (info.description)
				listItem.text = info.nodeLabel + ' - ' + info.description;
			listItems.push(listItem);
		}
		result.setItems(listItems);
		result.appendToElem(parentElem);

		// event handler
		var self = this;
		result.addEventListener('keyup', function(e)
			{
				var ev = e.htmlEvent;
				if (ev.getKeyCode() === Kekule.X.Event.KeyCode.ENTER)
				{
					self.applySetter(result);
					result.dismiss();  // avoid call apply setter twice
				}
			}
		);
		result.addEventListener('valueSelect', function(e)
			{
				self.applySetter(result);
				result.dismiss();  // avoid call apply setter twice
			}
		);
		result.addEventListener('showStateChange', function(e)
			{
	      if (!e.isShown &amp;&amp; !e.isDismissed)  // widget hidden, feedback the edited value
				{
					if (self.getAtomSetter() &amp;&amp; self.getAtomSetter().isShown())
						self.applySetter(result);
				}
			}
		);

		return result;
	},

	/** @private */
	getPeriodicTableDialogWidget: function(canCreate)
	{
		var result = this.getPeriodicTableDialog();
		if (!result &amp;&amp; canCreate)  // create new one
		{
			var parentElem = this.getEditor().getCoreElement();
			var doc = parentElem.ownerDocument;
			result = this._createPeriodicTableDialogWidget(doc, parentElem);
			this.setPeriodicTableDialog(result);
		}
		//console.log(result);
		return result;
	},
	/** @private */
	_createPeriodicTableDialogWidget: function(doc, parentElem)
	{
		var dialog = new Kekule.Widget.Dialog(doc, Kekule.$L('ChemWidgetTexts.CAPTION_PERIODIC_TABLE_DIALOG') /*CWT.CAPTION_PERIODIC_TABLE_DIALOG*/,
			[Kekule.Widget.DialogButtons.OK, Kekule.Widget.DialogButtons.CANCEL]
		);
		var table = new Kekule.ChemWidget.PeriodicTable(doc);
		table.setUseMiniMode(true);
		table.setEnableSelect(true);
		table.appendToElem(dialog.getClientElem());
		this.setPeriodicTable(table);
		return dialog;
	},

	/**
	 * Open atom edit box for obj in coord.
	 * @param {Hash} coord
	 * @param {Object} obj
	 */
	openSetterUi: function(coord, obj)
	{
		var oldSetter = this.getAtomSetter();
		/*
		if (oldSetter &amp;&amp; oldSetter.isShown())  // has a old setter
		{
			this.applySetter(oldSetter, this.getCurrAtom());
		}
		*/

		if (!this.isValidNode(obj))
			return;
		this.setCurrAtom(obj);

		var fontSize = this.getEditor().getEditorConfigs().getInteractionConfigs().getAtomSetterFontSize() || 0;
		var posAdjust = fontSize / 1.5;  // adjust position to align to atom center
		var slabel = this.getNodeLabel(obj);
		var setter = this.getAtomSetterWidget(true);
		setter.setValue(slabel);
		setter.setIsDirty(false);
		//setter.setIsPopup(true);
		var style = setter.getElement().style;
		style.position = 'absolute';
		style.fontSize = fontSize;
		style.left = (coord.x - posAdjust) + 'px';
		style.top = (coord.y - posAdjust) + 'px';
		/*
		 style.marginTop = -posAdjust + 'px';
		 style.marginLeft = -posAdjust + 'px';
		 */
		//setter.show();
		setter._applied = false;
		setter.show(null, null, Kekule.Widget.ShowHideType.POPUP);

		(function(){
			setter.focus();
			setter.selectAll();
		}).defer();
		//result.selectAll.bind(result).defer();
		/*
		setter.selectAll();
		setter.focus();
		*/
	},
	/** @private */
	applySetter: function(setter, atom)
	{
		if (setter._applied)  // avoid called twice
			return;
		if (!setter.getIsDirty())  // setter not modified
			return;
		if (!atom)
			atom = this.getCurrAtom();
		var nodeClass;
		var modifiedProps = null;
		//var isNonAtom = false;
		var text = setter.getValue();
		//console.log('value', text);

		// check if setter list need to raise other widget
		var periodicTableDialog;
		if (text === Kekule.$L('ChemWidgetTexts.CAPTION_ATOMLIST_PERIODIC_TABLE')/*CWT.CAPTION_ATOMLIST_PERIODIC_TABLE*/)  // open periodic table to select atom
		{
			var periodicTableDialog = this.getPeriodicTableDialogWidget(true);
			periodicTableDialog.setCaption(/*CWT.CAPTION_PERIODIC_TABLE_DIALOG_SEL_ELEM*/Kekule.$L('ChemWidgetTexts.CAPTION_PERIODIC_TABLE_DIALOG_SEL_ELEM'));
			var currSymbol = atom.getSymbol? atom.getSymbol(): null;
			this.getPeriodicTable().setEnableSelect(true).setEnableMultiSelect(false).setSelectedSymbol(currSymbol);
		}
		else if (text === this._getVarAtomListLabel() || text === this._getVarAtomNotListLabel())  // select list of atoms
		{
			var notList = text === this._getVarAtomNotListLabel();
			var periodicTableDialog = this.getPeriodicTableDialogWidget(true);
			periodicTableDialog.setCaption(/*CWT.CAPTION_PERIODIC_TABLE_DIALOG_SEL_ELEMS*/Kekule.$L('ChemWidgetTexts.CAPTION_PERIODIC_TABLE_DIALOG_SEL_ELEM'));
			var allowedSymbols = atom.getAllowedIsotopeIds? atom.getAllowedIsotopeIds(): null;
			var disallowedSymbols = atom.getDisallowedIsotopeIds? atom.getDisallowedIsotopeIds(): null;
			this.getPeriodicTable().setEnableSelect(true).setEnableMultiSelect(true)
				.setSelectedSymbols(notList? disallowedSymbols: allowedSymbols);
		}

		if (periodicTableDialog)
		{
			var self = this;
			periodicTableDialog.openModal(function(result)
				{
					if (result === Kekule.Widget.DialogButtons.OK)
					{
						var nodeClass;
						var modifiedProps;
						if (text === Kekule.$L('ChemWidgetTexts.CAPTION_ATOMLIST_PERIODIC_TABLE')/*CWT.CAPTION_ATOMLIST_PERIODIC_TABLE*/)  // select single atom
						{
							var symbol = self.getPeriodicTable().getSelectedSymbol();
							nodeClass = Kekule.Atom;
							modifiedProps = {'isotopeId': symbol};
						}
						if (text === self._getVarAtomListLabel())
						{
							var symbols = self.getPeriodicTable().getSelectedSymbols();
							nodeClass = Kekule.VariableAtom;
							modifiedProps = {'allowedIsotopeIds': symbols, 'disallowedIsotopeIds': null};
						}
						if (text === self._getVarAtomNotListLabel())
						{
							var symbols = self.getPeriodicTable().getSelectedSymbols();
							nodeClass = Kekule.VariableAtom;
							modifiedProps = {'allowedIsotopeIds': null, 'disallowedIsotopeIds': symbols};
						}
						self.applyModification(atom, null, nodeClass, modifiedProps);
					}
				}, this
			);
			return;
		}

		var newNode = null;
		var nonAtomInfo = this._getNonAtomInfo(text);
		if (nonAtomInfo)  // is not an atom
		{
			nodeClass = nonAtomInfo.nodeClass;
			modifiedProps = nonAtomInfo.props;
			//isNonAtom = true;
		}
		else
		{
			// check if it is predefined subgroups first
			var subGroupRepositoryItem = Kekule.Editor.StoredSubgroupRepositoryItem2D.getRepItemOfInputText(text);
			if (subGroupRepositoryItem)  // add subgroup
			{
				var repResult = subGroupRepositoryItem.createObjects(atom) || {};
				var repObjects = repResult.objects;
				var transformParams = Kekule.Editor.RepositoryStructureUtils.calcRepObjInitialTransformParams(this.getEditor(), subGroupRepositoryItem, repResult, atom, null);
				this.getEditor().transformCoordAndSizeOfObjects(repObjects, transformParams);
				newNode = repObjects[0];
				nodeClass = newNode.getClass();
			}
			else  // add normal node
			{
				nodeClass = Kekule.ChemStructureNodeFactory.getClassByLabel(text, null); // explicit set defaultClass parameter to null
				if (!nodeClass)
				{
					if (this.getEditorConfigs().getInteractionConfigs().getAllowUnknownAtomSymbol())
						nodeClass = Kekule.Pseudoatom;
				}
				modifiedProps = (nodeClass === Kekule.Atom) ? {'isotopeId': text} :
						(nodeClass === Kekule.Pseudoatom) ? {'symbol': text} :
						{};
			}
		}

		if (!nodeClass)
		{
			Kekule.error(Kekule.$L('ErrorMsg.INVALID_ATOM_SYMBOL'));
		}
		else
		{
			this.applyModification(atom, newNode, nodeClass, modifiedProps);
			setter._applied = true;
		}
	},

	/**
	 * Save changes to current edited node.
	 * @param node
	 * @param newNodeClass
	 * @param modifiedProps
	 * @private
	 */
	applyModification: function(node, newNode, newNodeClass, modifiedProps)
	{
		var newNode;
		var operGroup, oper;
		var oldNodeClass = node.getClass();
		if (newNode &amp;&amp; !newNodeClass)
			newNodeClass = newNode.getClass();
		if (newNode || newNodeClass !== oldNodeClass)  // need to replace node
		{
			operGroup = new Kekule.MacroOperation();
			if (!newNode)
				newNode = new newNodeClass();
			var tempNode = new Kekule.ChemStructureNode();
			tempNode.assign(node);
			newNode.assign(tempNode);  // copy some basic info of old node
			var operReplace = new Kekule.ChemStructOperation.ReplaceNode(node, newNode, null, this.getEditor());
			operGroup.add(operReplace);
		}
		else  // no need to replace
			newNode = node;

		if (modifiedProps)
		{
			oper = new Kekule.ChemObjOperation.Modify(newNode, modifiedProps, this.getEditor());
			if (operGroup)
				operGroup.add(oper);
		}

		var operation = operGroup || oper;
		if (operation)  // only execute when there is real modification
		{
			var editor = this.getEditor();
			editor.beginUpdateObject();
			try
			{
				operation.execute();
			}
			catch (e)
			{
				//Kekule.error(/*Kekule.ErrorMsg.NOT_A_VALID_ATOM*/Kekule.$L('ErrorMsg.NOT_A_VALID_ATOM'));
				throw(e);
			}
			finally
			{
				editor.endUpdateObject();
			}

			if (editor &amp;&amp; editor.getEnableOperHistory() &amp;&amp; operation)
			{
				editor.pushOperation(operation);
			}
		}
	},

	/** @private */
	react_pointerup: function(e)
	{
		if (e.getButton() === Kekule.X.Event.MOUSE_BTN_LEFT)
		{
			this.getEditor().setSelection(null);
			var coord = this._getEventMouseCoord(e);
			{
				var boundItem = this.getEditor().getTopmostBoundInfoAtCoord(coord, null, this.getCurrBoundInflation());
				if (boundItem)
				{
					var obj = boundItem.obj;
					if (this.isValidNode(obj))  // can modify atom of this object
					{
						var baseCoord = this.getEditor().getObjectScreenCoord(obj);
						e.preventDefault();
						e.stopPropagation();
						// important, prevent event bubble to document, otherwise reactDocumentClick will be evoked
						//  and the atom setter will be closed immediately.
						this.openSetterUi(baseCoord, obj);
						this.getEditor().setSelection([obj]);
					}
					return true;  // important
				}
			}
		}
	}
});

/**
 * Controller to set atom property.
 * @class
 * @augments Kekule.Editor.BaseEditorIaController
 */
Kekule.Editor.MolAtomIaController = Class.create(Kekule.Editor.BaseEditorIaController,
/** @lends Kekule.Editor.MolAtomIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.MolAtomIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this._createNonAtomLabelInfos();
		this._setterShown = false;  // user internally
	},
	finalize: function($super)
	{
		if (this.getAtomSetter())
			this.getAtomSetter().finalize();
		$super();
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('currAtom', {'dataType': DataType.OBJECT, 'serializable': false});  // private
		this.defineProp('atomSetter', {'dataType': DataType.OBJECT, 'serializable': false});  // private
		this.defineProp('nonAtomLabelInfos', {'dataType': DataType.ARRAY, 'serializable': false});  // private
	},

	/** @private */
	canInteractWithObj: function($super, obj)
	{
		if (this.isValidNode(obj))
			return true;
		else
			return false;
	},

	/**
	 * Check if obj is a valid chem node and can be edited.
	 * @param {Kekule.ChemObject} obj
	 * @returns {Bool}
	 * @private
	 */
	isValidNode: function(obj)
	{
		return (obj instanceof Kekule.ChemStructureNode) &amp;&amp; !(obj instanceof Kekule.StructureFragment &amp;&amp; obj.isStandalone());
	},

	/** @private */
	/*
	_getVarAtomListLabel: function()
	{
		var labelConfigs = this.getEditor().getRenderConfigs().getDisplayLabelConfigs();
		return labelConfigs? labelConfigs.getVariableAtom(): Kekule.ChemStructureNodeLabels.VARIABLE_ATOM;
	},
	_getVarAtomNotListLabel: function()
	{
		var labelConfigs = this.getEditor().getRenderConfigs().getDisplayLabelConfigs();
		return '~' + (labelConfigs? labelConfigs.getVariableAtom(): Kekule.ChemStructureNodeLabels.VARIABLE_ATOM);
	},
	*/
	/** @private */
	_createNonAtomLabelInfos: function()
	{
		/*
		var result = [];
		var labelConfigs = this.getEditor().getRenderConfigs().getDisplayLabelConfigs();
		// R group
		result.push({
			'text': labelConfigs.getRgroup(), 'nodeClass': Kekule.RGroup,
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_RGROUP') //Kekule.ChemWidgetTexts.CAPTION_RGROUP
		});
		// Kekule.Pseudoatom
		result.push({
			'text': labelConfigs.getDummyAtom(), 'nodeClass': Kekule.Pseudoatom,
			'props': {'atomType': Kekule.PseudoatomType.DUMMY},
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_DUMMY_ATOM') //Kekule.ChemWidgetTexts.CAPTION_DUMMY_ATOM
		});
		result.push({
			'text': labelConfigs.getHeteroAtom(), 'nodeClass': Kekule.Pseudoatom,
			'props': {'atomType': Kekule.PseudoatomType.HETERO},
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_HETERO_ATOM') //Kekule.ChemWidgetTexts.CAPTION_HETERO_ATOM
		});
		result.push({
			'text': labelConfigs.getAnyAtom(), 'nodeClass': Kekule.Pseudoatom,
			'props': {'atomType': Kekule.PseudoatomType.ANY},
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_ANY_ATOM') //Kekule.ChemWidgetTexts.CAPTION_ANY_ATOM
		});
		// Kekule.VariableAtom List and Not List
		result.push({
			'text': this._getVarAtomListLabel(), 'nodeClass': Kekule.VariableAtom, 'isVarList': true,
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_VARIABLE_ATOM') //Kekule.ChemWidgetTexts.CAPTION_VARIABLE_ATOM
		});
		result.push({
			'text': this._getVarAtomNotListLabel(), 'nodeClass': Kekule.VariableAtom, 'isVarNotList': true,
			'description': Kekule.$L('ChemWidgetTexts.CAPTION_VARIABLE_NOT_ATOM') //Kekule.ChemWidgetTexts.CAPTION_VARIABLE_NOT_ATOM
		});
    */
		var editor = this.getEditor();
		var result = editor &amp;&amp; editor.getEnabledNonAtomInputData &amp;&amp; editor.getEnabledNonAtomInputData();
		this.setNonAtomLabelInfos(result);
		return result;
	},
	/** @private */
	_indexOfNonAtomLabel: function(nodeLabel)
	{
		var infos = this.getNonAtomLabelInfos();
		for (var i = 0, l = infos.length; i &lt; l; ++i)
		{
			var info = infos[i];
			if (info.nodeLabel === nodeLabel)
				return i;
		}
		return -1;
	},
	/** @private */
	_getNonAtomInfo: function(nodeLabel)
	{
		var index = this._indexOfNonAtomLabel(nodeLabel);
		return (index &lt; 0)? null: this.getNonAtomLabelInfos()[index];
	},

	/** @private */
	getAtomSetterWidget: function(canCreate)
	{
		var result = this.getAtomSetter();
		if (!result &amp;&amp; canCreate)  // create new one
		{
			var parentElem = this.getEditor().getCoreElement();
			var doc = parentElem.ownerDocument;
			result = this._createAtomSetterWidget(doc, parentElem);
			this.setAtomSetter(result);
		}
		return result;
	},
	/** @private */
	_createAtomSetterWidget: function(doc, parentElem)
	{
		var result = new Kekule.ChemWidget.StructureNodeSetter(this.getEditor());
		result.setUseDropDownSelectPanel(true);
		result.addClassName(CCNS.CHEMEDITOR_ATOM_SETTER);

		var listAtoms = AU.clone(this.getEditor().getEditorConfigs().getStructureConfigs().getPrimaryOrgChemAtoms());
		listAtoms.push('...');  // add periodic table item
		//result.setSelectableElementSymbols(listAtoms);
		// non-atom nodes
		var nonAtomLabelInfos = this.getNonAtomLabelInfos();
		//result.setSelectableNonElementInfos(nonAtomLabelInfos);
		// subgroups
		//result.setSelectableSubGroupRepItems(Kekule.Editor.StoredSubgroupRepositoryItem2D.getAllRepItems());

		result.setSelectableInfos({
			'elementSymbols': listAtoms,
			'nonElementInfos': nonAtomLabelInfos,
			'subGroupRepItems': Kekule.Editor.StoredSubgroupRepositoryItem2D.getAllRepItems()
		});

		// react to value change of setter
		var self = this;
		result.addEventListener('keyup', function(e)
			{
				var ev = e.htmlEvent;
				if (ev.getKeyCode() === Kekule.X.Event.KeyCode.ENTER)
				{
					self.applySetter(result);
					result.dismiss();  // avoid call apply setter twice
				}
			}
		);

		result.addEventListener('valueSelect', function(e){
			//var data = e.value;
			//console.log(e.target, e.currentTarget);
			if (self.getAtomSetter() &amp;&amp; self.getAtomSetter().isShown())
			{
				self.applySetter(result);
				result.dismiss();  // avoid call apply setter twice
			}
		});

		result.addEventListener('showStateChange', function(e)
			{
				if (e.target === result &amp;&amp; !e.byDomChange)
				{
					//console.log('show state change', e);
					if (!e.isShown &amp;&amp; !e.isDismissed)  // widget hidden, feedback the edited value
					{
						if (self.getAtomSetter() &amp;&amp; self.getAtomSetter().isShown())
							self.applySetter(result);
					}
				}
			}
		);


		result.appendToElem(parentElem);

		return result;
	},

	/** @private */
	getPeriodicTableDialogWidget: function(canCreate)
	{
		var result = this.getPeriodicTableDialog();
		if (!result &amp;&amp; canCreate)  // create new one
		{
			var parentElem = this.getEditor().getCoreElement();
			var doc = parentElem.ownerDocument;
			result = this._createPeriodicTableDialogWidget(doc, parentElem);
			this.setPeriodicTableDialog(result);
		}
		//console.log(result);
		return result;
	},
	/** @private */
	_createPeriodicTableDialogWidget: function(doc, parentElem)
	{
		var dialog = new Kekule.Widget.Dialog(doc, Kekule.$L('ChemWidgetTexts.CAPTION_PERIODIC_TABLE_DIALOG') /*CWT.CAPTION_PERIODIC_TABLE_DIALOG*/,
			[Kekule.Widget.DialogButtons.OK, Kekule.Widget.DialogButtons.CANCEL]
		);
		var table = new Kekule.ChemWidget.PeriodicTable(doc);
		table.setUseMiniMode(true);
		table.setEnableSelect(true);
		table.appendToElem(dialog.getClientElem());
		this.setPeriodicTable(table);
		return dialog;
	},

	/**
	 * Open atom edit box for obj in coord.
	 * @param {Hash} coord
	 * @param {Object} obj
	 */
	openSetterUi: function(coord, obj)
	{
		var oldSetter = this.getAtomSetter();  // check if there is old already created setter
		if (oldSetter &amp;&amp; oldSetter.isShown())  // has a old setter
		{
			//this.applySetter(oldSetter, this.getCurrAtom());
			oldSetter.hide();
			// IMPORTANT: ensure the hide process done quickly
			// and the unprepare process of popup atom setter do not imfluence the prepare process of it
			oldSetter._haltPrevShowHideProcess();
		}

		if (!this.isValidNode(obj))
			return;
		this.setCurrAtom(obj);


		var fontSize = this.getEditor().getEditorConfigs().getInteractionConfigs().getAtomSetterFontSize() || 0;
		fontSize *= this.getEditor().getZoom() || 1;
		var posAdjust = fontSize / 1.5;  // adjust position to align to atom center
		var setter = this.getAtomSetterWidget(true);
		//setter.setEditor(this.getEditor());
		setter.setLabelConfigs(this.getEditor().getRenderConfigs().getDisplayLabelConfigs());
		setter.setNodes([obj]);
		var parentElem = this.getEditor().getCoreElement();
		setter.appendToElem(parentElem);  // ensure setter widget is a child of parentElem, since popup show may change the parent each time

		var inputBox = setter.getNodeInputBox();

		//setter.setIsDirty(false);
		//setter.setIsPopup(true);
		var style = setter.getElement().style;
		style.position = 'absolute';
		style.left = (coord.x - posAdjust) + 'px';
		style.top = (coord.y - posAdjust) + 'px';
		inputBox.getElement().style.fontSize = fontSize + 'px';
		/*
		 style.marginTop = -posAdjust + 'px';
		 style.marginLeft = -posAdjust + 'px';
		 */
		//setter.show();
		setter._applied = false;
		setter.show(null, null, Kekule.Widget.ShowHideType.POPUP);

		(function(){
			inputBox.focus();
			inputBox.selectAll();
		}).defer();

		//result.selectAll.bind(result).defer();
		/*
		setter.selectAll();
		setter.focus();
		*/
	},
	/** @private */
	applySetter: function(setter, atom)
	{
		if (setter._applied)  // avoid called twice
			return;
		if (!atom)
			atom = this.getCurrAtom();
		var newData = setter.getValue();
		if (!newData)
			return;

		//console.log('apply setter', newData);

		var nodeClass = newData.nodeClass;
		var modifiedProps = newData.props;
		var repItem = newData.repositoryItem;
		var newNode;

		if (repItem)  // need to apply structure repository item
		{
			var repResult = repItem.createObjects(atom) || {};
			var repObjects = repResult.objects;
			var transformParams = Kekule.Editor.RepositoryStructureUtils.calcRepObjInitialTransformParams(this.getEditor(), repItem, repResult, atom, null);
			this.getEditor().transformCoordAndSizeOfObjects(repObjects, transformParams);
			newNode = repObjects[0];
			nodeClass = newNode.getClass();
		}

		if (newData.isUnknownPseudoatom &amp;&amp; !this.getEditorConfigs().getInteractionConfigs().getAllowUnknownAtomSymbol())
			nodeClass = null;

		if (!nodeClass)
		{
			Kekule.error(Kekule.$L('ErrorMsg.INVALID_ATOM_SYMBOL'));
		}
		else
		{
			this.applyModification(atom, newNode, nodeClass, modifiedProps);
			setter._applied = true;
		}
	},

	/**
	 * Save changes to current edited node.
	 * @param node
	 * @param newNodeClass
	 * @param modifiedProps
	 * @private
	 */
	applyModification: function(node, newNode, newNodeClass, modifiedProps)
	{
		var newNode;
		var operGroup, oper;
		var oldNodeClass = node.getClass();
		if (newNode &amp;&amp; !newNodeClass)
			newNodeClass = newNode.getClass();
		if (newNode || newNodeClass !== oldNodeClass)  // need to replace node
		{
			operGroup = new Kekule.MacroOperation();
			if (!newNode)
				newNode = new newNodeClass();
			var tempNode = new Kekule.ChemStructureNode();
			tempNode.assign(node);
			newNode.assign(tempNode);  // copy some basic info of old node
			var operReplace = new Kekule.ChemStructOperation.ReplaceNode(node, newNode, null, this.getEditor());
			operGroup.add(operReplace);
		}
		else  // no need to replace
			newNode = node;

		if (modifiedProps)
		{
			oper = new Kekule.ChemObjOperation.Modify(newNode, modifiedProps, this.getEditor());
			if (operGroup)
				operGroup.add(oper);
		}

		var operation = operGroup || oper;
		if (operation)  // only execute when there is real modification
		{
			var editor = this.getEditor();
			editor.beginUpdateObject();
			try
			{
				operation.execute();
			}
			catch (e)
			{
				//Kekule.error(/*Kekule.ErrorMsg.NOT_A_VALID_ATOM*/Kekule.$L('ErrorMsg.NOT_A_VALID_ATOM'));
				throw(e);
			}
			finally
			{
				editor.endUpdateObject();
			}

			if (editor &amp;&amp; editor.getEnableOperHistory() &amp;&amp; operation)
			{
				editor.pushOperation(operation);
			}
		}
	},

	/** @private */
	react_pointerup: function(e)
	{
		if (e.getButton() === Kekule.X.Event.MOUSE_BTN_LEFT)
		{
			this.getEditor().setSelection(null);
			var coord = this._getEventMouseCoord(e);
			{
				var boundItem = this.getEditor().getTopmostBoundInfoAtCoord(coord, null, this.getCurrBoundInflation());
				if (boundItem)
				{
					var obj = boundItem.obj;
					if (this.isValidNode(obj))  // can modify atom of this object
					{
						var baseCoord = this.getEditor().getObjectScreenCoord(obj);
						e.preventDefault();
						e.stopPropagation();
						// important, prevent event bubble to document, otherwise reactDocumentClick will be evoked
						//  and the atom setter will be closed immediately.
						this.openSetterUi(baseCoord, obj);
						this.doneInsertOrModifyBasicObjects([obj]);
						//this.getEditor().setSelection([obj]);
					}
					return true;  // important
				}
			}
		}
	}
});

// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.MolAtomIaController, Kekule.Editor.ChemSpaceEditor);


/**
 * Controller to add repository structure fragments or other objects into chem space.
 * @class
 * @augments Kekule.Editor.StructureInsertIaController
 */
Kekule.Editor.RepositoryIaController = Class.create(Kekule.Editor.StructureInsertIaController,
/** @lends Kekule.Editor.RepositoryIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.RepositoryIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setEnableSelect(false);
		this._repObjStartingScreenCoord = null;
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('repositoryItem', {'dataType': 'Kekule.AbstractRepositoryItem', 'serializable': false});
		this.defineProp('addRepObjsOper', {'dataType': 'Kekule.MacroOperation', 'serializable': false});
		this.defineProp('initialTransformParams', {'dataType': DataType.HASH, 'serializable': false});
		this.defineProp('currRepositoryObjects', {'dataType': 'Kekule.ChemObject', 'serializable': false});
	},

	/** @ignore */
	doTestMouseCursor: function(coord, e)
	{
		// Overwrite parent BasicMolManipulationIaController,
		// Always show pointer cursor
		return '';
	},
	/** @private */
	canInteractWithObj: function($super, obj)
	{
		return $super(obj);
	},
	/**
	 * Returns if obj is a valid starting point of creating repository item.
	 * Descendants may override this method.
	 * @param obj
	 * @returns {boolean}
	 */
	isValidStartingObj: function(obj)
	{
		return true;
	},

	/** @private */
	calcInitialTransformParams: function(repItem, repResult, destObj, targetCoord)
	{
		return Kekule.Editor.RepositoryStructureUtils.calcRepObjInitialTransformParams(this.getEditor(), repItem, repResult, destObj, targetCoord);
	},

	/** @private */
	getRepObjCreationOptions: function()
	{
		return null;
	},

	/** @private */
	createObjFromRepositoryItem: function(targetObj, repItem)
	{
		var repResult = repItem.createObjects(targetObj, this.getRepObjCreationOptions()) || {};
		return repResult;
	},

	/** @private */
	addRepositoryObj: function(targetObj, screenCoord, ignoreUnconnectedStructCheck)
	{
		var editor = this.getEditor();
		this.setAddRepObjsOper(null);
		var repResult = null;

		editor.beginUpdateObject();
		try
		{
			var chemSpace = editor.getChemSpace();
			var repItem = this.getRepositoryItem();
			/*
			repResult = repItem.createObjects(targetObj) || {};
			*/
			var repResult = this.createObjFromRepositoryItem(targetObj, repItem);
			var repObjects = repResult.objects;
			this.setCurrRepositoryObjects(repObjects);

			var isOneStructItem = repItem.isOneStructureFragmentObj();
			var addToBlankMol = false;
			var blankMol = this.getEditor().getOnlyOneBlankStructFragment();
			if (!editor.canCreateNewChild() &amp;&amp; !repResult.mergeObj &amp;&amp; !ignoreUnconnectedStructCheck)  // can not create a standalone child
			{
				if (!isOneStructItem || !editor.canAddUnconnectedStructFragment())
					return null;
				else
					addToBlankMol = true;
			}

			var macroOper = new Kekule.MacroOperation();
			for (var i = 0, l = repObjects.length; i &lt; l; ++i)
			{
				var obj = repObjects[i];
				var oper;
				if (addToBlankMol)
					oper = new Kekule.ChemStructOperation.MergeStructFragment(obj, blankMol, editor);
				else
					oper = new Kekule.ChemObjOperation.Add(obj, chemSpace, null, editor);
				macroOper.add(oper);
			}
			macroOper.execute();
			this.setAddRepObjsOper(macroOper);

			var addedObjs = addToBlankMol? [blankMol]: repObjects;
			var transformParams = this.calcInitialTransformParams(repItem, repResult, targetObj, screenCoord);
			this._transformObjectsCoordAndSize(addedObjs, transformParams);
			this.setInitialTransformParams(transformParams);

			repResult.objects = addedObjs;
			//repResult.centerObj = repItem.getMolManipulationCenterObj();
			var manCenterCoord = repItem.getMolManipulationCenterCoord &amp;&amp; repItem.getMolManipulationCenterCoord();
			if (manCenterCoord)
				repResult.manipulationCenterCoord = Kekule.CoordUtils.transform2D(manCenterCoord, transformParams);
			var defDirectionCoord = repItem.getMolManipulationDefDirectionCoord &amp;&amp; repItem.getMolManipulationDefDirectionCoord();
			if (defDirectionCoord)
				repResult.manipulationDefDirectionCoord = Kekule.CoordUtils.transform2D(defDirectionCoord, transformParams);
		}
		finally
		{
			editor.endUpdateObject();
		}

		//this.addOperationToEditor();
		return repResult;
	},
	/**
	 * Change the inserted repository structures in editor.
	 * Note, the atoms and bonds in the structure can be changed, but the structure itself should not be replaced.
	 * @private
	 */
	doRefreshRepositoryObj: function(manipulatingObjs, startScreenCoord, startBox, rotateCenter, rotateRefCoord)
	{
		this.doPrepareManipulatingObjects(manipulatingObjs, startScreenCoord);
		this.doPrepareManipulatingStartingCoords(startScreenCoord, startBox, rotateCenter, rotateRefCoord);
		//this.createManipulateOperation();
		this.doCreateManipulateMoveAndResizeOperation();  // only recreate move operations, but retain merge ones
	},

	/** @private */
	_transformObjectsCoordAndSize: function(objects, transformParams)
	{
		/*
		var coordMode = this.getEditor().getCoordMode();
		var allowCoordBorrow = this.getEditor().getAllowCoordBorrow();
		var matrix = (coordMode === Kekule.CoordMode.COORD3D)?
			Kekule.CoordUtils.calcTransform3DMatrix(transformParams):
			Kekule.CoordUtils.calcTransform2DMatrix(transformParams);
		var childTransformParams = Object.extend({}, transformParams);
		childTransformParams = Object.extend(childTransformParams, {
			'translateX': 0,
			'translateY': 0,
			'translateZ': 0,
			'center': {'x': 0, 'y': 0, 'z': 0}
		});
		var childMatrix = (coordMode === Kekule.CoordMode.COORD3D)?
			Kekule.CoordUtils.calcTransform3DMatrix(childTransformParams):
			Kekule.CoordUtils.calcTransform2DMatrix(childTransformParams);

		for (var i = 0, l = objects.length; i &lt; l; ++i)
		{
			var obj = objects[i];
			obj.transformAbsCoordByMatrix(matrix, childMatrix, coordMode, true, allowCoordBorrow);
			obj.scaleSize(transformParams.scale, coordMode, true, allowCoordBorrow);
		}
		*/
		return this.getEditor().transformCoordAndSizeOfObjects(objects, transformParams);
	},

	/** @ignore */
	getAllObjOperations: function($super, isTheFinalOperationToEditor)
	{
		var result = $super(isTheFinalOperationToEditor) || [];
		var repOper = this.getAddRepObjsOper();
		if (repOper)
			result.unshift(repOper);
		return result;
	},
	/** @private */
	addOperationToEditor: function($super)
	{
		/*
		if (this.getAllManipulateObjsMerged())
			return null;
		else
		*/
		// even all nodes are merged, bond may be added as well
		return $super();
	},

	/**
	 * Returns manipulate type that should be used after adding a repository object.
	 * Descendant may override this method.
	 * @returns {Int}
	 * @private
	 */
	getInitManipulationType: function()
	{
		return Kekule.Editor.BasicManipulationIaController.ManipulationType.ROTATE;
	},

	/** @private */
	doInsertRepositoryObjToEditor: function(addedRepObjsResult, startingCoord, startingObj, isUpdate)
	{
		if (!isUpdate)
		{
			// save new insertion params
			this._initialStartingObj = startingObj;
			this._repObjStartingScreenCoord = startingCoord;
		}
		//var addedResult = this.addRepositoryObj(startingObj, startingCoord);
		var addedResult = addedRepObjsResult;
		if (addedResult)
		{
			var addedObjects = addedResult.objects;
			var rotateCenter = null, rotateRefCoord = null;
			var manType = this.getInitManipulationType();
			if (addedResult.mergeObj)
			{
				rotateCenter = this.getEditor().getObjectScreenCoord(addedResult.mergeObj);
				manType = Kekule.Editor.BasicManipulationIaController.ManipulationType.ROTATE;  // always rotate when there is merge
			}
			else
			{
				/*
				if (addedResult.centerObj)
					rotateCenter = this.getEditor().getObjectScreenCoord(addedResult.centerObj);
				*/
				if (addedResult.manipulationCenterCoord)
					rotateCenter = this.getEditor().objCoordToScreen(addedResult.manipulationCenterCoord);
			}
			if (addedResult.manipulationDefDirectionCoord)
				rotateRefCoord = this.getEditor().objCoordToScreen(addedResult.manipulationDefDirectionCoord);
			//console.log(addedResult, rotateCenter);
			var box = this.getEditor().getObjectsContainerBox(addedObjects);
			//console.log(manType, rotateCenter, rotateRefCoord);
			//this.moveManipulatedObjs(startingObj);  // force a "move" action, to apply possible merge
			return {'objects': addedObjects, 'manipulateType': manType, 'coord': startingCoord,
				'box': box, 'rotateCenter': rotateCenter, 'rotateRefCoord': rotateRefCoord,
				'startingObj': startingObj};
		}
		else
		{
			// not added, do nothing
			return null;
		}
	},
	/** @private */
	insertRepositoryObjToEditor: function(startingCoord, startingObj, isUpdate)
	{
		var addedResult = this.addRepositoryObj(startingObj, startingCoord);
		return this.doInsertRepositoryObjToEditor(addedResult, startingCoord, startingObj, isUpdate);
	},
	/**
	 * Update (and change) the inserted structure in editor.
	 * You must ensure that the returned structures of method insertRepositoryObjToEditor
	 * returns all the same old inserted structures.
	 * @private
	 */
	updateRepositoryObjInEditor: function()
	{
		var editor = this.getEditor();
		editor.beginUpdateObject();
		try
		{
			// when merge preview is not used in editor, the merge operation may be messed up when change curr manipulation objects,
			// so empty them first
			if (!this.useMergePreview())
			{
				this.reverseActiveOperation();
			}
			//console.log(this._initialStartingObj, this._repObjStartingScreenCoord);
			//var result = this.insertRepositoryObjToEditor(this._repObjStartingScreenCoord, this._initialStartingObj, true);
			var oldObjects = this.getCurrRepositoryObjects();
			var addedRepObjResult = this.addRepositoryObj(this._initialStartingObj, this._repObjStartingScreenCoord, true);
			var unneedObjs = AU.exclude(oldObjects, (addedRepObjResult || {}).objects);  // objects should be removed
			for (var i = 0, l = unneedObjs.length; i &lt; l; ++i)
			{
				var obj = unneedObjs[i];
				var parent = obj.getParent();
				if (parent)
					parent.removeChild(obj);
			}
			//console.log('unnedded', unneedObjs);
			// when merge preview is not used in editor, the merge operation may be messed up when change curr manipulation objects,
			// so empty them first
			if (!this.useMergePreview() || unneedObjs.length)
			{
				this.setMergeOperations([]);
				this.setMergePreviewOperations([]);
			}

			var result = this.doInsertRepositoryObjToEditor(addedRepObjResult, this._repObjStartingScreenCoord, this._initialStartingObj, true);
			if (result)
			{
				this.doRefreshRepositoryObj(result.objects, result.coord, result.box,
						result.rotateCenter, result.rotateRefCoord);
				this.moveManipulatedObjs(this._repObjStartingScreenCoord);  // force a "move" action, to apply possible merge
			}
		}
		finally
		{
			editor.endUpdateObject();
		}
		return result;
	},

	/** @private */
	react_pointerdown: function(e)
	{
		if (e.getButton() === Kekule.X.Event.MOUSE_BTN_LEFT)
		{
			var S = BC.State;
			var coord = this._getEventMouseCoord(e);
			var state = this.getState();
			if (state === S.INITIAL)
			{
				var boundItem = this.getEditor().getTopmostBoundInfoAtCoord(coord, null, this.getCurrBoundInflation());
				var boundObj = boundItem? boundItem.obj: null;

				var insertResult = this.insertRepositoryObjToEditor(coord, boundObj);
				if (insertResult)
				{
					this.startDirectManipulate(insertResult.manipulateType, insertResult.objects,
							insertResult.coord, insertResult.box, insertResult.rotateCenter);
					this.moveManipulatedObjs(coord);  // force a "move" action, to apply possible merge
				}
				e.preventDefault();
				return true; // important
			}
		}
	},
	/** @private */
	react_pointerup: function($super, e)
	{
		var state = this.getState();
		var startCoord = this.getStartCoord();
		var endCoord = this._getEventMouseCoord(e);
		var S = Kekule.Editor.BasicManipulationIaController.State;
		if ((state === S.MANIPULATING) &amp;&amp; (e.getButton() === Kekule.X.Event.MOUSE_BTN_LEFT))
		{
			if (Kekule.CoordUtils.isEqual(startCoord, endCoord))  // click
			{
				this.addOperationToEditor();
				this.stopManipulate();
				this.setState(S.NORMAL);
				e.preventDefault();
				return true;
			}
		}

		return $super(e);  // finish move operation
	}
});

/**
 * Controller to add ring structure into chem space.
 * @class
 * @augments Kekule.Editor.RepositoryIaController
 *
 * @property {Int} ringAtomCount Atom count on ring.
 * @property {Bool} isAromatic Whether this ring is a aromatic one (single/double bond intersect),
 */
Kekule.Editor.MolRingIaController = Class.create(Kekule.Editor.RepositoryIaController,
/** @lends Kekule.Editor.MolRingIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.MolRingIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setRepositoryItem(new Kekule.Editor.MolRingRepositoryItem2D());
	},
	/** @ignore */
	getActualManipulatingObjects: function(objs)
	{
		// since we are sure that the manipulated objects is carbon chain itself,
		// we can return all its atoms as the actual manipulating objects / coord dependent objects
		var mol = this.getCurrRepositoryObjects()[0];
		//console.log(mol);
		return mol? AU.clone(mol.getNodes()): [];
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('ringAtomCount', {'dataType': DataType.INT,
			'getter': function() { return this.getRepositoryItem().getRingAtomCount(); },
			'setter': function(value) { this.getRepositoryItem().setRingAtomCount(value); }
		});
		this.defineProp('isAromatic', {'dataType': DataType.INT,
			'getter': function() { return this.getRepositoryItem().getIsAromatic(); },
			'setter': function(value) { this.getRepositoryItem().setIsAromatic(value); }
		});
	}
});
// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.MolRingIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Controller to add repository structure into chem space.
 * @class
 * @augments Kekule.Editor.RepositoryIaController
 *
 * @property {Int} ringAtomCount Atom count on ring.
 * @property {Bool} isAromatic Whether this ring is a aromatic one (single/double bond intersect),
 */
Kekule.Editor.RepositoryStructureFragmentIaController = Class.create(Kekule.Editor.RepositoryIaController,
/** @lends Kekule.Editor.RepositoryStructureFragmentIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.RepositoryStructureFragmentIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('repItemName', {'dataType': DataType.STRING,
			'setter': function(value)
			{
				if (value !== this.getRepItemName())
				{
					var repItem = Kekule.Editor.RepositoryItemManager.getItem(value);
					if (repItem)
					{
						this.setRepositoryItem(repItem);
						this.setPropStoreFieldValue('repItemName', value);
					}
				}
			}
		});
	}
});
Kekule.Editor.IaControllerManager.register(Kekule.Editor.RepositoryStructureFragmentIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Base controller to add a flex structure into chem space.
 * @class
 * @augments Kekule.Editor.RepositoryIaController
 */
Kekule.Editor.MolFlexStructureIaController = Class.create(Kekule.Editor.RepositoryIaController,
/** @lends Kekule.Editor.MolFlexStructureIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.MolFlexStructureIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setEnableSelect(false);
	},
	/** @private */
	initProperties: function()
	{
		// marker to display the ring atom count
		this.defineProp('assocMarker', {'dataType': DataType.OBJECT, 'serializable': false,
			'setter': null,
			'getter': function()
			{
				var result = this.getPropStoreFieldValue('assocMarker');
				if (!result)
				{
					result = new Kekule.ChemWidget.TextUiMarker();
					this.setPropStoreFieldValue('assocMarker', result);
				}
				return result;
			}
		});
	},

	/** @ignore */
	manipulateEnd: function($super)
	{
		$super();
		this.hideAssocMarker();
	},

	/** @private */
	initAssocMarker: function()
	{
		var marker = this.getAssocMarker();
		var styleConfigs = this.getEditorConfigs().getUiMarkerConfigs();
		var drawStyles = {
			'color': styleConfigs.getFlexStructureAssocMarkerColor(),
			'opacity': styleConfigs.getFlexStructureAssocMarkerOpacity(),
			'fontSize': styleConfigs.getFlexStructureAssocMarkerFontSize(),
			'fontFamily': styleConfigs.getFlexStructureAssocMarkerFontFamily(),
			'textBoxXAlignment': Kekule.Render.BoxXAlignment.CENTER,
			'textBoxYAlignment': Kekule.Render.BoxYAlignment.CENTER
		};
		//console.log('draw styles', drawStyles);
		marker.setDrawStyles(drawStyles);
		marker.setVisible(true);
		this.getEditor().getUiMarkers().addMarker(marker);
		return marker;
	},
	/** @private */
	hideAssocMarker: function()
	{
		var marker = this.getPropStoreFieldValue('assocMarker');
		if (marker)
		{
			marker.setVisible(false);
			this.getEditor().getUiMarkers().removeMarker(marker);
			this.repaintMarker();
		}
	},
	/** @private */
	updateAssocMarker: function(coord, props, doNotRepaint)
	{
		var marker = this.getAssocMarker();
		if (coord)
			marker.setCoord(coord);
		if (props)
			marker.setPropValues(props);

		// request a repaint
		if (!doNotRepaint)
			this.repaintMarker();
	},
	/** @private */
	repaintMarker: function()
	{
		//console.log(this.getEditor().isUpdatingUiMarkers());
		this.getEditor().repaintUiMarker();
	}
});

/**
 * Controller to add a flex carbon chain into chem space.
 * @class
 * @augments Kekule.Editor.MolFlexStructureIaController
 */
Kekule.Editor.MolFlexChainIaController = Class.create(Kekule.Editor.MolFlexStructureIaController,
/** @lends Kekule.Editor.MolFlexChainIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.MolFlexChainIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setEnableSelect(false);
		// private
		this._deltaDistance = null;
		this._deltaCount = 0;
		this._lastDeltaCount = 1;
		this._repObjStartingScreenCoord = null;
		this._repObjNeedUpdate = false;
		this._isForceReversedChainDirection = false;
		this._assocMarkerInitCoord = null;

		this._manipulateObjInfoCache = [];
		this._chain = null;  // internally, stores the chain molecule object

		var rep = new Kekule.Editor.MolChainRepositoryItem2D(2);
		rep.setEnableCoordCache(true);  // use cache to reduce dynamic coord calculation time
		this.setRepositoryItem(rep);
	},
	/** @ignore */
	updateAssocMarker: function($super, coord, props, doNotRepaint)
	{
		var editor = this.getEditor();
		var style = this.getAssocMarker().getDrawStyles();
		var mol = this._chain;

		// update draw position
		var currCoord = coord;  // || this._assocMarkerInitCoord;
		if (!currCoord &amp;&amp; mol)
		{
			// draw near the last node of chain
			var firstNode = mol.getNodeAt(0);
			var lastNode = mol.getNodeAt(mol.getNodeCount() - 1);
			var firstCoord = editor.getObjectContextCoord(firstNode);
			currCoord = editor.getObjectContextCoord(lastNode);
			var v = CU.substract(currCoord, firstCoord);
			if (v)
			{
				var fontSize = style.fontSize || 10;
				var gap = fontSize / 2;  // TODO: currently fixed
				var deltaCoord = {x: 0, y: 0};
				if (currCoord)
				{
					/*
					 if (Math.abs(v.x) >= Math.abs(v.y))
					 {
					 style.textBoxYAlignment = Kekule.Render.BoxYAlignment.CENTER;
					 style.textBoxXAlignment = (v.x >= 0) ? Kekule.Render.BoxXAlignment.RIGHT : Kekule.Render.BoxXAlignment.LEFT;
					 deltaCoord.x = gap * (Math.sign(v.x) || 1); // * -1;
					 }
					 else
					 {
					 style.textBoxXAlignment = Kekule.Render.BoxXAlignment.CENTER;
					 style.textBoxYAlignment = (v.y >= 0) ? Kekule.Render.BoxYAlignment.BOTTOM : Kekule.Render.BoxYAlignment.TOP;
					 deltaCoord.y = gap * (Math.sign(v.y) || 1); // * -1;
					 }
					 */
					var d = CU.getDistance(v);
					var ratioX = v.x / d;
					var ratioY = v.y / d;
					var deltaCoord = {x: gap * ratioX, y: gap * ratioY};

					currCoord = Kekule.CoordUtils.add(currCoord, deltaCoord);

					//console.log(currCoord, deltaCoord);
				}
			}
		}
		// then call $super, and repaint the marker
		$super(currCoord, props, doNotRepaint);
	},
	/** @private */
	getChainMaxAtomCount: function()
	{
		return Math.max(this.getEditorConfigs().getStructureConfigs().getMaxFlexChainAtomCount(), 0);
	},
	/** @ignore */
	manipulateEnd: function($super)
	{
		this._clearManipulateObjInfoCache();
		$super();
	},
	/** @ignore */
	createManipulateObjInfo: function($super, obj, objIndex, startContextCoord)
	{
		// try use cached info first
		var negative = this.getRepositoryItem().getNegativeDirection();
		var cachedInfo = this._getCachedManipulateObjInfo(objIndex, negative);
		if (cachedInfo)
		{
			//console.log('use cached info', objIndex, cachedInfo);
			return cachedInfo;
		}
		else  // calculate and save to cache
		{
			var info = $super(obj, objIndex, startContextCoord);
			this._setCachedManipulateObjInfo(info, objIndex, negative);
			return info;
		}
	},
	/** @ignore */
	canInteractWithObj: function($super, obj)
	{
		return $super(obj) &amp;&amp; (obj instanceof Kekule.ChemStructureNode);
	},
	/** @ignore */
	getActualManipulatingObjects: function(objs)
	{
		// since we are sure that the manipulated objects is carbon chain itself,
		// we can return all its atoms as the actual manipulating objects / coord dependent objects
		var mol = this.getCurrRepositoryObjects()[0];
		//console.log(mol);
		return mol? AU.clone(mol.getNodes()): [];
	},
	/** @private */
	_setCachedManipulateObjInfo: function(info, atomIndex, isNegativeChain)
	{
		var cacheIndex = isNegativeChain? 1: 0;
		var cache = this._manipulateObjInfoCache[cacheIndex];
		if (!cache)
		{
			cache = [];
			this._manipulateObjInfoCache[cacheIndex] = cache;
		}
		cache[atomIndex] = info;
	},
	/** @private */
	_getCachedManipulateObjInfo: function(atomIndex, isNegativeChain)
	{
		var cacheIndex = isNegativeChain? 1: 0;
		var cache = this._manipulateObjInfoCache[cacheIndex];
		return cache &amp;&amp; cache[atomIndex];
	},
	/** @private */
	_clearManipulateObjInfoCache: function()
	{
		this._manipulateObjInfoCache = [];
	},
	/** @private */
	_calcStepDeltaDistance: function()
	{
		var bondLength = this.getRepositoryItem().getBondLength();
		var transformParams = this.getInitialTransformParams();
		//console.log('repository item bond length', bondLength, transformParams);
		var editor = this.getEditor();
		var coord1 = editor.objCoordToScreen(Kekule.CoordUtils.transform2D({x: 0, y: 0}, transformParams));
		var coord2 = editor.objCoordToScreen(Kekule.CoordUtils.transform2D({x: bondLength * Math.cos(Math.PI / 6), y: 0}, transformParams));
		var result = Kekule.CoordUtils.getDistance(coord1, coord2);
		/*
		console.log('bond length', Kekule.CoordUtils.getDistance(
				Kekule.CoordUtils.transform2D({x: 0, y: 0}, transformParams),
				Kekule.CoordUtils.transform2D({x: bondLength, y: 0}, transformParams)
		));
		*/
		return result;
	},
	/** @ignore */
	getRepObjCreationOptions: function()
	{
		//return null;
		if (this._isUpdateRepObj)  // just update chain, can reuse the old structure to avoid unnecessary merge operation
		{
			var oldMol = this.getCurrRepositoryObjects()[0];
			//console.log(oldMol);
			return {'originalStructFragment': oldMol};
		}
		else
			return null;
	},
	/** @ignore */
	addRepositoryObj: function($super, targetObj, screenCoord, ignoreUnconnectedStructCheck)
	{
		var result = $super(targetObj, screenCoord, ignoreUnconnectedStructCheck);
		/*
		// debug
		var mol = result.objects[0];
		var coords = [];
		mol.getNodes().forEach(function(n) {coords.push(n.getCoord2D());} );
		console.log(coords);
		*/
		// save bond length
		this._deltaDistance = this._calcStepDeltaDistance();
		//this._repObjStartingScreenCoord = screenCoord;
		this._repObjNeedUpdate = false;
		return result;
	},
	/** @ignore */
	insertRepositoryObjToEditor: function($super, startingCoord, startingObj, isUpdate)
	{
		if (!isUpdate)
		{
			//this._initialStartingObj = startingObj;
			//this._repObjStartingScreenCoord = null;
			this._deltaDistance = null;
			this._deltaCount = 0;
			this._lastDeltaCount = 1;
			var initialAtomCount = 2;
			this.getRepositoryItem().setAtomCount(initialAtomCount);
		}
		this._isUpdateRepObj = isUpdate;  // a flag indicaing whether is update chain
		var result = $super(startingCoord, startingObj, isUpdate);
		this._chain = result &amp;&amp; result.objects[0];

		if (result &amp;&amp; !isUpdate)
		{
			var marker = this.initAssocMarker();
			//this._assocMarkerInitCoord = startingCoord;
			this.updateAssocMarker(null, {'text': '' + initialAtomCount});  // the marker will restain in starting coord
		}

		return result;
	},

	/** @private */
	_updateChain: function()
	{
		this._isUpdateRepObj = true;
		var result = this.updateRepositoryObjInEditor();
		this._chain = result.objects[0];
		this._repObjNeedUpdate = false;
		return result;
	},
	/** @ignore */
	doTransformManipulatedObjs: function($super, manipulateType, endScreenCoord, explicitTransformParams)
	{
		var endCoord = endScreenCoord;
		var state = this.getState();
		if (state ===  Kekule.Editor.BasicManipulationIaController.State.MANIPULATING)
		{
			//var startCoord = this.getRotateCenter();
			var startCoord = this.getBaseCoord();
			if (startCoord)
			{
				// check chain length
				var dis = Kekule.CoordUtils.getDistance(endCoord, startCoord);
				//var dis = Math.abs(coord.x - startCoord.x);
				var deltaCount = Math.max(Math.round(dis / this._deltaDistance), 1);
				//console.log(dis, this._deltaDistance, deltaCount);
				if (!this._lastDeltaCount || deltaCount !== this._lastDeltaCount)
				{
					this._deltaCount = deltaCount;
					// need recreate repository
					var maxAtomCount = this.getChainMaxAtomCount();
					var atomCount = maxAtomCount? Math.min(maxAtomCount, deltaCount + 1): deltaCount + 1;
					if (this.getRepositoryItem().getAtomCount() !== atomCount)
					{
						this.getRepositoryItem().setAtomCount(atomCount);
						this._repObjNeedUpdate = true;
						this.updateAssocMarker(null, {'text': '' + atomCount}, true);  // update text but suspend repaint
					}
					this._lastDeltaCount = deltaCount;
				}
				// console.log('dynamic', startCoord, coord, this._deltaDistance, deltaCount);

				// check chain direction
				var angleInfo = this._calcRotateAngle(endCoord);
				var angle = angleInfo &amp;&amp; angleInfo.angle;
				var isConstrained = this.isInActualConstrainedRotation();
				var negativeDirection;
				if (isConstrained)
				{
					// note: here we use doubled constrainedRotateStep (30 degree) to avoid too violent variation
					// TODO: this step value should be customizable
					var angleStep = isConstrained ?
							this.getEditorConfigs().getInteractionConfigs().getConstrainedRotateStep() * 2 : null;

					var times = Math.round(angle / angleStep);
					var tailNum = times * angleStep - angle;
					negativeDirection = tailNum &lt; 0;
					//console.log(angleStep, angle, times, tailNum);
				}
				else
				{
					negativeDirection = false;
				}
				if (this._isForceReversedChainDirection)
					negativeDirection = !negativeDirection;
				if (!!this.getRepositoryItem().getNegativeDirection() !== negativeDirection)
				{
					this.getRepositoryItem().setNegativeDirection(negativeDirection);
					this._repObjNeedUpdate = true;
				}
			}
		}

		if (this._repObjNeedUpdate)
			this._updateChain();

		var mol = this.getCurrRepositoryObjects()[0];
		mol.beginUpdate();
		try
		{
			var result = $super(manipulateType, endScreenCoord, explicitTransformParams);
			//var manipulationDirectionVector = Kekule.CoordUtils.substract(endScreenCoord, startCoord);
			this.updateAssocMarker(null, null, false);  // force repaint marker
		}
		finally
		{
			mol.endUpdate();
		}
		return result;
	},
	/** @ignore */
	react_pointermove: function($super, e)
	{
		//var tStart = Date.now();
		this._isForceReversedChainDirection = !!e.getShiftKey();
		var result = $super(e);
		//var tEnd = Date.now();
		//console.log('duration', tEnd - tStart);
		return result;
	}
});
Kekule.Editor.IaControllerManager.register(Kekule.Editor.MolFlexChainIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Controller to add a flex ring structure to chem space.
 * @class
 * @augments Kekule.Editor.MolFlexStructureIaController
 */
Kekule.Editor.MolFlexRingIaController = Class.create(Kekule.Editor.MolFlexStructureIaController,
/** @lends Kekule.Editor.MolFlexRingIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.MolFlexRingIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setEnableSelect(false);
		// private
		this._deltaDistance = null;
		this._lastDeltaCount = 1;
		this._repObjStartingScreenCoord = null;
		this._repObjNeedUpdate = false;

		this._manipulateObjInfoCache = [];

		var rep = new Kekule.Editor.MolRingRepositoryItem2D(3);
		rep.setEnableCoordCache(true);  // use cache to reduce dynamic coord calculation time
		this.setRepositoryItem(rep);
	},

	/** @private */
	getRingMaxAtomCount: function()
	{
		return Math.max(this.getEditorConfigs().getStructureConfigs().getMaxFlexRingAtomCount(), 0);
	},
	/** @private */
	getRingMinAtomCount: function()
	{
		return Math.max(this.getEditorConfigs().getStructureConfigs().getMinFlexRingAtomCount(), 3);
	},
	/** @ignore */
	getActualManipulatingObjects: function(objs)
	{
		// since we are sure that the manipulated objects is carbon ring itself,
		// we can return all its atoms as the actual manipulating objects / coord dependent objects
		var mol = this.getCurrRepositoryObjects()[0];
		//console.log(mol);
		return mol? AU.clone(mol.getNodes()): [];
	},
	/** @ignore */
	manipulateEnd: function($super)
	{
		this._clearManipulateObjInfoCache();
		$super();
	},
	/** @ignore */
	createManipulateObjInfo: function($super, obj, objIndex, startContextCoord)
	{
		// try use cached info first
		var atomCount = this.getRepositoryItem().getRingAtomCount();
		var cachedInfo = this._getCachedManipulateObjInfo(objIndex, atomCount);
		if (cachedInfo)
		{
			//console.log('use cached info', objIndex, cachedInfo);
			return cachedInfo;
		}
		else  // calculate and save to cache
		{
			var info = $super(obj, objIndex, startContextCoord);
			this._setCachedManipulateObjInfo(info, objIndex, atomCount);
			return info;
		}
	},
	/** @private */
	_setCachedManipulateObjInfo: function(info, atomIndex, atomCount)
	{
		var cache = this._manipulateObjInfoCache[atomCount];
		if (!cache)
		{
			cache = [];
			this._manipulateObjInfoCache[atomCount] = cache;
		}
		cache[atomIndex] = info;
	},
	/** @private */
	_getCachedManipulateObjInfo: function(atomIndex, atomCount)
	{
		var cache = this._manipulateObjInfoCache[atomCount];
		return cache &amp;&amp; cache[atomIndex];
	},
	/** @private */
	_clearManipulateObjInfoCache: function()
	{
		this._manipulateObjInfoCache = [];
	},

	/** @private */
	_calcStepDeltaDistance: function()
	{
		var bondLength = this.getRepositoryItem().getBondLength();
		var transformParams = this.getInitialTransformParams();
		//console.log('repository item bond length', bondLength, transformParams);
		var editor = this.getEditor();
		var coord1 = editor.objCoordToScreen(Kekule.CoordUtils.transform2D({x: 0, y: 0}, transformParams));
		var coord2 = editor.objCoordToScreen(Kekule.CoordUtils.transform2D({x: bondLength, y: 0}, transformParams));
		// TODO: 1/3 bond length, currently fixed
		var result = Kekule.CoordUtils.getDistance(coord1, coord2) / 3;
		return result;
	},
	/** @ignore */
	getRepObjCreationOptions: function()
	{
		if (this._isUpdateRepObj)  // just update ring, can reuse the old structure to avoid unnecessary merge operation
		{
			var oldMol = this.getCurrRepositoryObjects()[0];
			return {'originalStructFragment': oldMol};
		}
		else
			return null;
	},
	/** @ignore */
	addRepositoryObj: function($super, targetObj, screenCoord, ignoreUnconnectedStructCheck)
	{
		var result = $super(targetObj, screenCoord, ignoreUnconnectedStructCheck);
		// save bond length
		this._deltaDistance = this._calcStepDeltaDistance();
		//this._repObjStartingScreenCoord = screenCoord;
		this._repObjNeedUpdate = false;
		return result;
	},
	/** @ignore */
	insertRepositoryObjToEditor: function($super, startingCoord, startingObj, isUpdate)
	{
		if (!isUpdate)
		{
			//this._initialStartingObj = startingObj;
			//this._repObjStartingScreenCoord = null;
			this._deltaDistance = null;
			this._lastDeltaCount = 1;
			var initialAtomCount = this.getEditorConfigs().getStructureConfigs().getMinFlexRingAtomCount();
			this.getRepositoryItem().setRingAtomCount(initialAtomCount);
		}
		this._isUpdateRepObj = isUpdate;  // a flag indicaing whether is update ring
		var result = $super(startingCoord, startingObj);

		if (result &amp;&amp; !isUpdate)  // really add new obj
		{
			var ring = result.objects[0];
			//this._ring = ring;
			this.initAssocMarker();
			this.updateAssocMarker(this._getRingCenterAbsContextCoord(ring), {'text': '' + initialAtomCount});
			//this._updateRingAssocMarker(ring);
		}

		return result;
	},
	/** @ignore */
	updateAssocMarker: function($super, coord, props, doNotRepaint)
	{
		if (!coord)
		{
			var centerCoord = this._getManipulateObjsCenterCoord();
			coord = this.getEditor().objCoordToContext(centerCoord);
		}
		//console.log('update marker', coord, props, doNotRepaint);
		return $super(coord, props, doNotRepaint);
	},
	/** @private */
	_getRingCenterAbsContextCoord: function(ring)
	{
		var editor = this.getEditor();
		var objCoord = Kekule.Editor.StructureUtils.getStructureCenterAbsBaseCoord(ring, editor.getCoordMode(), editor.getAllowCoordBorrow());
		return editor.objCoordToContext(objCoord);
	},

	/* @private */
	/*
	_updateRingAssocMarker: function(ring)
	{
		if (!ring)
			ring = this._ring;
		{
			var atomCount = ring.getNodeCount();
			var centerCoord = this._getRingCenterAbsContextCoord(ring);
			var marker = this.initAssocMarker();
			this.updateAssocMarker(centerCoord, {'text': '' + atomCount});  // the marker will be shown at the center of ring
		}
	},
	*/

	/** @private */
	_updateRing: function()
	{
		/*
		// reverse prev operation (and removes it from editor) first
		var editor = this.getEditor();
		editor.beginUpdateObject();
		try
		{
			var prevOperation = this.getActiveOperation();
			if (prevOperation)
			{

				prevOperation.reverse();
			}
			var insertResult = this.insertRepositoryObjToEditor(this._repObjStartingScreenCoord, this._initialStartingObj, true);
			if (insertResult)
			{
				this.moveManipulatedObjs(this._repObjStartingScreenCoord);  // force a "move" action, to apply possible merge
			}
			this._repObjNeedUpdate = false;
		}
		finally
		{
			editor.endUpdateObject();
		}
		*/
		this._isUpdateRepObj = true;
		var result = this.updateRepositoryObjInEditor();
		//this._ring = result.objects[0];
		this._repObjNeedUpdate = false;
		return result;
	},
	/** @ignore */
	doTransformManipulatedObjs: function($super, manipulateType, endScreenCoord, explicitTransformParams)
	{
		var endCoord = endScreenCoord;
		var state = this.getState();
		if (state ===  Kekule.Editor.BasicManipulationIaController.State.MANIPULATING)
		{
			//var startCoord = this.getRotateCenter();
			var startCoord = this.getBaseCoord();
			if (startCoord)
			{
				// check ring atom count
				var minAtomCount = this.getRingMinAtomCount();
				var dis = Kekule.CoordUtils.getDistance(endCoord, startCoord);
				var deltaCount = Math.round(dis / this._deltaDistance) + minAtomCount;  // min ring is 3 atoms
				//console.log(dis, this._deltaDistance, deltaCount);
				if (!this._lastDeltaCount || deltaCount !== this._lastDeltaCount)
				{
					// need recreate repository
					var maxAtomCount = this.getRingMaxAtomCount();
					var atomCount = maxAtomCount? Math.min(maxAtomCount, deltaCount): deltaCount;
					atomCount = minAtomCount? Math.max(atomCount, minAtomCount): atomCount;
					if (this.getRepositoryItem().getRingAtomCount() !== atomCount)
					{
						this.getRepositoryItem().setRingAtomCount(atomCount);
						this._repObjNeedUpdate = true;
						this.updateAssocMarker(null, {'text': '' + atomCount}, true);  // suspend repaint
					}
					//this._updateChain();
					this._lastDeltaCount = deltaCount;
				}
				// console.log('dynamic', startCoord, coord, this._deltaDistance, deltaCount);
			}
		}

		if (this._repObjNeedUpdate)
			this._updateRing();

		var mol = this.getCurrRepositoryObjects()[0];
		mol.beginUpdate();
		try
		{
			var result = $super(manipulateType, endScreenCoord, explicitTransformParams);
			//this._updateRingAssocMarker(mol);
			// update assoc marker and coord
			this.updateAssocMarker(null, null, false);  // force repaint marker
		}
		finally
		{
			mol.endUpdate();
		}
		return result;
	}
});
Kekule.Editor.IaControllerManager.register(Kekule.Editor.MolFlexRingIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Controller to add arrow/line into chem space.
 * @class
 * @augments Kekule.Editor.RepositoryIaController
 *
 * @property {Class} glyphClass Class to create glyph.
 * @property {Float} glyphRefLength Default length to generate glyph.
 * @property {Hash} glyphInitialParams Initial params to create glyph.
 */
Kekule.Editor.ArrowLineIaController = Class.create(Kekule.Editor.RepositoryIaController,
/** @lends Kekule.Editor.ArrowLineIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.ArrowLineIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setRepositoryItem(new Kekule.Editor.PathGlyphRepositoryItem2D());
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('glyphRefLength', {'dataType': DataType.FLOAT,
			'getter': function() { return this.getRepositoryItem().getGlyphRefLength(); },
			'setter': function(value) { this.getRepositoryItem().setGlyphRefLength(value); }
		});
		this.defineProp('glyphClass', {'dataType': DataType.CLASS, 'serializable': false,
			'getter': function()
			{
				return this.getRepositoryItem().getGlyphClass();
			},
			'setter': function(value)
			{
				this.getRepositoryItem().setGlyphClass(value);
			}
		});
		this.defineProp('glyphInitialParams', {'dataType': DataType.HASH,
			'getter': function() { return this.getRepositoryItem().getGlyphInitialParams(); },
			'setter': function(value) { this.getRepositoryItem().setGlyphInitialParams(value); }
		});
	},
	/** @ignore */
	getInitManipulationType: function()
	{
		return Kekule.Editor.BasicManipulationIaController.ManipulationType.MOVE;
	},
	/** @ignore */
	addRepositoryObj: function($super, targetObj, screenCoord, ignoreUnconnectedStructCheck)
	{
		// set ref length before adding new object
		this.getRepositoryItem().setGlyphRefLength(this.getEditor().getChemSpace().getDefAutoScaleRefLength());
		return $super(targetObj, screenCoord, ignoreUnconnectedStructCheck);
	}
});
// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.ArrowLineIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Controller to add or edit formula based molecule in document.
 * @class
 * @augments Kekule.Editor.BaseEditorIaController
 */
Kekule.Editor.FormulaIaController = Class.create(Kekule.Editor.BaseEditorIaController,
/** @lends Kekule.Editor.FormulaIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.FormulaIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this._operAddMol = null;  // private
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('currMol', {'dataType': DataType.OBJECT, 'serializable': false});  // private
		this.defineProp('textSetter', {'dataType': DataType.OBJECT, 'serializable': false});  // private
	},
	/** @private */
	canInteractWithObj: function($super, obj)
	{
		if (obj &amp;&amp; this.isValidMol(obj))
			return true;
		else
			return false;
	},

	/**
	 * Check if obj is a valid formula based molecule and can be edited.
	 * @param {Kekule.ChemObject} obj
	 * @returns {Bool}
	 * @private
	 */
	isValidMol: function(obj)
	{
		return (obj instanceof Kekule.StructureFragment) &amp;&amp; obj.hasFormula() &amp;&amp; !obj.hasCtab();
	},

	/**
	 * Returns plain text of formula that shows in text setter.
	 * @param {Kekule.StructureFragment} mol
	 * @returns {String}
	 * @private
	 */
	getFormulaText: function(mol)
	{
		return mol.hasFormula()? mol.getFormula().getText(): '';
	},

	/** @private */
	createNewMol: function(chemSpace, coord)
	{
		var mol;
		var editor = this.getEditor();
		if (!editor.canCreateNewChild())
		{
			mol = editor.getOnlyOneBlankStructFragment();
			if (!mol)
				return null;
		}

		editor.beginUpdateObject();
		try
		{
			if (!mol)
				var mol = new Kekule.Molecule();
			mol.getFormula(true);  // create a forumla
			chemSpace.appendChild(mol);
			editor.setObjectScreenCoord(mol, coord);
			var addOperation = new Kekule.ChemObjOperation.Add(mol, chemSpace, null, editor);
			this._operAddBlock = addOperation;
		}
		finally
		{
			editor.endUpdateObject();
		}
		return mol;
	},

	/** @private */
	getTextSetterWidget: function(canCreate)
	{
		var result = this.getTextSetter();
		if (!result &amp;&amp; canCreate)  // create new one
		{
			var parentElem = this.getEditor().getCoreElement();
			var doc = parentElem.ownerDocument;
			result = this._createTextSetterWidget(doc, parentElem);
			this.setTextSetter(result);
		}
		return result;
	},
	/** @private */
	_createTextSetterWidget: function(doc, parentElem)
	{
		var result = new Kekule.Widget.TextBox(this.getEditor());
		/*
		result.setAutoSizeX(true);
		result.setAutoSizeY(true);
		*/
		result.addClassName(CCNS.CHEMEDITOR_FORMULA_SETTER);
		result.appendToElem(parentElem);

		// event handler
		var self = this;
		result.addEventListener('keyup', function(e)
			{
				var ev = e.htmlEvent;
				var keyCode = ev.getKeyCode();
				if (keyCode === Kekule.X.Event.KeyCode.ENTER)  // ctrl+enter
				{
					self.applySetter(result);
					result.dismiss();  // avoid call apply setter twice
				}
				else if (keyCode === Kekule.X.Event.KeyCode.ESC)  // ESC, cancel editor
				{
					result.dismiss();
					self.cancelSetter();
				}
			}
		);
		result.addEventListener('showStateChange', function(e)
			{
				//console.log('show state change', e.isShown, e.isDismissed, e.byDomChange);
				if (!e.byDomChange)
				{
					if (!e.isShown &amp;&amp; !e.isDismissed)  // widget hidden, feedback the edited value
					{
						self.applySetter(result);
					}
					if (e.isShown)  // set applied to false on newly shown widget
						result._applied = false;
				}
			}
		);
		return result;
	},
	/** @private */
	cancelSetter: function()
	{
		if (this._operAddBlock)  // already created new formula, remove it
		{
			this._operAddBlock.reverse();
			this._operAddBlock = null;
		}
	},
	/** @private */
	applySetter: function(setter, mol)
	{
		if (setter._applied)   // avoid call twice
			return;

		if (!mol)
			mol = this.getCurrMol();

		var oper;
		var text = setter.getText();
		if (!text)  // no input, delete
		{
			if (this._operAddBlock)  // new forumla just added to space
				this.cancelSetter();
			else  // old one, delete it
			{
				oper = new Kekule.ChemObjOperation.Remove(mol, mol.getParent(), null, this.getEditor());
			}
		}
		else
		{
			var oper = new Kekule.ChemObjOperation.Modify(mol.getFormula(), {'text': text}, this.getEditor());
		}
		if (oper)
		{
			oper.execute();

			var editor = this.getEditor();
			if (editor &amp;&amp; editor.getEnableOperHistory())
			{
				if (this._operAddBlock)
				{
					var group = new Kekule.MacroOperation();
					group.add(this._operAddBlock);
					group.add(oper);
					editor.pushOperation(group);
					this._operAddBlock = null;
				}
				else
					editor.pushOperation(oper);

				this.doneInsertOrModifyBasicObjects([mol]);
			}
		}

		setter._applied = true;
	},
	/**
	 * Open formula edit box in coord.
	 * @param {Hash} coord
	 * @param {Object} mol
	 */
	openSetterUi: function(coord, mol)
	{
		var oldSetter = this.getTextSetter();
		if (oldSetter &amp;&amp; oldSetter.isShown())  // has a old setter
		{
			this.applySetter(oldSetter, this.getCurrMol());
			oldSetter.hide();
			oldSetter._haltPrevShowHideProcess();
		}

		if (!mol)  // need create new
			mol = this.createNewMol(this.getEditor().getChemObj(), coord);

		if (!this.isValidMol(mol))
			return;
		this.setCurrMol(mol);

		this.getEditor().setSelection([mol]);

		//console.log(block.getCascadedRenderOption('fontSize'));

		var fontSize = mol.getCascadedRenderOption('fontSize') || this.getEditor().getEditorConfigs().getInteractionConfigs().getAtomSetterFontSize();
		fontSize *= this.getEditor().getZoom() || 1;
		var fontName = mol.getCascadedRenderOption('fontFamily') || '';
		//var posAdjust = fontSize / 1.5;  // adjust position to align to atom center
		var text = this.getFormulaText(mol);
		var setter = this.getTextSetterWidget(true);

		var parentElem = this.getEditor().getCoreElement();
		//setter._setEnableShowHideEvents(false);
		setter.appendToElem(parentElem);  // ensure setter widget is a child of parentElem, since popup show may change the parent each time
		//setter._setEnableShowHideEvents(true);

		var slabel = text || '';
		//console.log(block, text, slabel);
		setter.setValue(slabel);
		//setter.setValue('hehr');
		//setter.setIsPopup(true);
		var style = setter.getElement().style;
		style.position = 'absolute';
		style.fontSize = fontSize + 'px';
		style.left = coord.x + 'px';
		style.top = coord.y + 'px';
		style.fontFamily = fontName;
		/*
		 style.marginTop = -posAdjust + 'px';
		 style.marginLeft = -posAdjust + 'px';
		 */
		setter._applied = false;
		setter.show(null, null, Kekule.Widget.ShowHideType.POPUP);
		setter.selectAll();
		setter.focus();
	},

	/** @private */
	react_pointerup: function(e)
	{
		if (e.getButton() === Kekule.X.Event.MOUSE_BTN_LEFT)
		{
			this.getEditor().setSelection(null);
			var coord = this._getEventMouseCoord(e);
			{
				var mol;
				var boundItem = this.getEditor().getTopmostBoundInfoAtCoord(coord, null, this.getCurrBoundInflation());
				if (boundItem)
				{
					var obj = boundItem.obj;

					if (this.isValidMol(obj))  // can modify atom of this object
					{
						mol = obj;
					}
				}

				/*
				 if (!block)  // create new
				 {
				 block = this.createNewBlock(this.getEditor().getChemObj(), coord);
				 //console.log(coord, this.getEditor().getObjectScreenCoord(block));
				 }

				 if (block)
				 */
				{
					//var baseCoord = mol? this.getEditor().getObjectScreenCoord(mol): coord;
					var baseCoord;
					if (boundItem &amp;&amp; boundItem.boundInfo)
					{
						baseCoord = boundItem.boundInfo.coords[0];
					}
					else
						baseCoord = coord;
					e.preventDefault();
					e.stopPropagation();
					// important, prevent event bubble to document, otherwise reactDocumentClick will be evoked
					//  and the setter will be closed immediately.
					this.openSetterUi(baseCoord, mol);
					//this.getEditor().setSelection([block]);
					return true;  // important
				}
			}
		}
	}
});
// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.FormulaIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Base controller to add or edit content block in document.
 * @class
 * @augments Kekule.Editor.BaseEditorIaController
 */
Kekule.Editor.ContentBlockIaController = Class.create(Kekule.Editor.BaseEditorIaController,
/** @lends Kekule.Editor.ContentBlockIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.ContentBlockIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('currBlock', {'dataType': DataType.OBJECT, 'serializable': false});  // private
	},
	/** @private */
	canInteractWithObj: function($super, obj)
	{
		return (obj &amp;&amp; this.isValidBlock(obj));
	},
	/**
	 * Check if obj is a valid text block and can be edited.
	 * Descendants must override this method.
	 * @param {Kekule.ChemObject} obj
	 * @returns {Bool}
	 * @private
	 */
	isValidBlock: function(obj)
	{
		return obj instanceof Kekule.ContentBlock;
	},
	/**
	 * Called when IaController is selected and mouse clicked on document.
	 * Need to modify block or create new one when param block is null.
	 * Descendants need to override this method.
	 * @param {Kekule.ChemSpace} chemSpace
	 * @param {Hash} baseCoord
	 * @param {Kekule.ContentBlock} block
	 */
	execute: function(chemSpace, baseCoord, block)
	{
		// do nothing here
	},

	/** @private */
	react_pointerup: function(e)
	{
		if (e.getButton() === Kekule.X.Event.MouseButton.LEFT)
		{
			this.getEditor().setSelection(null);
			var coord = this._getEventMouseCoord(e);
			{
				var block;
				var boundItem = this.getEditor().getTopmostBoundInfoAtCoord(coord, null, this.getCurrBoundInflation());
				if (boundItem)
				{
					var obj = boundItem.obj;

					if (this.isValidBlock(obj))  // can modify atom of this object
					{
						block = obj;
					}
				}

				var baseCoord = block? this.getEditor().getObjectScreenCoord(block): coord;
				e.preventDefault();
				e.stopPropagation();
				// important, prevent event bubble to document, otherwise reactDocumentClick will be evoked
				//  and the setter may be closed immediately.
				//console.log('block execute', baseCoord, e.getTarget(), e.getCurrentTarget());
				this.execute(this.getEditor().getChemObj(), baseCoord, block);
				//this.getEditor().setSelection([block]);
				return true;  // important
			}
		}
	}
});

/**
 * Controller to add or edit text block in document.
 * @class
 * @augments Kekule.Editor.ContentBlockIaController
 */
Kekule.Editor.TextBlockIaController = Class.create(Kekule.Editor.ContentBlockIaController,
/** @lends Kekule.Editor.TextBlockIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.TextBlockIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this._operAddBlock = null;  // private
	},
	/** @private */
	initProperties: function()
	{
		//this.defineProp('currBlock', {'dataType': DataType.OBJECT, 'serializable': false});  // private
		this.defineProp('textSetter', {'dataType': DataType.OBJECT, 'serializable': false});  // private
	},

	/** @ignore */
	isValidBlock: function(obj)
	{
		return obj instanceof Kekule.TextBlock;
	},

	/**
	 * Create new content block on document.
	 * @private
	 */
	createNewBlock: function(chemSpace, coord)
	{
		var editor = this.getEditor();
		if (!editor.canCreateNewChild())
			return null;

		editor.beginUpdateObject();
		try
		{
			var block = new Kekule.TextBlock();
			if (block)
			{
				chemSpace.appendChild(block);
				editor.setObjectScreenCoord(block, coord, Kekule.Render.CoordPos.CORNER_TL);
				//console.log('set text block cord', coord, block.getSize2D());
				var addOperation = new Kekule.ChemObjOperation.Add(block, chemSpace, null, editor);
				this._operAddBlock = addOperation;
			}
		}
		finally
		{
			editor.endUpdateObject();
		}
		return block;
	},

	/**
	 * Returns text that shows in text block.
	 * @param {Kekule.TextBlock} block
	 * @returns {String}
	 * @private
	 */
	getBlockText: function(block)
	{
		return block.getText();
	},

	/** @ignore */
	execute: function(chemSpace, baseCoord, block)
	{
		this.openSetterUi(baseCoord, block);
	},

	/** @private */
	getTextSetterWidget: function(canCreate)
	{
		var result = this.getTextSetter();
		if (!result &amp;&amp; canCreate)  // create new one
		{
			var parentElem = this.getEditor().getCoreElement();
			var doc = parentElem.ownerDocument;
			result = this._createTextSetterWidget(doc, parentElem);
			this.setTextSetter(result);
		}
		return result;
	},
	/** @private */
	_createTextSetterWidget: function(doc, parentElem)
	{
		var result = new Kekule.Widget.TextArea(this.getEditor());
		result.setAutoSizeX(true);
		result.setAutoSizeY(true);
		result.setDisplayed(false);
		result.addClassName(CCNS.CHEMEDITOR_TEXT_SETTER);
		result.appendToElem(parentElem);

		// event handler
		var self = this;
		result.addEventListener('keyup', function(e)
			{
				var ev = e.htmlEvent;
				var keyCode = ev.getKeyCode();
				if ((keyCode === Kekule.X.Event.KeyCode.ENTER) &amp;&amp; (ev.getCtrlKey()))  // ctrl+enter
				{
					self.applySetter(result);
					result.dismiss();  // avoid call apply setter twice
				}
				else if (keyCode === Kekule.X.Event.KeyCode.ESC)  // ESC, cancel editor
				{
					result.dismiss();
					self.cancelSetter();
				}
			}
		);
		result.addEventListener('showStateChange', function(e)
			{
				if (!e.byDomChange)
				{
					if (!e.isShown &amp;&amp; !e.isDismissed)  // widget hidden, feedback the edited value
					{
						self.applySetter(result);
					}
					if (e.isShown)  // set applied to false on newly shown widget
						result._applied = false;
				}
			}
		);
		return result;
	},
	/** @private */
	cancelSetter: function()
	{
		if (this._operAddBlock)  // already created new textblock, remove it
		{
			this._operAddBlock.reverse();
			this._operAddBlock = null;
		}
	},
	/** @private */
	applySetter: function(setter, block)
	{
		if (setter._applied)   // avoid call twice
			return;

		if (!block)
			block = this.getCurrBlock();

		var text = setter.getText();
		var oper;

		if (!text)
		{
			if (this._operAddBlock)  // just added text block
				this.cancelSetter();
			else
				oper = new Kekule.ChemObjOperation.Remove(block, block.getParent(), null, this.getEditor());
		}
		else
			oper = new Kekule.ChemObjOperation.Modify(block, {'text': text}, this.getEditor());

		if (oper)
		{
			oper.execute();

			var editor = this.getEditor();
			if (editor &amp;&amp; editor.getEnableOperHistory())
			{
				if (this._operAddBlock)
				{
					var group = new Kekule.MacroOperation();
					group.add(this._operAddBlock);
					group.add(oper);
					editor.pushOperation(group);
					this._operAddBlock = null;
				}
				else
					editor.pushOperation(oper);
			}

			this.doneInsertOrModifyBasicObjects([block]);
		}

		setter._applied = true;
	},
	/**
	 * Open edit box for text block in coord.
	 * @param {Hash} coord
	 * @param {Object} block
	 */
	openSetterUi: function(coord, block)
	{
		var oldSetter = this.getTextSetter();
		if (oldSetter &amp;&amp; oldSetter.isShown())  // has a old setter
		{
			this.applySetter(oldSetter, this.getCurrBlock());
			//oldSetter.dismiss();
			oldSetter._haltPrevShowHideProcess();
		}

		if (!block)  // need create new
		{
			block = this.createNewBlock(this.getEditor().getChemObj(), coord);
		}

		if (!this.isValidBlock(block))
			return;
		this.setCurrBlock(block);

		//this.doneInsertOrModifyBasicObjects([block]);
		//this.getEditor().setSelection([block]);

		// calculate the top-left position of block
		var setterCoord = this.getEditor().getObjectScreenCoord(block, Kekule.Render.CoordPos.CORNER_TL);

		//console.log(block.getCascadedRenderOption('fontSize'));

		var fontSize = block.getCascadedRenderOption('fontSize') || this.getEditor().getEditorConfigs().getInteractionConfigs().getAtomSetterFontSize();
		fontSize *= (this.getEditor().getZoom() || 1);
		var fontName = block.getCascadedRenderOption('fontFamily') || '';
		//var posAdjust = fontSize / 1.5;  // adjust position to align to atom center
		var text = this.getBlockText(block);
		var setter = this.getTextSetterWidget(true);
		setter._applied = false;

		//console.log(block, text, slabel);
		setter.setValue(text);
		var slabel = text || Kekule.$L('ChemWidgetTexts.CAPTION_TEXTBLOCK_INIT'); //Kekule.ChemWidgetTexts.CAPTION_TEXTBLOCK_INIT;
		setter.setPlaceholder(slabel);

		var parentElem = this.getEditor().getCoreElement();
		setter.appendToElem(parentElem);  // ensure setter widget is a child of parentElem, since popup show may change the parent each time

		//setter.setValue('hehr');
		//setter.setIsPopup(true);
		var style = setter.getElement().style;
		style.position = 'absolute';
		style.fontSize = fontSize + 'px';
		style.left = setterCoord.x + 'px';
		style.top = setterCoord.y + 'px';
		style.fontFamily = fontName;
		/*
		style.marginTop = -posAdjust + 'px';
		style.marginLeft = -posAdjust + 'px';
		*/
		setter.show(null, null, Kekule.Widget.ShowHideType.POPUP);

		(function()
		{
			setter.selectAll();
			setter.focus();
		}).defer();
	}
});
// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.TextBlockIaController, Kekule.Editor.ChemSpaceEditor);


/**
 * Controller to add or edit image block in document.
 * @class
 * @augments Kekule.Editor.ContentBlockIaController
 */
Kekule.Editor.ImageBlockIaController = Class.create(Kekule.Editor.ContentBlockIaController,
/** @lends Kekule.Editor.ImageBlockIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.ImageBlockIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this._operAddBlock = null;  // private
		this._imgProbeElem = null;
		this._actionOpenFile = this.createOpenAction();
	},
	doFinalize: function()
	{
		if (this._actionOpenFile)
			this.actionOpenFile.finalize();
	},
	/** @private */
	initProperties: function()
	{
		//this.defineProp('currBlock', {'dataType': DataType.OBJECT, 'serializable': false});  // private
	},

	/**
	 * Check if obj is a valid text block and can be edited.
	 * @param {Kekule.ChemObject} obj
	 * @returns {Bool}
	 * @private
	 */
	isValidBlock: function(obj)
	{
		return obj instanceof Kekule.ImageBlock;
	},

	/** @private */
	createNewBlock: function(chemSpace, coord, size, src)
	{
		var editor = this.getEditor();
		if (!editor.canCreateNewChild())
			return null;

		editor.beginUpdateObject();
		try
		{
			var block = new Kekule.ImageBlock();
			if (src)
				block.setSrc(src);
			if (size)
				block.setSize2D(size);
			//chemSpace.appendChild(block);
			editor.setObjectScreenCoord(block, coord, Kekule.Render.CoordPos.CORNER_TL);
			var addOperation = new Kekule.ChemObjOperation.Add(block, chemSpace, null, editor);
			this._operAddBlock = addOperation;
		}
		finally
		{
			editor.endUpdateObject();
		}
		return block;
	},
	/** @private */
	_getImgFilters: function()
	{
		// add png, jpg, gif and svg
		var result = [
			{'title': Kekule.$L('WidgetTexts.TITLE_IMG_FORMAT_PNG'), 'filter': '.png'},
			{'title': Kekule.$L('WidgetTexts.TITLE_IMG_FORMAT_JPG'), 'filter': '.jpg,.jpeg'},
			{'title': Kekule.$L('WidgetTexts.TITLE_IMG_FORMAT_GIF'), 'filter': '.gif'},
			{'title': Kekule.$L('WidgetTexts.TITLE_IMG_FORMAT_SVG'), 'filter': '.svg'},
			Kekule.NativeServices.FILTER_ALL_SUPPORT,
			Kekule.NativeServices.FILTER_ANY
		];
		return result;
	},
	/** @private */
	createOpenAction: function()
	{
		var result = new Kekule.ActionFileOpen();
		result.setFilters(this._getImgFilters());
		result.on('open', this.reactImageFileOpen, this);
		return result;
	},
	/** @private */
	reactImageFileOpen: function(e)
	{
		var file = e.file;
		if (file)
		{
			var self = this;
			var reader = new FileReader();
			reader.addEventListener('load', function(){
				var imgElem = self._getImageProbeElem();
				var doc = imgElem.ownerDocument;
				// hide imgElem and append it to body to calculate size
				//imgElem.style.display = 'none';
				//doc.body.appendChild(imgElem);
				try
				{
					// clear img prev width/height
					delete imgElem.width;
					delete imgElem.height;
				}
				catch(e)
				{

				}
				imgElem.src = reader.result;
				var editor = self.getEditor();
				//(function(){ console.log(imgElem.width, imgElem.height); }).defer();
				(function(){
					var size = {'x': imgElem.width, 'y': imgElem.height};
					if (size.x &lt;= 0 || size.y &lt;= 0)  // empty image
					{
						Kekule.error(Kekule.$L('ErrorMsg.INVALID_OR_EMPTY_IMAGE'));
						return;
					}
					//console.log('imgSize', size);
					//imgElem.parentNode.removeChild(imgElem);
					//size = editor.translateCoord(size, Kekule.Editor.CoordSys.SCREEN, Kekule.Editor.CoordSys.CHEM);
					//console.log('transSize', size);
					var coord1 = self._currCoord;
					var contextCoord1 = editor.objCoordToContext(coord1);
					var contextCoord2 = Kekule.CoordUtils.add(contextCoord1, size);
					var coord2 = editor.contextCoordToObj(contextCoord2);
					var size = Kekule.CoordUtils.substract(coord2, coord1);
					size = Kekule.CoordUtils.absValue(size);

					var currBlock = self.getCurrBlock();
					var oper;
					var chemSpace = editor.getChemObj();
					if (currBlock)  // modify existed
					{
						oper = new Kekule.ChemObjOperation.Modify(currBlock, {'src': reader.result, 'size2D': size});
					}
					else  // create new
					{
						var block = self.createNewBlock(self.getEditor().getChemObj(), self._currCoord, size, reader.result);
						self.setCurrBlock(block);
						oper = new Kekule.ChemObjOperation.Add(block, chemSpace, null, editor);
					}
					if (oper)
					{
						//editor.beginUpdateObject();
						try
						{
							oper.execute();
							if (editor &amp;&amp; editor.getEnableOperHistory())
								editor.pushOperation(oper);

							self.doneInsertOrModifyBasicObjects([self.getCurrBlock()]);
						}
						finally
						{
							//editor.endUpdateObject();
						}
					}
				}).defer();  // execute later, get accurate image size
			});
			reader.readAsDataURL(file);
		}
	},
	/** @private */
	_getImageProbeElem: function()
	{
		if (!this._imgProbeElem)
		{
			var doc = this.getEditor().getElement().ownerDocument;
			this._imgProbeElem = doc.createElement('img');
		}
		return this._imgProbeElem;
	},

	/** @private */
	execute: function(chemSpace, baseCoord, block)
	{
		this.setCurrBlock(block);
		this._currCoord = baseCoord;
		this._actionOpenFile.execute(this.getEditor());
	}
});
// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.ImageBlockIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Controller to explicitly create attached markers to a existing object.
 * @class
 * @augments Kekule.Editor.BaseEditorIaController
 *
 * @property {Class} markerClass Class of marker that should be created.
 * @property {Class} targetClass Class of the legal parent object of newly create marker.
 * @property {Hash} initialPropValues Property values set to newly created marker.
 */
Kekule.Editor.AttachedMarkerIaController = Class.create(Kekule.Editor.BaseEditorIaController,
/** @lends Kekule.Editor.AttachedMarkerIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.AttachedMarkerIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('markerClass', {'dataType': DataType.CLASS, 'serializable': false});
		this.defineProp('targetClass', {'dataType': DataType.CLASS, 'serializable': false});
		this.defineProp('markerClassName', {'dataType': DataType.STRING,
			'getter': function() { return ClassEx.getClassName(this.getMarkerClass()); },
			'setter': function(value) { this.setMarkerClass(ClassEx.findClass(value)); }
		});
		this.defineProp('targetClassName', {'dataType': DataType.STRING,
			'getter': function() { return ClassEx.getClassName(this.getTargetClass()); },
			'setter': function(value) { this.setTargetClass(ClassEx.findClass(value)); }
		});
		this.defineProp('initialPropValues', {'dataType': DataType.HASH});
	},

	/** @ignore */
	canInteractWithObj: function($super, obj)
	{
		return this.isValidTarget(obj);
	},

	/**
	 * Check if obj is a valid object to add marker.
	 * @param {Kekule.ChemObject} obj
	 * @returns {Bool}
	 * @private
	 */
	isValidTarget: function(obj)
	{
		var targetClass = this.getTargetClass();
		return (obj instanceof targetClass) || !targetClass;
	},

	/** @private */
	createMarker: function()
	{
		var result;
		var markerClass = this.getMarkerClass();
		if (markerClass)
		{
			result = new markerClass();
			var initValues = this.getInitialPropValues();
			if (initValues &amp;&amp; result &amp;&amp; result.setPropValues)
			{
				result.setPropValues(initValues);
			}
		}
		return result;
	},

	/** @private */
	createOperations: function(targetObj)
	{
		var result;
		var marker = this.createMarker();
		if (marker)  // add to target object
		{
			result = new Kekule.ChemObjOperation.Add(marker, targetObj, null, this.getEditor());
		}
		return [result];
	},

	/**
	 * Execute on the target object, add a new marker.
	 * @param {Kekule.ChemObject} targetObj
	 * @private
	 */
	apply: function(targetObj)
	{
		var operations = this.createOperations(targetObj);
		var oper = (operations.length &lt;= 0)? null:
				(operations.length === 1)? operations[0]:
				new Kekule.MacroOperation(operations);
		if (oper)
		{
			oper.execute();
			var editor = this.getEditor();
			if (editor &amp;&amp; editor.getEnableOperHistory())
			{
				editor.pushOperation(oper);
			}
		}
	},

	/** @private */
	react_pointerup: function(e)
	{
		if (e.getButton() === Kekule.X.Event.MouseButton.LEFT)
		{
			//this.getEditor().setSelection(null);
			var coord = this._getEventMouseCoord(e);
			{
				var boundItem = this.getEditor().getTopmostBoundInfoAtCoord(coord, null, this.getCurrBoundInflation());
				if (boundItem)
				{
					var obj = boundItem.obj;
					if (this.isValidTarget(obj))  // can add marker to this object
					{
						this.apply(obj);
						e.preventDefault();
						e.stopPropagation();
					}
					return true;  // important
				}
			}
		}
	}
});
Kekule.Editor.IaControllerManager.register(Kekule.Editor.AttachedMarkerIaController, Kekule.Editor.ChemSpaceEditor);

/**
 * Controller to set atom/group charge and radical.
 * @class
 * @augments Kekule.Editor.AttachedMarkerIaController
 *
 * @property {Number} chargeInc The node's charge will become charge + chargeInc after execution of controller.
 * @property {Number} charge The node's charge will become this value after execution of controller.
 * @property {Int} radical Radical type set to node
 */
Kekule.Editor.MolNodeChargeIaController = Class.create(Kekule.Editor.AttachedMarkerIaController,
/** @lends Kekule.Editor.MolNodeChargeIaController# */
{
	/** @private */
	CLASS_NAME: 'Kekule.Editor.MolNodeChargeIaController',
	/** @construct */
	initialize: function($super, editor)
	{
		$super(editor);
		this.setChargeInc(1);  // default is +1
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('chargeInc', {'dataType': DataType.NUMBER, 'serializable': false});
		this.defineProp('charge', {'dataType': DataType.NUMBER, 'serializable': false});
		this.defineProp('radical', {'dataType': DataType.INT, 'serializable': false});
		this.defineProp('currNode', {'dataType': DataType.OBJECT, 'serializable': false});  // private
	},
	initPropValues: function($super)
	{
		$super();
		this.setTargetClass(Kekule.ChemStructureNode);
	},

	/** @private */
	createOperations: function(node)
	{
		var result;
		// check charge
		var chargeModified = false;
		var radicalModified = false;
		var modifiedData = {};
		var charge = node.getCharge();
		if (Kekule.ObjUtils.notUnset(this.getCharge()))
		{
			if (charge !== this.getCharge())
			{
				modifiedData.charge = this.getCharge();
				chargeModified = true;
			}
		}
		else if (this.getChargeInc())
		{
			charge += this.getChargeInc();
			modifiedData.charge = charge;
			chargeModified = true;
		}
		var radical = node.getRadical();
		if (this.getRadical() !== radical)
		{
			//console.log(radical, this.getRadical());
			modifiedData.radical = this.getRadical();
			radicalModified = true;
		}

		var result = [];
		// add or remove marker operation
		var markerOperations = [];
		var marker;
		var editor = this.getEditor();
		if (chargeModified)
		{
			var chargeMarker = node.fetchChargeMarker(false);  // do not auto create
			if (modifiedData.charge !== 0 &amp;&amp; !chargeMarker)
			{
				// need add new charge marker
				marker = new Kekule.ChemMarker.Charge();
				marker.setValue(modifiedData.charge);
				markerOperations.push(new Kekule.ChemObjOperation.Add(marker, node, null, editor));
			}
			if (modifiedData.charge === 0 &amp;&amp; chargeMarker)
			{
				// need remove existing charge marker
				markerOperations.push(new Kekule.ChemObjOperation.Remove(chargeMarker, null, null, editor));
			}
		}
		if (radicalModified)
		{
			var radicalMarker = node.fetchRadicalMarker(false);  // do not auto create
			if (modifiedData.radical !== 0 &amp;&amp; !radicalMarker)
			{
				// need add new radical marker
				marker = new Kekule.ChemMarker.Radical();
				marker.setValue(modifiedData.radical);
				markerOperations.push(new Kekule.ChemObjOperation.Add(marker, node, null, editor));
			}
			if (modifiedData.radical === 0 &amp;&amp; radicalMarker)
			{
				// need remove existing radical marker
				markerOperations.push(new Kekule.ChemObjOperation.Remove(radicalMarker, null, null, editor));
			}
		}
		result = result.concat(markerOperations);

		// modifcation operation
		var propModifyOper;
		if (chargeModified || radicalModified)
		{
			propModifyOper = new Kekule.ChemObjOperation.Modify(node, modifiedData, this.getEditor());
			result.push(propModifyOper);
		}

		return result;
	}
});

// register
Kekule.Editor.IaControllerManager.register(Kekule.Editor.MolNodeChargeIaController, Kekule.Editor.ChemSpaceEditor);


})();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Class.html">Class</a></li><li><a href="ClassEx.html">ClassEx</a></li><li><a href="JsonObjSerializer.html">JsonObjSerializer</a></li><li><a href="Kekule.AbstractAtom.html">AbstractAtom</a></li><li><a href="Kekule.AbstractConfigs.html">AbstractConfigs</a></li><li><a href="Kekule.Action.html">Action</a></li><li><a href="Kekule.ActionFileSave.html">ActionFileSave</a></li><li><a href="Kekule.ActionList.html">ActionList</a></li><li><a href="Kekule.ActionManager.html">ActionManager</a></li><li><a href="Kekule.ArrayUtils.html">ArrayUtils</a></li><li><a href="Kekule.Atom.html">Atom</a></li><li><a href="Kekule.AtomType.html">AtomType</a></li><li><a href="Kekule.BaseStructureConnector.html">BaseStructureConnector</a></li><li><a href="Kekule.BaseStructureNode.html">BaseStructureNode</a></li><li><a href="Kekule.Bond.html">Bond</a></li><li><a href="Kekule.BondForm.html">BondForm</a></li><li><a href="Kekule.BondFormFactory.html">BondFormFactory</a></li><li><a href="Kekule.BondOrder.html">BondOrder</a></li><li><a href="Kekule.BondStereo.html">BondStereo</a></li><li><a href="Kekule.BondType.html">BondType</a></li><li><a href="Kekule.BoxUtils.html">BoxUtils</a></li><li><a href="Kekule.Calculator.AbstractStructure3DGenerator.html">AbstractStructure3DGenerator</a></li><li><a href="Kekule.Calculator.Base.html">Base</a></li><li><a href="Kekule.CanonicalizationConnectorConnectedObjsSorter.html">CanonicalizationConnectorConnectedObjsSorter</a></li><li><a href="Kekule.CanonicalizationConnectorSorter.html">CanonicalizationConnectorSorter</a></li><li><a href="Kekule.CanonicalizationCustomExecutor.html">CanonicalizationCustomExecutor</a></li><li><a href="Kekule.CanonicalizationGeneralConnectorConnectedObjsSorter.html">CanonicalizationGeneralConnectorConnectedObjsSorter</a></li><li><a href="Kekule.CanonicalizationGeneralConnectorSorter.html">CanonicalizationGeneralConnectorSorter</a></li><li><a href="Kekule.CanonicalizationIndexer.html">CanonicalizationIndexer</a></li><li><a href="Kekule.CanonicalizationMorganExIndexer.html">CanonicalizationMorganExIndexer</a></li><li><a href="Kekule.CanonicalizationMorganIndexer.html">CanonicalizationMorganIndexer</a></li><li><a href="Kekule.CanonicalizationMorganNodeSorter.html">CanonicalizationMorganNodeSorter</a></li><li><a href="Kekule.CanonicalizationNodeSorter.html">CanonicalizationNodeSorter</a></li><li><a href="Kekule.Canonicalizer.html">Canonicalizer</a></li><li><a href="Kekule.ChemDocument.html">ChemDocument</a></li><li><a href="Kekule.ChemError.html">ChemError</a></li><li><a href="Kekule.ChemMarker.BaseMarker.html">BaseMarker</a></li><li><a href="Kekule.ChemMarker.Charge.html">Charge</a></li><li><a href="Kekule.ChemMarker.ChemPropertyMarker.html">ChemPropertyMarker</a></li><li><a href="Kekule.ChemMarker.Radical.html">Radical</a></li><li><a href="Kekule.ChemMarker.UnbondedElectronSet.html">UnbondedElectronSet</a></li><li><a href="Kekule.ChemObject.html">ChemObject</a></li><li><a href="Kekule.ChemObjList.html">ChemObjList</a></li><li><a href="Kekule.ChemObjOperation.Add.html">Add</a></li><li><a href="Kekule.ChemObjOperation.Base.html">Base</a></li><li><a href="Kekule.ChemObjOperation.Modify.html">Modify</a></li><li><a href="Kekule.ChemObjOperation.MoveAndResize.html">MoveAndResize</a></li><li><a href="Kekule.ChemObjOperation.MoveTo.html">MoveTo</a></li><li><a href="Kekule.ChemObjOperation.Remove.html">Remove</a></li><li><a href="Kekule.ChemSpace.html">ChemSpace</a></li><li><a href="Kekule.ChemSpaceElement.html">ChemSpaceElement</a></li><li><a href="Kekule.ChemStructObjContainer.html">ChemStructObjContainer</a></li><li><a href="Kekule.ChemStructOperation.AddConnector.html">AddConnector</a></li><li><a href="Kekule.ChemStructOperation.AddNode.html">AddNode</a></li><li><a href="Kekule.ChemStructOperation.MergeConnectors.html">MergeConnectors</a></li><li><a href="Kekule.ChemStructOperation.MergeConnectorsBase.html">MergeConnectorsBase</a></li><li><a href="Kekule.ChemStructOperation.MergeConnectorsPreview.html">MergeConnectorsPreview</a></li><li><a href="Kekule.ChemStructOperation.MergeNodes.html">MergeNodes</a></li><li><a href="Kekule.ChemStructOperation.MergeNodesBase.html">MergeNodesBase</a></li><li><a href="Kekule.ChemStructOperation.MergeNodesPreview.html">MergeNodesPreview</a></li><li><a href="Kekule.ChemStructOperation.MergeStructFragment.html">MergeStructFragment</a></li><li><a href="Kekule.ChemStructOperation.RemoveConnector.html">RemoveConnector</a></li><li><a href="Kekule.ChemStructOperation.RemoveNode.html">RemoveNode</a></li><li><a href="Kekule.ChemStructOperation.ReplaceNode.html">ReplaceNode</a></li><li><a href="Kekule.ChemStructOperation.SplitStructFragment.html">SplitStructFragment</a></li><li><a href="Kekule.ChemStructOperation.StandardizeStructFragment.html">StandardizeStructFragment</a></li><li><a href="Kekule.ChemStructureBuilder.html">ChemStructureBuilder</a></li><li><a href="Kekule.ChemStructureConnector.html">ChemStructureConnector</a></li><li><a href="Kekule.ChemStructureNode.html">ChemStructureNode</a></li><li><a href="Kekule.ChemStructureNodeFactory.html">ChemStructureNodeFactory</a></li><li><a href="Kekule.ChemStructureNodeLabels.html">ChemStructureNodeLabels</a></li><li><a href="Kekule.ChemStructureObjectGroup.html">ChemStructureObjectGroup</a></li><li><a href="Kekule.ChemStructureSearcher.html">ChemStructureSearcher</a></li><li><a href="Kekule.ChemStructureUtils.html">ChemStructureUtils</a></li><li><a href="Kekule.ChemTextAnalyzer.html">ChemTextAnalyzer</a></li><li><a href="Kekule.ChemWidget.AbstractUIMarker.html">AbstractUIMarker</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeBallStick.html">ActionDisplayerChangeMolDisplayTypeBallStick</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeBase.html">ActionDisplayerChangeMolDisplayTypeBase</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeBase2D.html">ActionDisplayerChangeMolDisplayTypeBase2D</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeBase3D.html">ActionDisplayerChangeMolDisplayTypeBase3D</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeCondensed.html">ActionDisplayerChangeMolDisplayTypeCondensed</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeSkeletal.html">ActionDisplayerChangeMolDisplayTypeSkeletal</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeSpaceFill.html">ActionDisplayerChangeMolDisplayTypeSpaceFill</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeSticks.html">ActionDisplayerChangeMolDisplayTypeSticks</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeWire.html">ActionDisplayerChangeMolDisplayTypeWire</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerClear.html">ActionDisplayerClear</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerHideHydrogens.html">ActionDisplayerHideHydrogens</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerLoadData.html">ActionDisplayerLoadData</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerLoadFile.html">ActionDisplayerLoadFile</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerReset.html">ActionDisplayerReset</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerResetZoom.html">ActionDisplayerResetZoom</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerSaveFile.html">ActionDisplayerSaveFile</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerZoomIn.html">ActionDisplayerZoomIn</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerZoomOut.html">ActionDisplayerZoomOut</a></li><li><a href="Kekule.ChemWidget.ActionFileOpen.html">ActionFileOpen</a></li><li><a href="Kekule.ChemWidget.ActionFileSave.html">ActionFileSave</a></li><li><a href="Kekule.ChemWidget.ActionLoadFileData.html">ActionLoadFileData</a></li><li><a href="Kekule.ChemWidget.ActionOnDisplayer.html">ActionOnDisplayer</a></li><li><a href="Kekule.ChemWidget.ActionOnViewer.html">ActionOnViewer</a></li><li><a href="Kekule.ChemWidget.ActionViewerChangeMolDisplayTypeStub.html">ActionViewerChangeMolDisplayTypeStub</a></li><li><a href="Kekule.ChemWidget.ActionViewerEdit.html">ActionViewerEdit</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateBase.html">ActionViewerRotateBase</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateBase2D.html">ActionViewerRotateBase2D</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateBase3D.html">ActionViewerRotateBase3D</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateLeft.html">ActionViewerRotateLeft</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateRight.html">ActionViewerRotateRight</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateX.html">ActionViewerRotateX</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateY.html">ActionViewerRotateY</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateZ.html">ActionViewerRotateZ</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayer.Configurator.html">Configurator</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayerConfigs.html">ChemObjDisplayerConfigs</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayerIOConfigs.html">ChemObjDisplayerIOConfigs</a></li><li><a href="Kekule.ChemWidget.ChemObjInserter.html">ChemObjInserter</a></li><li><a href="Kekule.ChemWidget.ChemObjInserter.Configurator.html">Configurator</a></li><li><a href="Kekule.ChemWidget.ComponentWidgetNames.html">ComponentWidgetNames</a></li><li><a href="Kekule.ChemWidget.LoadDataDialog.html">LoadDataDialog</a></li><li><a href="Kekule.ChemWidget.MetaShapeUiMarker.html">MetaShapeUiMarker</a></li><li><a href="Kekule.ChemWidget.MetaShapeUiMarker2DRenderer.html">MetaShapeUiMarker2DRenderer</a></li><li><a href="Kekule.ChemWidget.PeriodicTable.html">PeriodicTable</a></li><li><a href="Kekule.ChemWidget.StructureTreeView.html">StructureTreeView</a></li><li><a href="Kekule.ChemWidget.TextUiMarker.html">TextUiMarker</a></li><li><a href="Kekule.ChemWidget.TextUiMarker2DRenderer.html">TextUiMarker2DRenderer</a></li><li><a href="Kekule.ChemWidget.UiMarker2DRenderer.html">UiMarker2DRenderer</a></li><li><a href="Kekule.ChemWidget.UiMarkerCollection.html">UiMarkerCollection</a></li><li><a href="Kekule.ChemWidget.UiMarkerCollection2DRenderer.html">UiMarkerCollection2DRenderer</a></li><li><a href="Kekule.ChemWidget.UiMarkersRenderer.html">UiMarkersRenderer</a></li><li><a href="Kekule.ChemWidget.Viewer.html">Viewer</a></li><li><a href="Kekule.ChemWidget.Viewer2D.html">Viewer2D</a></li><li><a href="Kekule.ChemWidget.Viewer3D.html">Viewer3D</a></li><li><a href="Kekule.ChemWidget.ViewerBasicInteractionController.html">ViewerBasicInteractionController</a></li><li><a href="Kekule.ChemWidget.ViewerGrid.html">ViewerGrid</a></li><li><a href="Kekule.ChemWidget.ViewerGrid2D.html">ViewerGrid2D</a></li><li><a href="Kekule.ChemWidget.ViewerGrid3D.html">ViewerGrid3D</a></li><li><a href="Kekule.ClassDefineUtils.html">ClassDefineUtils</a></li><li><a href="Kekule.ClassUtils.html">ClassUtils</a></li><li><a href="Kekule.CompositeMolecule.html">CompositeMolecule</a></li><li><a href="Kekule.ConfigPresetMap.html">ConfigPresetMap</a></li><li><a href="Kekule.ContentBlock.html">ContentBlock</a></li><li><a href="Kekule.CoordMode.html">CoordMode</a></li><li><a href="Kekule.CoordUtils.html">CoordUtils</a></li><li><a href="Kekule.DataBingItem.html">DataBingItem</a></li><li><a href="Kekule.DomHelper.html">DomHelper</a></li><li><a href="Kekule.Editor.AbstractRepositoryItem.html">AbstractRepositoryItem</a></li><li><a href="Kekule.Editor.ActionCloneSelection.html">ActionCloneSelection</a></li><li><a href="Kekule.Editor.ActionComposerSetIaController.html">ActionComposerSetIaController</a></li><li><a href="Kekule.Editor.ActionComposerToggleInspector.html">ActionComposerToggleInspector</a></li><li><a href="Kekule.Editor.ActionCopySelection.html">ActionCopySelection</a></li><li><a href="Kekule.Editor.ActionCutSelection.html">ActionCutSelection</a></li><li><a href="Kekule.Editor.ActionEditorNewDoc.html">ActionEditorNewDoc</a></li><li><a href="Kekule.Editor.ActionEditorRedo.html">ActionEditorRedo</a></li><li><a href="Kekule.Editor.ActionEditorUndo.html">ActionEditorUndo</a></li><li><a href="Kekule.Editor.ActionOnComposer.html">ActionOnComposer</a></li><li><a href="Kekule.Editor.ActionOnComposerAdv.html">ActionOnComposerAdv</a></li><li><a href="Kekule.Editor.ActionOnEditor.html">ActionOnEditor</a></li><li><a href="Kekule.Editor.ActionOperUtils.html">ActionOperUtils</a></li><li><a href="Kekule.Editor.ActionPaste.html">ActionPaste</a></li><li><a href="Kekule.Editor.ActionToggleSelectState.html">ActionToggleSelectState</a></li><li><a href="Kekule.Editor.ArrowLineIaController.html">ArrowLineIaController</a></li><li><a href="Kekule.Editor.AttachedMarkerIaController.html">AttachedMarkerIaController</a></li><li><a href="Kekule.Editor.BaseEditor.html">BaseEditor</a></li><li><a href="Kekule.Editor.BaseEditorConfigs.html">BaseEditorConfigs</a></li><li><a href="Kekule.Editor.BaseEditorIaController.html">BaseEditorIaController</a></li><li><a href="Kekule.Editor.BasicEraserIaController.html">BasicEraserIaController</a></li><li><a href="Kekule.Editor.BasicManipulationIaController.html">BasicManipulationIaController</a></li><li><a href="Kekule.Editor.BasicManipulationIaController.ManipulationType.html">ManipulationType</a></li><li><a href="Kekule.Editor.BasicManipulationIaController.State.html">State</a></li><li><a href="Kekule.Editor.BasicMolEraserIaController.html">BasicMolEraserIaController</a></li><li><a href="Kekule.Editor.BasicMolManipulationIaController.html">BasicMolManipulationIaController</a></li><li><a href="Kekule.Editor.ChemSpaceConfigs.html">ChemSpaceConfigs</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html">ChemSpaceEditor</a></li><li><a href="Kekule.Editor.ChemSpaceEditorConfigs.html">ChemSpaceEditorConfigs</a></li><li><a href="Kekule.Editor.ClientDragScrollIaController.html">ClientDragScrollIaController</a></li><li><a href="Kekule.Editor.Composer.html">Composer</a></li><li><a href="Kekule.Editor.Composer.Configurator.html">Configurator</a></li><li><a href="Kekule.Editor.Composer.Settings.html">Settings</a></li><li><a href="Kekule.Editor.ComposerDialog.html">ComposerDialog</a></li><li><a href="Kekule.Editor.ComposerFrame.html">ComposerFrame</a></li><li><a href="Kekule.Editor.ComposerObjModifierToolbar.html">ComposerObjModifierToolbar</a></li><li><a href="Kekule.Editor.ComposerStyleToolbar.html">ComposerStyleToolbar</a></li><li><a href="Kekule.Editor.ContentBlockIaController.html">ContentBlockIaController</a></li><li><a href="Kekule.Editor.CoordSys.html">CoordSys</a></li><li><a href="Kekule.Editor.EditorNexus.html">EditorNexus</a></li><li><a href="Kekule.Editor.FormulaIaController.html">FormulaIaController</a></li><li><a href="Kekule.Editor.IaControllerManager.html">IaControllerManager</a></li><li><a href="Kekule.Editor.ImageBlockIaController.html">ImageBlockIaController</a></li><li><a href="Kekule.Editor.InteractionConfigs.html">InteractionConfigs</a></li><li><a href="Kekule.Editor.MolAtomIaController.html">MolAtomIaController</a></li><li><a href="Kekule.Editor.MolAtomIaController_OLD.html">MolAtomIaController_OLD</a></li><li><a href="Kekule.Editor.MolBondIaController.html">MolBondIaController</a></li><li><a href="Kekule.Editor.MolBondIaController.State.html">State</a></li><li><a href="Kekule.Editor.MolChainRepositoryItem2D.html">MolChainRepositoryItem2D</a></li><li><a href="Kekule.Editor.MolFlexChainIaController.html">MolFlexChainIaController</a></li><li><a href="Kekule.Editor.MolFlexRingIaController.html">MolFlexRingIaController</a></li><li><a href="Kekule.Editor.MolFlexStructureIaController.html">MolFlexStructureIaController</a></li><li><a href="Kekule.Editor.MolNodeChargeIaController.html">MolNodeChargeIaController</a></li><li><a href="Kekule.Editor.MolRepositoryItem2D.html">MolRepositoryItem2D</a></li><li><a href="Kekule.Editor.MolRingIaController.html">MolRingIaController</a></li><li><a href="Kekule.Editor.MolRingRepositoryItem2D.html">MolRingRepositoryItem2D</a></li><li><a href="Kekule.Editor.ObjModifier.Atom.html">Atom</a></li><li><a href="Kekule.Editor.ObjModifier.Base.html">Base</a></li><li><a href="Kekule.Editor.ObjModifier.BaseRenderOptionModifier.html">BaseRenderOptionModifier</a></li><li><a href="Kekule.Editor.ObjModifier.Bond.html">Bond</a></li><li><a href="Kekule.Editor.ObjModifier.Charge.html">Charge</a></li><li><a href="Kekule.Editor.ObjModifier.ChemStructureModifier.html">ChemStructureModifier</a></li><li><a href="Kekule.Editor.ObjModifier.Color.html">Color</a></li><li><a href="Kekule.Editor.ObjModifier.RichText.html">RichText</a></li><li><a href="Kekule.Editor.PathGlyphRepositoryItem2D.html">PathGlyphRepositoryItem2D</a></li><li><a href="Kekule.Editor.RepositoryIaController.html">RepositoryIaController</a></li><li><a href="Kekule.Editor.RepositoryItemManager.html">RepositoryItemManager</a></li><li><a href="Kekule.Editor.RepositoryStructureFragmentIaController.html">RepositoryStructureFragmentIaController</a></li><li><a href="Kekule.Editor.SelectIaController.html">SelectIaController</a></li><li><a href="Kekule.Editor.StoredStructFragmentRepositoryItem2D.html">StoredStructFragmentRepositoryItem2D</a></li><li><a href="Kekule.Editor.StoredSubgroupRepositoryItem2D.html">StoredSubgroupRepositoryItem2D</a></li><li><a href="Kekule.Editor.StructureConfigs.html">StructureConfigs</a></li><li><a href="Kekule.Editor.StructureInsertIaController.html">StructureInsertIaController</a></li><li><a href="Kekule.Editor.StructureUtils.html">StructureUtils</a></li><li><a href="Kekule.Editor.StyleSetterConfigs.html">StyleSetterConfigs</a></li><li><a href="Kekule.Editor.TextBlockIaController.html">TextBlockIaController</a></li><li><a href="Kekule.Editor.TrackInputIaController.html">TrackInputIaController</a></li><li><a href="Kekule.Editor.TrackLayoutOptimizer.html">TrackLayoutOptimizer</a></li><li><a href="Kekule.Editor.TrackParser.html">TrackParser</a></li><li><a href="Kekule.Editor.UiMarkerConfigs.html">UiMarkerConfigs</a></li><li><a href="Kekule.ElectronSet.html">ElectronSet</a></li><li><a href="Kekule.Element.html">Element</a></li><li><a href="Kekule.Error.html">Error</a></li><li><a href="Kekule.Exception.html">Exception</a></li><li><a href="Kekule.ExceptionHandler.html">ExceptionHandler</a></li><li><a href="Kekule.ExceptionLevel.html">ExceptionLevel</a></li><li><a href="Kekule.FactoryUtils.html">FactoryUtils</a></li><li><a href="Kekule.FormulaUtils.html">FormulaUtils</a></li><li><a href="Kekule.GeometryUtils.html">GeometryUtils</a></li><li><a href="Kekule.Glyph.AddSymbol.html">AddSymbol</a></li><li><a href="Kekule.Glyph.Arc.html">Arc</a></li><li><a href="Kekule.Glyph.ArrowSide.html">ArrowSide</a></li><li><a href="Kekule.Glyph.ArrowType.html">ArrowType</a></li><li><a href="Kekule.Glyph.Base.html">Base</a></li><li><a href="Kekule.Glyph.HeatSymbol.html">HeatSymbol</a></li><li><a href="Kekule.Glyph.NodeType.html">NodeType</a></li><li><a href="Kekule.Glyph.PathGlyph.html">PathGlyph</a></li><li><a href="Kekule.Glyph.PathGlyphArcConnector.html">PathGlyphArcConnector</a></li><li><a href="Kekule.Glyph.PathGlyphArcConnectorControlNode.html">PathGlyphArcConnectorControlNode</a></li><li><a href="Kekule.Glyph.PathGlyphConnector.html">PathGlyphConnector</a></li><li><a href="Kekule.Glyph.PathGlyphConnectorControlNode.html">PathGlyphConnectorControlNode</a></li><li><a href="Kekule.Glyph.PathGlyphNode.html">PathGlyphNode</a></li><li><a href="Kekule.Glyph.PathType.html">PathType</a></li><li><a href="Kekule.Glyph.Polygon.html">Polygon</a></li><li><a href="Kekule.Glyph.StraightLine.html">StraightLine</a></li><li><a href="Kekule.Graph.html">Graph</a></li><li><a href="Kekule.GraphAdaptUtils.html">GraphAdaptUtils</a></li><li><a href="Kekule.GraphAlgorithmUtils.html">GraphAlgorithmUtils</a></li><li><a href="Kekule.GraphEdge.html">GraphEdge</a></li><li><a href="Kekule.GraphElement.html">GraphElement</a></li><li><a href="Kekule.GraphVertex.html">GraphVertex</a></li><li><a href="Kekule.HashEx.html">HashEx</a></li><li><a href="Kekule.HybridizationType.html">HybridizationType</a></li><li><a href="Kekule.ImageBlock.html">ImageBlock</a></li><li><a href="Kekule.IO.BaseMdlReader.html">BaseMdlReader</a></li><li><a href="Kekule.IO.BaseMdlWriter.html">BaseMdlWriter</a></li><li><a href="Kekule.IO.ChemDataReader.html">ChemDataReader</a></li><li><a href="Kekule.IO.ChemDataReaderManager.html">ChemDataReaderManager</a></li><li><a href="Kekule.IO.ChemDataType.html">ChemDataType</a></li><li><a href="Kekule.IO.ChemDataWriter.html">ChemDataWriter</a></li><li><a href="Kekule.IO.ChemDataWriterManager.html">ChemDataWriterManager</a></li><li><a href="Kekule.IO.CmlChemStructureReader.html">CmlChemStructureReader</a></li><li><a href="Kekule.IO.CmlDomUtils.html">CmlDomUtils</a></li><li><a href="Kekule.IO.CmlElementHandler.html">CmlElementHandler</a></li><li><a href="Kekule.IO.CmlElementReader.html">CmlElementReader</a></li><li><a href="Kekule.IO.CmlElementReaderFactory.html">CmlElementReaderFactory</a></li><li><a href="Kekule.IO.CmlElementWriter.html">CmlElementWriter</a></li><li><a href="Kekule.IO.CmlElementWriterFactory.html">CmlElementWriterFactory</a></li><li><a href="Kekule.IO.CmlFormulaReader.html">CmlFormulaReader</a></li><li><a href="Kekule.IO.CmlFormulaWriter.html">CmlFormulaWriter</a></li><li><a href="Kekule.IO.CmlListReader.html">CmlListReader</a></li><li><a href="Kekule.IO.CmlListWriter.html">CmlListWriter</a></li><li><a href="Kekule.IO.CmlMetaDataListReader.html">CmlMetaDataListReader</a></li><li><a href="Kekule.IO.CmlMetaDataReader.html">CmlMetaDataReader</a></li><li><a href="Kekule.IO.CmlMoleculeReader.html">CmlMoleculeReader</a></li><li><a href="Kekule.IO.CmlMoleculeWriter.html">CmlMoleculeWriter</a></li><li><a href="Kekule.IO.CmlNameReader.html">CmlNameReader</a></li><li><a href="Kekule.IO.CmlReactionReader.html">CmlReactionReader</a></li><li><a href="Kekule.IO.CmlReactionReagentReader.html">CmlReactionReagentReader</a></li><li><a href="Kekule.IO.CmlReactionWriter.html">CmlReactionWriter</a></li><li><a href="Kekule.IO.CmlReader.html">CmlReader</a></li><li><a href="Kekule.IO.CmlRootReader.html">CmlRootReader</a></li><li><a href="Kekule.IO.CmlRootWriter.html">CmlRootWriter</a></li><li><a href="Kekule.IO.CmlScalarReader.html">CmlScalarReader</a></li><li><a href="Kekule.IO.CmlScalarWriter.html">CmlScalarWriter</a></li><li><a href="Kekule.IO.CmlUtils.html">CmlUtils</a></li><li><a href="Kekule.IO.CmlWriter.html">CmlWriter</a></li><li><a href="Kekule.IO.DataFormat.html">DataFormat</a></li><li><a href="Kekule.IO.DataFormatsManager.html">DataFormatsManager</a></li><li><a href="Kekule.IO.KcjReader.html">KcjReader</a></li><li><a href="Kekule.IO.KcjWriter.html">KcjWriter</a></li><li><a href="Kekule.IO.KcxReader.html">KcxReader</a></li><li><a href="Kekule.IO.KcxWriter.html">KcxWriter</a></li><li><a href="Kekule.IO.MDL.html">MDL</a></li><li><a href="Kekule.IO.Mdl2kCTabWriter.html">Mdl2kCTabWriter</a></li><li><a href="Kekule.IO.Mdl3kCTabWriter.html">Mdl3kCTabWriter</a></li><li><a href="Kekule.IO.Mdl3kMoleculeCTabWriter.html">Mdl3kMoleculeCTabWriter</a></li><li><a href="Kekule.IO.MdlBlockHandler.html">MdlBlockHandler</a></li><li><a href="Kekule.IO.MdlBlockReader.html">MdlBlockReader</a></li><li><a href="Kekule.IO.MdlBlockWriter.html">MdlBlockWriter</a></li><li><a href="Kekule.IO.MdlMoleculeReader.html">MdlMoleculeReader</a></li><li><a href="Kekule.IO.MdlMoleculeWriter.html">MdlMoleculeWriter</a></li><li><a href="Kekule.IO.MdlMolReader.html">MdlMolReader</a></li><li><a href="Kekule.IO.MdlMolWriter.html">MdlMolWriter</a></li><li><a href="Kekule.IO.MdlReactionReader.html">MdlReactionReader</a></li><li><a href="Kekule.IO.MdlReactionWriter.html">MdlReactionWriter</a></li><li><a href="Kekule.IO.MdlReader.html">MdlReader</a></li><li><a href="Kekule.IO.MdlRxnReader.html">MdlRxnReader</a></li><li><a href="Kekule.IO.MdlRxnWriter.html">MdlRxnWriter</a></li><li><a href="Kekule.IO.MdlSdReader.html">MdlSdReader</a></li><li><a href="Kekule.IO.MdlSdWriter.html">MdlSdWriter</a></li><li><a href="Kekule.IO.MdlStructDataWriter.html">MdlStructDataWriter</a></li><li><a href="Kekule.IO.MdlStructureFragmentReader.html">MdlStructureFragmentReader</a></li><li><a href="Kekule.IO.MdlStructureFragmentWriter.html">MdlStructureFragmentWriter</a></li><li><a href="Kekule.IO.MdlUtils.html">MdlUtils</a></li><li><a href="Kekule.IO.MdlWriter.html">MdlWriter</a></li><li><a href="Kekule.IO.MimeType.html">MimeType</a></li><li><a href="Kekule.IO.SMILES.html">SMILES</a></li><li><a href="Kekule.IO.SmilesMolWriter.html">SmilesMolWriter</a></li><li><a href="Kekule.IO.SmilesUtils.html">SmilesUtils</a></li><li><a href="Kekule.Isotope.html">Isotope</a></li><li><a href="Kekule.IsotopeFactory.html">IsotopeFactory</a></li><li><a href="Kekule.MacroOperation.html">MacroOperation</a></li><li><a href="Kekule.MapEx.html">MapEx</a></li><li><a href="Kekule.MatrixUtils.html">MatrixUtils</a></li><li><a href="Kekule.Mdl3kTextBuffer.html">Mdl3kTextBuffer</a></li><li><a href="Kekule.MolecularFormula.html">MolecularFormula</a></li><li><a href="Kekule.Molecule.html">Molecule</a></li><li><a href="Kekule.MoleculeGroup.html">MoleculeGroup</a></li><li><a href="Kekule.MoleculeList.html">MoleculeList</a></li><li><a href="Kekule.MolStandardizer.html">MolStandardizer</a></li><li><a href="Kekule.MolStereoUtils.html">MolStereoUtils</a></li><li><a href="Kekule.NumUtils.html">NumUtils</a></li><li><a href="Kekule.ObjComparer.html">ObjComparer</a></li><li><a href="Kekule.ObjPropSettingManager.html">ObjPropSettingManager</a></li><li><a href="Kekule.ObjUtils.html">ObjUtils</a></li><li><a href="Kekule.Operation.html">Operation</a></li><li><a href="Kekule.Operation.State.html">State</a></li><li><a href="Kekule.OperationHistory.html">OperationHistory</a></li><li><a href="Kekule.PredefinedResLoader.html">PredefinedResLoader</a></li><li><a href="Kekule.PredefinedResReferer.html">PredefinedResReferer</a></li><li><a href="Kekule.PropertyEditor.ArrayEditor.html">ArrayEditor</a></li><li><a href="Kekule.PropertyEditor.BaseEditor.html">BaseEditor</a></li><li><a href="Kekule.PropertyEditor.BoolEditor.html">BoolEditor</a></li><li><a href="Kekule.PropertyEditor.ChemCoordEditor.html">ChemCoordEditor</a></li><li><a href="Kekule.PropertyEditor.ChemCoordSizeFieldEditor.html">ChemCoordSizeFieldEditor</a></li><li><a href="Kekule.PropertyEditor.ChemIdEditor.html">ChemIdEditor</a></li><li><a href="Kekule.PropertyEditor.ChemOptionObjectEditor.html">ChemOptionObjectEditor</a></li><li><a href="Kekule.PropertyEditor.ChemRender2DOptionsEditor.html">ChemRender2DOptionsEditor</a></li><li><a href="Kekule.PropertyEditor.ChemRender3DOptionsEditor.html">ChemRender3DOptionsEditor</a></li><li><a href="Kekule.PropertyEditor.ChemSizeEditor.html">ChemSizeEditor</a></li><li><a href="Kekule.PropertyEditor.ColorEditor.html">ColorEditor</a></li><li><a href="Kekule.PropertyEditor.EditorAttributes.html">EditorAttributes</a></li><li><a href="Kekule.PropertyEditor.EditorMananger.html">EditorMananger</a></li><li><a href="Kekule.PropertyEditor.EnumEditor.html">EnumEditor</a></li><li><a href="Kekule.PropertyEditor.GlyphPathParamsEditor.html">GlyphPathParamsEditor</a></li><li><a href="Kekule.PropertyEditor.ObjectEditor.html">ObjectEditor</a></li><li><a href="Kekule.PropertyEditor.ObjectExEditor.html">ObjectExEditor</a></li><li><a href="Kekule.PropertyEditor.ObjectFieldEditor.html">ObjectFieldEditor</a></li><li><a href="Kekule.PropertyEditor.SelectEditor.html">SelectEditor</a></li><li><a href="Kekule.PropertyEditor.SimpleEditor.html">SimpleEditor</a></li><li><a href="Kekule.PropertyEditor.TextEditor.html">TextEditor</a></li><li><a href="Kekule.Pseudoatom.html">Pseudoatom</a></li><li><a href="Kekule.PseudoatomType.html">PseudoatomType</a></li><li><a href="Kekule.RadicalOrder.html">RadicalOrder</a></li><li><a href="Kekule.Reaction.html">Reaction</a></li><li><a href="Kekule.ReactionComponent.html">ReactionComponent</a></li><li><a href="Kekule.ReactionList.html">ReactionList</a></li><li><a href="Kekule.ReactionRole.html">ReactionRole</a></li><li><a href="Kekule.RectUtils.html">RectUtils</a></li><li><a href="Kekule.Render.Abstract2DDrawBridge.html">Abstract2DDrawBridge</a></li><li><a href="Kekule.Render.Abstract3DDrawBridge.html">Abstract3DDrawBridge</a></li><li><a href="Kekule.Render.AbstractRenderer.html">AbstractRenderer</a></li><li><a href="Kekule.Render.AbstractTextDrawBridge.html">AbstractTextDrawBridge</a></li><li><a href="Kekule.Render.Base2DRenderer.html">Base2DRenderer</a></li><li><a href="Kekule.Render.Base3DRenderer.html">Base3DRenderer</a></li><li><a href="Kekule.Render.BaseGlyph2DRenderer.html">BaseGlyph2DRenderer</a></li><li><a href="Kekule.Render.BaseRichTextDrawer.html">BaseRichTextDrawer</a></li><li><a href="Kekule.Render.BoundInfoRecorder.html">BoundInfoRecorder</a></li><li><a href="Kekule.Render.CanvasRendererBridge.html">CanvasRendererBridge</a></li><li><a href="Kekule.Render.ChemCtab2DRenderer.html">ChemCtab2DRenderer</a></li><li><a href="Kekule.Render.ChemCtab3DRenderer.html">ChemCtab3DRenderer</a></li><li><a href="Kekule.Render.ChemDisplayTextUtils.html">ChemDisplayTextUtils</a></li><li><a href="Kekule.Render.ChemObj2DRenderer.html">ChemObj2DRenderer</a></li><li><a href="Kekule.Render.ChemObj3DRenderer.html">ChemObj3DRenderer</a></li><li><a href="Kekule.Render.ChemObjGroupList2DRenderer.html">ChemObjGroupList2DRenderer</a></li><li><a href="Kekule.Render.ChemObjGroupList3DRenderer.html">ChemObjGroupList3DRenderer</a></li><li><a href="Kekule.Render.ChemObjPainter.html">ChemObjPainter</a></li><li><a href="Kekule.Render.ChemObjPainter2D.html">ChemObjPainter2D</a></li><li><a href="Kekule.Render.ChemObjPainter3D.html">ChemObjPainter3D</a></li><li><a href="Kekule.Render.ChemSpace2DRenderer.html">ChemSpace2DRenderer</a></li><li><a href="Kekule.Render.ChemSpace3DRenderer.html">ChemSpace3DRenderer</a></li><li><a href="Kekule.Render.ChemSpaceElement2DRenderer.html">ChemSpaceElement2DRenderer</a></li><li><a href="Kekule.Render.ChemSpaceElement3DRenderer.html">ChemSpaceElement3DRenderer</a></li><li><a href="Kekule.Render.ColorConfigs.html">ColorConfigs</a></li><li><a href="Kekule.Render.CompositeMolecule2DRenderer.html">CompositeMolecule2DRenderer</a></li><li><a href="Kekule.Render.CompositeMolecule3DRenderer.html">CompositeMolecule3DRenderer</a></li><li><a href="Kekule.Render.CompositeObj2DRenderer.html">CompositeObj2DRenderer</a></li><li><a href="Kekule.Render.CompositeObj3DRenderer.html">CompositeObj3DRenderer</a></li><li><a href="Kekule.Render.CompositeRenderer.html">CompositeRenderer</a></li><li><a href="Kekule.Render.ConnectorDrawUtils.html">ConnectorDrawUtils</a></li><li><a href="Kekule.Render.CoordSystem.html">CoordSystem</a></li><li><a href="Kekule.Render.Ctab2DRenderer.html">Ctab2DRenderer</a></li><li><a href="Kekule.Render.DisplayLabelConfigs.html">DisplayLabelConfigs</a></li><li><a href="Kekule.Render.DrawPathUtils.html">DrawPathUtils</a></li><li><a href="Kekule.Render.DummyRenderer.html">DummyRenderer</a></li><li><a href="Kekule.Render.Formula2DRenderer.html">Formula2DRenderer</a></li><li><a href="Kekule.Render.GeneralConfigs.html">GeneralConfigs</a></li><li><a href="Kekule.Render.ImageBlock2DRenderer.html">ImageBlock2DRenderer</a></li><li><a href="Kekule.Render.Length3DConfigs.html">Length3DConfigs</a></li><li><a href="Kekule.Render.LengthConfigs.html">LengthConfigs</a></li><li><a href="Kekule.Render.MetaShapeUtils.html">MetaShapeUtils</a></li><li><a href="Kekule.Render.Model3DConfigs.html">Model3DConfigs</a></li><li><a href="Kekule.Render.Molecule3DDisplayConfigs.html">Molecule3DDisplayConfigs</a></li><li><a href="Kekule.Render.MoleculeDisplayConfigs.html">MoleculeDisplayConfigs</a></li><li><a href="Kekule.Render.ObjUtils.html">ObjUtils</a></li><li><a href="Kekule.Render.PathGlyph2DRenderer.html">PathGlyph2DRenderer</a></li><li><a href="Kekule.Render.PathGlyphCtab2DRenderer.html">PathGlyphCtab2DRenderer</a></li><li><a href="Kekule.Render.PredefinedConfigsMap.html">PredefinedConfigsMap</a></li><li><a href="Kekule.Render.RaphaelRendererBridge.html">RaphaelRendererBridge</a></li><li><a href="Kekule.Render.Reaction2DRenderer.html">Reaction2DRenderer</a></li><li><a href="Kekule.Render.Render2DConfigs.html">Render2DConfigs</a></li><li><a href="Kekule.Render.Render3DConfigs.html">Render3DConfigs</a></li><li><a href="Kekule.Render.Render3DEnvironmentConfigs.html">Render3DEnvironmentConfigs</a></li><li><a href="Kekule.Render.Render3DOptionUtils.html">Render3DOptionUtils</a></li><li><a href="Kekule.Render.RenderColorUtils.html">RenderColorUtils</a></li><li><a href="Kekule.Render.Renderer2DFactory.html">Renderer2DFactory</a></li><li><a href="Kekule.Render.Renderer3DFactory.html">Renderer3DFactory</a></li><li><a href="Kekule.Render.RenderOptionUtils.html">RenderOptionUtils</a></li><li><a href="Kekule.Render.RichText.html">RichText</a></li><li><a href="Kekule.Render.RichTextBased2DRenderer.html">RichTextBased2DRenderer</a></li><li><a href="Kekule.Render.RichTextUtils.html">RichTextUtils</a></li><li><a href="Kekule.Render.StructFragment2DRenderer.html">StructFragment2DRenderer</a></li><li><a href="Kekule.Render.StructFragment3DRenderer.html">StructFragment3DRenderer</a></li><li><a href="Kekule.Render.TextBasedChemMarker2DRenderer.html">TextBasedChemMarker2DRenderer</a></li><li><a href="Kekule.Render.TextBlock2DRenderer.html">TextBlock2DRenderer</a></li><li><a href="Kekule.Render.TextDrawUtils.html">TextDrawUtils</a></li><li><a href="Kekule.Render.TextFontConfigs.html">TextFontConfigs</a></li><li><a href="Kekule.Render.ThreeContext.html">ThreeContext</a></li><li><a href="Kekule.Render.ThreeRendererBridge.html">ThreeRendererBridge</a></li><li><a href="Kekule.Render.UnbondedElectronSetRenderer.html">UnbondedElectronSetRenderer</a></li><li><a href="Kekule.RoleMapUtils.html">RoleMapUtils</a></li><li><a href="Kekule.Scalar.html">Scalar</a></li><li><a href="Kekule.StructureConnectionTable.html">StructureConnectionTable</a></li><li><a href="Kekule.StructureFragment.html">StructureFragment</a></li><li><a href="Kekule.StructureFragmentGroup.html">StructureFragmentGroup</a></li><li><a href="Kekule.StructureFragmentShadow.html">StructureFragmentShadow</a></li><li><a href="Kekule.StrUtils.html">StrUtils</a></li><li><a href="Kekule.SubGroup.html">SubGroup</a></li><li><a href="Kekule.TextBlock.html">TextBlock</a></li><li><a href="Kekule.TextLinesBuffer.html">TextLinesBuffer</a></li><li><a href="Kekule.TokenAnalyzer.html">TokenAnalyzer</a></li><li><a href="Kekule.TwoTupleMapEx.html">TwoTupleMapEx</a></li><li><a href="Kekule.UnbondedElectronSet.html">UnbondedElectronSet</a></li><li><a href="Kekule.ValenceUtils.html">ValenceUtils</a></li><li><a href="Kekule.VariableAtom.html">VariableAtom</a></li><li><a href="Kekule.Widget.ActionOpenConfigWidget.html">ActionOpenConfigWidget</a></li><li><a href="Kekule.Widget.ArrayDataSet.html">ArrayDataSet</a></li><li><a href="Kekule.Widget.AutoLauncher.html">AutoLauncher</a></li><li><a href="Kekule.Widget.BaseTransition.html">BaseTransition</a></li><li><a href="Kekule.Widget.BaseWidget.html">BaseWidget</a></li><li><a href="Kekule.Widget.Button.html">Button</a></li><li><a href="Kekule.Widget.Button.Kinds.html">Kinds</a></li><li><a href="Kekule.Widget.ButtonGroup.html">ButtonGroup</a></li><li><a href="Kekule.Widget.ButtonTextBox.html">ButtonTextBox</a></li><li><a href="Kekule.Widget.CheckBox.html">CheckBox</a></li><li><a href="Kekule.Widget.CheckButton.html">CheckButton</a></li><li><a href="Kekule.Widget.Clipboard.html">Clipboard</a></li><li><a href="Kekule.Widget.ColorDropButton.html">ColorDropButton</a></li><li><a href="Kekule.Widget.ColorDropTextBox.html">ColorDropTextBox</a></li><li><a href="Kekule.Widget.ColorPicker.html">ColorPicker</a></li><li><a href="Kekule.Widget.ColorPicker.SpecialColors.html">SpecialColors</a></li><li><a href="Kekule.Widget.ComboBox.html">ComboBox</a></li><li><a href="Kekule.Widget.ComboTextBox.html">ComboTextBox</a></li><li><a href="Kekule.Widget.CompactButtonSet.html">CompactButtonSet</a></li><li><a href="Kekule.Widget.Container.html">Container</a></li><li><a href="Kekule.Widget.Css3GrowTransition.html">Css3GrowTransition</a></li><li><a href="Kekule.Widget.Css3OpacityTrans.html">Css3OpacityTrans</a></li><li><a href="Kekule.Widget.Css3SlideTransition.html">Css3SlideTransition</a></li><li><a href="Kekule.Widget.Css3TransformGrowTransition.html">Css3TransformGrowTransition</a></li><li><a href="Kekule.Widget.Css3TransformTrans.html">Css3TransformTrans</a></li><li><a href="Kekule.Widget.Css3Transition.html">Css3Transition</a></li><li><a href="Kekule.Widget.Css3TransitionSimpleClassCreator.html">Css3TransitionSimpleClassCreator</a></li><li><a href="Kekule.Widget.DataPager.html">DataPager</a></li><li><a href="Kekule.Widget.DataTable.html">DataTable</a></li><li><a href="Kekule.Widget.Dialog.html">Dialog</a></li><li><a href="Kekule.Widget.DialogButtons.html">DialogButtons</a></li><li><a href="Kekule.Widget.DumbWidget.html">DumbWidget</a></li><li><a href="Kekule.Widget.DynamicEvokeHelper.html">DynamicEvokeHelper</a></li><li><a href="Kekule.Widget.EvokeMode.html">EvokeMode</a></li><li><a href="Kekule.Widget.ExceptionHandler.html">ExceptionHandler</a></li><li><a href="Kekule.Widget.FontDetector.html">FontDetector</a></li><li><a href="Kekule.Widget.FontEnumerator.html">FontEnumerator</a></li><li><a href="Kekule.Widget.FormWidget.html">FormWidget</a></li><li><a href="Kekule.Widget.GlobalManager.html">GlobalManager</a></li><li><a href="Kekule.Widget.Glyph.html">Glyph</a></li><li><a href="Kekule.Widget.InteractionController.html">InteractionController</a></li><li><a href="Kekule.Widget.Location.html">Location</a></li><li><a href="Kekule.Widget.Menu.html">Menu</a></li><li><a href="Kekule.Widget.MenuBar.html">MenuBar</a></li><li><a href="Kekule.Widget.MenuItem.html">MenuItem</a></li><li><a href="Kekule.Widget.MoveHelper.html">MoveHelper</a></li><li><a href="Kekule.Widget.MsgGroup.html">MsgGroup</a></li><li><a href="Kekule.Widget.MsgPanel.html">MsgPanel</a></li><li><a href="Kekule.Widget.MsgType.html">MsgType</a></li><li><a href="Kekule.Widget.NestedContainer.html">NestedContainer</a></li><li><a href="Kekule.Widget.ObjectInspector.html">ObjectInspector</a></li><li><a href="Kekule.Widget.ObjPropListEditor.html">ObjPropListEditor</a></li><li><a href="Kekule.Widget.OperHistoryTreeView.html">OperHistoryTreeView</a></li><li><a href="Kekule.Widget.Panel.html">Panel</a></li><li><a href="Kekule.Widget.PlaceHolder.html">PlaceHolder</a></li><li><a href="Kekule.Widget.PopupMenu.html">PopupMenu</a></li><li><a href="Kekule.Widget.PropEditorModifyOperation.html">PropEditorModifyOperation</a></li><li><a href="Kekule.Widget.RadioButton.html">RadioButton</a></li><li><a href="Kekule.Widget.ResizeGripper.html">ResizeGripper</a></li><li><a href="Kekule.Widget.SelectBox.html">SelectBox</a></li><li><a href="Kekule.Widget.ShowHideManager.html">ShowHideManager</a></li><li><a href="Kekule.Widget.ShowHideTransitionSelector.html">ShowHideTransitionSelector</a></li><li><a href="Kekule.Widget.StyleResource.html">StyleResource</a></li><li><a href="Kekule.Widget.StyleResourceManager.html">StyleResourceManager</a></li><li><a href="Kekule.Widget.StyleResourceNames.html">StyleResourceNames</a></li><li><a href="Kekule.Widget.SysMsgGroup.html">SysMsgGroup</a></li><li><a href="Kekule.Widget.TabButtonGroup.html">TabButtonGroup</a></li><li><a href="Kekule.Widget.TabPage.html">TabPage</a></li><li><a href="Kekule.Widget.TabView.html">TabView</a></li><li><a href="Kekule.Widget.TextArea.html">TextArea</a></li><li><a href="Kekule.Widget.TextBox.html">TextBox</a></li><li><a href="Kekule.Widget.TextEditor.html">TextEditor</a></li><li><a href="Kekule.Widget.Toolbar.html">Toolbar</a></li><li><a href="Kekule.Widget.TreeView.html">TreeView</a></li><li><a href="Kekule.Widget.Utils.html">Utils</a></li><li><a href="Kekule.Widget.ValueListEditor.html">ValueListEditor</a></li><li><a href="Kekule.Widget.ValueListEditor.ValueDisplayMode.html">ValueDisplayMode</a></li><li><a href="Kekule.Widget.WidgetGrid.html">WidgetGrid</a></li><li><a href="Kekule.Widget.WidgetGroup.html">WidgetGroup</a></li><li><a href="Kekule.Widget.WidgetsReady.html">WidgetsReady</a></li><li><a href="Kekule.ZoomUtils.html">ZoomUtils</a></li><li><a href="ObjectEx.html">ObjectEx</a></li><li><a href="ObjSerializerFactory.html">ObjSerializerFactory</a></li><li><a href="XmlObjSerializer.html">XmlObjSerializer</a></li><li><a href="XmlUtility.html">XmlUtility</a></li></ul><h3>Events</h3><ul><li><a href="Kekule.AbstractAtom.html#event:structureChange">structureChange</a></li><li><a href="Kekule.AbstractConfigs.html#event:change">change</a></li><li><a href="Kekule.AbstractConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.AbstractConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Action.html#event:execute">execute</a></li><li><a href="Kekule.ActionFileOpen.html#event:open">open</a></li><li><a href="Kekule.ActionFileSave.html#event:execute">execute</a></li><li><a href="Kekule.ActionList.html#event:execute">execute</a></li><li><a href="Kekule.ActionLoadFileData.html#event:load">load</a></li><li><a href="Kekule.Atom.html#event:structureChange">structureChange</a></li><li><a href="Kekule.BaseStructureConnector.html#event:structureChange">structureChange</a></li><li><a href="Kekule.BaseStructureNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Bond.html#event:structureChange">structureChange</a></li><li><a href="Kekule.BondForm.html#event:change">change</a></li><li><a href="Kekule.BondForm.html#event:finalize">finalize</a></li><li><a href="Kekule.BondForm.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Calculator.AbstractStructure3DGenerator.html#event:change">change</a></li><li><a href="Kekule.Calculator.AbstractStructure3DGenerator.html#event:finalize">finalize</a></li><li><a href="Kekule.Calculator.AbstractStructure3DGenerator.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Calculator.Base.html#event:change">change</a></li><li><a href="Kekule.Calculator.Base.html#event:finalize">finalize</a></li><li><a href="Kekule.Calculator.Base.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemDocument.html#event:change">change</a></li><li><a href="Kekule.ChemDocument.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemDocument.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemMarker.BaseMarker.html#event:change">change</a></li><li><a href="Kekule.ChemMarker.BaseMarker.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemMarker.BaseMarker.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemMarker.Charge.html#event:change">change</a></li><li><a href="Kekule.ChemMarker.Charge.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemMarker.Charge.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemMarker.ChemPropertyMarker.html#event:change">change</a></li><li><a href="Kekule.ChemMarker.ChemPropertyMarker.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemMarker.ChemPropertyMarker.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemMarker.Radical.html#event:change">change</a></li><li><a href="Kekule.ChemMarker.Radical.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemMarker.Radical.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemObject.html#event:change">change</a></li><li><a href="Kekule.ChemObject.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemObject.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemObjList.html#event:change">change</a></li><li><a href="Kekule.ChemObjList.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemObjList.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemSpace.html#event:change">change</a></li><li><a href="Kekule.ChemSpace.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemSpace.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemSpaceElement.html#event:change">change</a></li><li><a href="Kekule.ChemSpaceElement.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemSpaceElement.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemStructObjContainer.html#event:change">change</a></li><li><a href="Kekule.ChemStructObjContainer.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemStructObjContainer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemStructureBuilder.html#event:change">change</a></li><li><a href="Kekule.ChemStructureBuilder.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemStructureBuilder.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemStructureConnector.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ChemStructureNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ChemStructureObject.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ChemStructureObjectGroup.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ChemTextAnalyzer.html#event:change">change</a></li><li><a href="Kekule.ChemTextAnalyzer.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemTextAnalyzer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.AbstractUIMarker.html#event:change">change</a></li><li><a href="Kekule.ChemWidget.AbstractUIMarker.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemWidget.AbstractUIMarker.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeBallStick.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeBase2D.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeBase3D.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeBase.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeCondensed.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeSkeletal.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeSpaceFill.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeSticks.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerChangeMolDisplayTypeWire.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerHideHydrogens.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerLoadFile.html#event:load">load</a></li><li><a href="Kekule.ChemWidget.ActionDisplayerReset.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionOnDisplayer.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionOnViewer.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionViewerEdit.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateBase2D.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateBase3D.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateBase.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateLeft.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateRight.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateX.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateY.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ActionViewerRotateZ.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ChargeSelectPanel.html#event:valueChange">valueChange</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayer.Configurator.html#event:configChange">configChange</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayer.Settings.html#event:change">change</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayer.Settings.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayer.Settings.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayer.html#event:load">load</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayerConfigs.html#event:change">change</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayerConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayerConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayerIOConfigs.html#event:change">change</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayerIOConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemWidget.ChemObjDisplayerIOConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.ChemObjInserter.Configurator.html#event:configChange">configChange</a></li><li><a href="Kekule.ChemWidget.LoadDataDialog.html#event:activate">activate</a></li><li><a href="Kekule.ChemWidget.LoadDataDialog.html#event:bind">bind</a></li><li><a href="Kekule.ChemWidget.LoadDataDialog.html#event:deactivate">deactivate</a></li><li><a href="Kekule.ChemWidget.LoadDataDialog.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.LoadDataDialog.html#event:resize">resize</a></li><li><a href="Kekule.ChemWidget.LoadDataDialog.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.ChemWidget.LoadDataDialog.html#event:unbind">unbind</a></li><li><a href="Kekule.ChemWidget.MetaShapeUiMarker.html#event:change">change</a></li><li><a href="Kekule.ChemWidget.MetaShapeUiMarker.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemWidget.MetaShapeUiMarker.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.PeriodicTable.html#event:deselect">deselect</a></li><li><a href="Kekule.ChemWidget.PeriodicTable.html#event:select">select</a></li><li><a href="Kekule.ChemWidget.StructureConnectorSelectPanel.html#event:valueChange">valueChange</a></li><li><a href="Kekule.ChemWidget.StructureNodeSelectPanel.html#event:valueChange">valueChange</a></li><li><a href="Kekule.ChemWidget.StructureNodeSetter.html#event:valueChange">valueChange</a></li><li><a href="Kekule.ChemWidget.StructureNodeSetter.html#event:valueSelect">valueSelect</a></li><li><a href="Kekule.ChemWidget.StructureTreeView.html#event:activate">activate</a></li><li><a href="Kekule.ChemWidget.StructureTreeView.html#event:bind">bind</a></li><li><a href="Kekule.ChemWidget.StructureTreeView.html#event:deactivate">deactivate</a></li><li><a href="Kekule.ChemWidget.StructureTreeView.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.StructureTreeView.html#event:resize">resize</a></li><li><a href="Kekule.ChemWidget.StructureTreeView.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.ChemWidget.StructureTreeView.html#event:unbind">unbind</a></li><li><a href="Kekule.ChemWidget.TextUiMarker.html#event:change">change</a></li><li><a href="Kekule.ChemWidget.TextUiMarker.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemWidget.TextUiMarker.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.UiMarker2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.ChemWidget.UiMarker2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.ChemWidget.UiMarker2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.ChemWidget.UiMarker2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.ChemWidget.UiMarkerCollection.html#event:change">change</a></li><li><a href="Kekule.ChemWidget.UiMarkerCollection.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemWidget.UiMarkerCollection.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.UiMarkersRenderer.html#event:clear">clear</a></li><li><a href="Kekule.ChemWidget.UiMarkersRenderer.html#event:draw">draw</a></li><li><a href="Kekule.ChemWidget.UiMarkersRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.ChemWidget.UiMarkersRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.ChemWidget.Viewer2D.html#event:load">load</a></li><li><a href="Kekule.ChemWidget.Viewer3D.html#event:load">load</a></li><li><a href="Kekule.ChemWidget.Viewer.Settings.html#event:change">change</a></li><li><a href="Kekule.ChemWidget.Viewer.Settings.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemWidget.Viewer.Settings.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.Viewer.html#event:load">load</a></li><li><a href="Kekule.ChemWidget.ViewerBasicInteractionController.html#event:change">change</a></li><li><a href="Kekule.ChemWidget.ViewerBasicInteractionController.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemWidget.ViewerBasicInteractionController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemWidget.ViewerGrid2D.html#event:activate">activate</a></li><li><a href="Kekule.ChemWidget.ViewerGrid2D.html#event:bind">bind</a></li><li><a href="Kekule.ChemWidget.ViewerGrid2D.html#event:deactivate">deactivate</a></li><li><a href="Kekule.ChemWidget.ViewerGrid2D.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ViewerGrid2D.html#event:resize">resize</a></li><li><a href="Kekule.ChemWidget.ViewerGrid2D.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.ChemWidget.ViewerGrid2D.html#event:unbind">unbind</a></li><li><a href="Kekule.ChemWidget.ViewerGrid3D.html#event:activate">activate</a></li><li><a href="Kekule.ChemWidget.ViewerGrid3D.html#event:bind">bind</a></li><li><a href="Kekule.ChemWidget.ViewerGrid3D.html#event:deactivate">deactivate</a></li><li><a href="Kekule.ChemWidget.ViewerGrid3D.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ViewerGrid3D.html#event:resize">resize</a></li><li><a href="Kekule.ChemWidget.ViewerGrid3D.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.ChemWidget.ViewerGrid3D.html#event:unbind">unbind</a></li><li><a href="Kekule.ChemWidget.ViewerGrid.html#event:activate">activate</a></li><li><a href="Kekule.ChemWidget.ViewerGrid.html#event:bind">bind</a></li><li><a href="Kekule.ChemWidget.ViewerGrid.html#event:deactivate">deactivate</a></li><li><a href="Kekule.ChemWidget.ViewerGrid.html#event:execute">execute</a></li><li><a href="Kekule.ChemWidget.ViewerGrid.html#event:resize">resize</a></li><li><a href="Kekule.ChemWidget.ViewerGrid.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.ChemWidget.ViewerGrid.html#event:unbind">unbind</a></li><li><a href="Kekule.CompositeMolecule.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ConfigPresetMap.html#event:change">change</a></li><li><a href="Kekule.ConfigPresetMap.html#event:finalize">finalize</a></li><li><a href="Kekule.ConfigPresetMap.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ContentBlock.html#event:change">change</a></li><li><a href="Kekule.ContentBlock.html#event:finalize">finalize</a></li><li><a href="Kekule.ContentBlock.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.DataBingItem.html#event:change">change</a></li><li><a href="Kekule.DataBingItem.html#event:finalize">finalize</a></li><li><a href="Kekule.DataBingItem.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.DomHelper.html#event:change">change</a></li><li><a href="Kekule.DomHelper.html#event:finalize">finalize</a></li><li><a href="Kekule.DomHelper.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.AbstractRepositoryItem.html#event:change">change</a></li><li><a href="Kekule.Editor.AbstractRepositoryItem.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.AbstractRepositoryItem.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ActionCloneSelection.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionComposerSetIaController.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionComposerToggleInspector.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionCopySelection.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionCutSelection.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionEditorNewDoc.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionEditorRedo.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionEditorUndo.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionOnComposer.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionOnComposerAdv.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionOnEditor.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionPaste.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ActionToggleSelectState.html#event:execute">execute</a></li><li><a href="Kekule.Editor.AttachedMarkerIaController.html#event:change">change</a></li><li><a href="Kekule.Editor.AttachedMarkerIaController.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.AttachedMarkerIaController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.BaseEditor.Settings.html#event:change">change</a></li><li><a href="Kekule.Editor.BaseEditor.Settings.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.BaseEditor.Settings.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:editObjChanged">editObjChanged</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:editObjsChanged">editObjsChanged</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:editObjsUpdated">editObjsUpdated</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:load">load</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:operChange">operChange</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:operHistoryClear">operHistoryClear</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:operPop">operPop</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:operPush">operPush</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:operRedo">operRedo</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:operUndo">operUndo</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:selectedObjsUpdated">selectedObjsUpdated</a></li><li><a href="Kekule.Editor.BaseEditor.html#event:selectionChange">selectionChange</a></li><li><a href="Kekule.Editor.BaseEditorConfigs.html#event:change">change</a></li><li><a href="Kekule.Editor.BaseEditorConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.BaseEditorConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.BaseEditorIaController.html#event:change">change</a></li><li><a href="Kekule.Editor.BaseEditorIaController.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.BaseEditorIaController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ChemSpaceConfigs.html#event:change">change</a></li><li><a href="Kekule.Editor.ChemSpaceConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ChemSpaceConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.Settings.html#event:change">change</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.Settings.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.Settings.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:editObjChanged">editObjChanged</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:editObjsChanged">editObjsChanged</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:editObjsUpdated">editObjsUpdated</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:load">load</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:operChange">operChange</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:operHistoryClear">operHistoryClear</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:operPop">operPop</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:operPush">operPush</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:operRedo">operRedo</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:operUndo">operUndo</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:selectedObjsUpdated">selectedObjsUpdated</a></li><li><a href="Kekule.Editor.ChemSpaceEditor.html#event:selectionChange">selectionChange</a></li><li><a href="Kekule.Editor.ChemSpaceEditorConfigs.html#event:change">change</a></li><li><a href="Kekule.Editor.ChemSpaceEditorConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ChemSpaceEditorConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.Composer.Configurator.html#event:configChange">configChange</a></li><li><a href="Kekule.Editor.Composer.Settings.html#event:change">change</a></li><li><a href="Kekule.Editor.Composer.Settings.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.Composer.Settings.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ComposerDialog.html#event:activate">activate</a></li><li><a href="Kekule.Editor.ComposerDialog.html#event:bind">bind</a></li><li><a href="Kekule.Editor.ComposerDialog.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Editor.ComposerDialog.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ComposerDialog.html#event:resize">resize</a></li><li><a href="Kekule.Editor.ComposerDialog.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Editor.ComposerDialog.html#event:unbind">unbind</a></li><li><a href="Kekule.Editor.ComposerObjModifierToolbar.html#event:activate">activate</a></li><li><a href="Kekule.Editor.ComposerObjModifierToolbar.html#event:bind">bind</a></li><li><a href="Kekule.Editor.ComposerObjModifierToolbar.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Editor.ComposerObjModifierToolbar.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ComposerObjModifierToolbar.html#event:resize">resize</a></li><li><a href="Kekule.Editor.ComposerObjModifierToolbar.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Editor.ComposerObjModifierToolbar.html#event:unbind">unbind</a></li><li><a href="Kekule.Editor.ComposerStyleToolbar.html#event:activate">activate</a></li><li><a href="Kekule.Editor.ComposerStyleToolbar.html#event:bind">bind</a></li><li><a href="Kekule.Editor.ComposerStyleToolbar.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Editor.ComposerStyleToolbar.html#event:execute">execute</a></li><li><a href="Kekule.Editor.ComposerStyleToolbar.html#event:resize">resize</a></li><li><a href="Kekule.Editor.ComposerStyleToolbar.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Editor.ComposerStyleToolbar.html#event:unbind">unbind</a></li><li><a href="Kekule.Editor.ContentBlockIaController.html#event:change">change</a></li><li><a href="Kekule.Editor.ContentBlockIaController.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ContentBlockIaController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.EditorNexus.html#event:change">change</a></li><li><a href="Kekule.Editor.EditorNexus.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.EditorNexus.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.FormulaIaController.html#event:change">change</a></li><li><a href="Kekule.Editor.FormulaIaController.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.FormulaIaController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ImageBlockIaController.html#event:change">change</a></li><li><a href="Kekule.Editor.ImageBlockIaController.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ImageBlockIaController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.InteractionConfigs.html#event:change">change</a></li><li><a href="Kekule.Editor.InteractionConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.InteractionConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.MolAtomIaController.html#event:change">change</a></li><li><a href="Kekule.Editor.MolAtomIaController.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.MolAtomIaController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.MolAtomIaController_OLD.html#event:change">change</a></li><li><a href="Kekule.Editor.MolAtomIaController_OLD.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.MolAtomIaController_OLD.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.MolChainRepositoryItem2D.html#event:change">change</a></li><li><a href="Kekule.Editor.MolChainRepositoryItem2D.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.MolChainRepositoryItem2D.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.MolNodeChargeIaController.html#event:change">change</a></li><li><a href="Kekule.Editor.MolNodeChargeIaController.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.MolNodeChargeIaController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.MolRepositoryItem2D.html#event:change">change</a></li><li><a href="Kekule.Editor.MolRepositoryItem2D.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.MolRepositoryItem2D.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.MolRingRepositoryItem2D.html#event:change">change</a></li><li><a href="Kekule.Editor.MolRingRepositoryItem2D.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.MolRingRepositoryItem2D.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ObjModifier.Atom.html#event:change">change</a></li><li><a href="Kekule.Editor.ObjModifier.Atom.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ObjModifier.Atom.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ObjModifier.Base.html#event:change">change</a></li><li><a href="Kekule.Editor.ObjModifier.Base.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ObjModifier.Base.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ObjModifier.BaseRenderOptionModifier.html#event:change">change</a></li><li><a href="Kekule.Editor.ObjModifier.BaseRenderOptionModifier.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ObjModifier.BaseRenderOptionModifier.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ObjModifier.Bond.html#event:change">change</a></li><li><a href="Kekule.Editor.ObjModifier.Bond.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ObjModifier.Bond.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ObjModifier.Charge.html#event:change">change</a></li><li><a href="Kekule.Editor.ObjModifier.Charge.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ObjModifier.Charge.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ObjModifier.ChemStructureModifier.html#event:change">change</a></li><li><a href="Kekule.Editor.ObjModifier.ChemStructureModifier.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ObjModifier.ChemStructureModifier.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ObjModifier.Color.html#event:change">change</a></li><li><a href="Kekule.Editor.ObjModifier.Color.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ObjModifier.Color.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.ObjModifier.RichText.html#event:change">change</a></li><li><a href="Kekule.Editor.ObjModifier.RichText.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.ObjModifier.RichText.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.PathGlyphRepositoryItem2D.html#event:change">change</a></li><li><a href="Kekule.Editor.PathGlyphRepositoryItem2D.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.PathGlyphRepositoryItem2D.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.StoredStructFragmentRepositoryItem2D.html#event:change">change</a></li><li><a href="Kekule.Editor.StoredStructFragmentRepositoryItem2D.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.StoredStructFragmentRepositoryItem2D.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.StoredSubgroupRepositoryItem2D.html#event:change">change</a></li><li><a href="Kekule.Editor.StoredSubgroupRepositoryItem2D.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.StoredSubgroupRepositoryItem2D.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.StructureConfigs.html#event:change">change</a></li><li><a href="Kekule.Editor.StructureConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.StructureConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.StyleSetterConfigs.html#event:change">change</a></li><li><a href="Kekule.Editor.StyleSetterConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.StyleSetterConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.TextBlockIaController.html#event:change">change</a></li><li><a href="Kekule.Editor.TextBlockIaController.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.TextBlockIaController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.TrackLayoutOptimizer.html#event:change">change</a></li><li><a href="Kekule.Editor.TrackLayoutOptimizer.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.TrackLayoutOptimizer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.TrackParser.html#event:change">change</a></li><li><a href="Kekule.Editor.TrackParser.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.TrackParser.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Editor.UiMarkerConfigs.html#event:change">change</a></li><li><a href="Kekule.Editor.UiMarkerConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Editor.UiMarkerConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ElectronSet.html#event:change">change</a></li><li><a href="Kekule.ElectronSet.html#event:finalize">finalize</a></li><li><a href="Kekule.ElectronSet.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Element.html#event:change">change</a></li><li><a href="Kekule.Element.html#event:finalize">finalize</a></li><li><a href="Kekule.Element.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ExceptionHandler.html#event:change">change</a></li><li><a href="Kekule.ExceptionHandler.html#event:exceptionThrown">exceptionThrown</a></li><li><a href="Kekule.ExceptionHandler.html#event:finalize">finalize</a></li><li><a href="Kekule.ExceptionHandler.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Glyph.Base.html#event:change">change</a></li><li><a href="Kekule.Glyph.Base.html#event:finalize">finalize</a></li><li><a href="Kekule.Glyph.Base.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Glyph.PathGlyphArcConnector.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Glyph.PathGlyphArcConnectorControlNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Glyph.PathGlyphConnector.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Glyph.PathGlyphConnectorControlNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Glyph.PathGlyphNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Graph.html#event:change">change</a></li><li><a href="Kekule.Graph.html#event:finalize">finalize</a></li><li><a href="Kekule.Graph.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.GraphEdge.html#event:change">change</a></li><li><a href="Kekule.GraphEdge.html#event:finalize">finalize</a></li><li><a href="Kekule.GraphEdge.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.GraphElement.html#event:change">change</a></li><li><a href="Kekule.GraphElement.html#event:finalize">finalize</a></li><li><a href="Kekule.GraphElement.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ImageBlock.html#event:change">change</a></li><li><a href="Kekule.ImageBlock.html#event:finalize">finalize</a></li><li><a href="Kekule.ImageBlock.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.BaseMdlReader.html#event:change">change</a></li><li><a href="Kekule.IO.BaseMdlReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.BaseMdlReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.BaseMdlWriter.html#event:change">change</a></li><li><a href="Kekule.IO.BaseMdlWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.BaseMdlWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.ChemDataReader.html#event:change">change</a></li><li><a href="Kekule.IO.ChemDataReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.ChemDataReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.ChemDataWriter.html#event:change">change</a></li><li><a href="Kekule.IO.ChemDataWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.ChemDataWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlChemStructureReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlChemStructureReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlChemStructureReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlElementHandler.html#event:change">change</a></li><li><a href="Kekule.IO.CmlElementHandler.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlElementHandler.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlElementReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlElementReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlElementReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlElementWriter.html#event:change">change</a></li><li><a href="Kekule.IO.CmlElementWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlElementWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlFormulaReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlFormulaReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlFormulaReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlFormulaWriter.html#event:change">change</a></li><li><a href="Kekule.IO.CmlFormulaWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlFormulaWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlListReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlListReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlListReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlListWriter.html#event:change">change</a></li><li><a href="Kekule.IO.CmlListWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlListWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlMetaDataListReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlMetaDataListReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlMetaDataListReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlMetaDataReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlMetaDataReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlMetaDataReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlMoleculeReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlMoleculeReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlMoleculeReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlMoleculeWriter.html#event:change">change</a></li><li><a href="Kekule.IO.CmlMoleculeWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlMoleculeWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlNameReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlNameReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlNameReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlReactionReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlReactionReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlReactionReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlReactionReagentReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlReactionReagentReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlReactionReagentReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlReactionWriter.html#event:change">change</a></li><li><a href="Kekule.IO.CmlReactionWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlReactionWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlRootReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlRootReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlRootReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlRootWriter.html#event:change">change</a></li><li><a href="Kekule.IO.CmlRootWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlRootWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlScalarReader.html#event:change">change</a></li><li><a href="Kekule.IO.CmlScalarReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlScalarReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlScalarWriter.html#event:change">change</a></li><li><a href="Kekule.IO.CmlScalarWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlScalarWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.CmlWriter.html#event:change">change</a></li><li><a href="Kekule.IO.CmlWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.CmlWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.KcjReader.html#event:change">change</a></li><li><a href="Kekule.IO.KcjReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.KcjReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.KcjWriter.html#event:change">change</a></li><li><a href="Kekule.IO.KcjWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.KcjWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.KcxReader.html#event:change">change</a></li><li><a href="Kekule.IO.KcxReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.KcxReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.KcxWriter.html#event:change">change</a></li><li><a href="Kekule.IO.KcxWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.KcxWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl2kCTabReader.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl2kCTabReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl2kCTabReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl2kReactionReader.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl2kReactionReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl2kReactionReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl3kBlockReader.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl3kBlockReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl3kBlockReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl3kBlockWriter.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl3kBlockWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl3kBlockWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl3kCTabReader.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl3kCTabReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl3kCTabReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl3kCTabWriter.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl3kCTabWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl3kCTabWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl3kMoleculeCTabReader.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl3kMoleculeCTabReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl3kMoleculeCTabReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl3kMoleculeCTabWriter.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl3kMoleculeCTabWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl3kMoleculeCTabWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl3kReactionReader.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl3kReactionReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl3kReactionReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.Mdl3kTextBuffer.html#event:change">change</a></li><li><a href="Kekule.IO.Mdl3kTextBuffer.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.Mdl3kTextBuffer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlBaseReactionReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlBaseReactionReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlBaseReactionReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlBlockHandler.html#event:change">change</a></li><li><a href="Kekule.IO.MdlBlockHandler.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlBlockHandler.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlBlockReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlBlockReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlBlockReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlBlockWriter.html#event:change">change</a></li><li><a href="Kekule.IO.MdlBlockWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlBlockWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlMoleculeReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlMoleculeReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlMoleculeReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlMoleculeWriter.html#event:change">change</a></li><li><a href="Kekule.IO.MdlMoleculeWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlMoleculeWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlMolReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlMolReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlMolReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlMolWriter.html#event:change">change</a></li><li><a href="Kekule.IO.MdlMolWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlMolWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlReactionReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlReactionReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlReactionReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlReactionWriter.html#event:change">change</a></li><li><a href="Kekule.IO.MdlReactionWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlReactionWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlRxnReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlRxnReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlRxnReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlRxnWriter.html#event:change">change</a></li><li><a href="Kekule.IO.MdlRxnWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlRxnWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlSdReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlSdReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlSdReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlSdWriter.html#event:change">change</a></li><li><a href="Kekule.IO.MdlSdWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlSdWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlStructDataReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlStructDataReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlStructDataReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlStructDataWriter.html#event:change">change</a></li><li><a href="Kekule.IO.MdlStructDataWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlStructDataWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlStructureFragmentReader.html#event:change">change</a></li><li><a href="Kekule.IO.MdlStructureFragmentReader.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlStructureFragmentReader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlStructureFragmentWriter.html#event:change">change</a></li><li><a href="Kekule.IO.MdlStructureFragmentWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlStructureFragmentWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.MdlWriter.html#event:change">change</a></li><li><a href="Kekule.IO.MdlWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.MdlWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.IO.SmilesMolWriter.html#event:change">change</a></li><li><a href="Kekule.IO.SmilesMolWriter.html#event:finalize">finalize</a></li><li><a href="Kekule.IO.SmilesMolWriter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Isotope.html#event:change">change</a></li><li><a href="Kekule.Isotope.html#event:finalize">finalize</a></li><li><a href="Kekule.Isotope.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.MolecularFormula.html#event:change">change</a></li><li><a href="Kekule.MolecularFormula.html#event:finalize">finalize</a></li><li><a href="Kekule.MolecularFormula.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Molecule.html#event:structureChange">structureChange</a></li><li><a href="Kekule.MoleculeGroup.html#event:structureChange">structureChange</a></li><li><a href="Kekule.MoleculeList.html#event:change">change</a></li><li><a href="Kekule.MoleculeList.html#event:finalize">finalize</a></li><li><a href="Kekule.MoleculeList.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.OperationHistory.html#event:clear">clear</a></li><li><a href="Kekule.OperationHistory.html#event:operChange">operChange</a></li><li><a href="Kekule.OperationHistory.html#event:pop">pop</a></li><li><a href="Kekule.OperationHistory.html#event:push">push</a></li><li><a href="Kekule.OperationHistory.html#event:redo">redo</a></li><li><a href="Kekule.OperationHistory.html#event:undo">undo</a></li><li><a href="Kekule.PredefinedResLoader.html#event:change">change</a></li><li><a href="Kekule.PredefinedResLoader.html#event:finalize">finalize</a></li><li><a href="Kekule.PredefinedResLoader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ArrayEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ArrayEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ArrayEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.BaseEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.BaseEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.BaseEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.BoolEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.BoolEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.BoolEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ChemCoordEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ChemCoordEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ChemCoordEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ChemCoordSizeFieldEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ChemCoordSizeFieldEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ChemCoordSizeFieldEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ChemIdEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ChemIdEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ChemIdEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ChemOptionObjectEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ChemOptionObjectEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ChemOptionObjectEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ChemRender2DOptionsEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ChemRender2DOptionsEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ChemRender2DOptionsEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ChemRender3DOptionsEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ChemRender3DOptionsEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ChemRender3DOptionsEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ChemSizeEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ChemSizeEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ChemSizeEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ColorEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ColorEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ColorEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.GlyphPathParamsEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.GlyphPathParamsEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.GlyphPathParamsEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ObjectEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ObjectEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ObjectEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.ObjectExEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.ObjectExEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.ObjectExEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.SelectEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.SelectEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.SelectEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.SimpleEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.SimpleEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.SimpleEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.PropertyEditor.TextEditor.html#event:change">change</a></li><li><a href="Kekule.PropertyEditor.TextEditor.html#event:finalize">finalize</a></li><li><a href="Kekule.PropertyEditor.TextEditor.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Pseudoatom.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Reaction.html#event:change">change</a></li><li><a href="Kekule.Reaction.html#event:finalize">finalize</a></li><li><a href="Kekule.Reaction.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ReactionList.html#event:change">change</a></li><li><a href="Kekule.ReactionList.html#event:finalize">finalize</a></li><li><a href="Kekule.ReactionList.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.AbstractRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.AbstractRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.AbstractRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.AbstractRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.Base2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.Base2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.Base2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.Base2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.Base3DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.Base3DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.Base3DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.Base3DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.BaseGlyph2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.BaseGlyph2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.BaseGlyph2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.BaseGlyph2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.BaseRichTextDrawer.html#event:change">change</a></li><li><a href="Kekule.Render.BaseRichTextDrawer.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.BaseRichTextDrawer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.BoundInfoRecorder.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemCtab2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemCtab2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemCtab2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemCtab2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemCtab3DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemCtab3DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemCtab3DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemCtab3DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemObj2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemObj2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemObj2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemObj2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemObj3DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemObj3DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemObj3DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemObj3DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemObjGroupList2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemObjGroupList2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemObjGroupList2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemObjGroupList2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemObjGroupList3DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemObjGroupList3DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemObjGroupList3DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemObjGroupList3DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemObjPainter2D.html#event:change">change</a></li><li><a href="Kekule.Render.ChemObjPainter2D.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.ChemObjPainter2D.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.ChemObjPainter3D.html#event:change">change</a></li><li><a href="Kekule.Render.ChemObjPainter3D.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.ChemObjPainter3D.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.ChemObjPainter.html#event:change">change</a></li><li><a href="Kekule.Render.ChemObjPainter.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.ChemObjPainter.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.ChemSpace2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemSpace2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemSpace2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemSpace2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemSpace3DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemSpace3DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemSpace3DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemSpace3DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemSpaceElement2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemSpaceElement2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemSpaceElement2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemSpaceElement2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ChemSpaceElement3DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ChemSpaceElement3DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ChemSpaceElement3DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ChemSpaceElement3DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.ColorConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.ColorConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.ColorConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.CompositeMolecule2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.CompositeMolecule2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.CompositeMolecule2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.CompositeMolecule2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.CompositeMolecule3DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.CompositeMolecule3DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.CompositeMolecule3DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.CompositeMolecule3DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.CompositeObj2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.CompositeObj2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.CompositeObj2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.CompositeObj2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.CompositeObj3DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.CompositeObj3DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.CompositeObj3DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.CompositeObj3DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.CompositeRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.CompositeRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.CompositeRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.CompositeRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.Ctab2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.Ctab2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.Ctab2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.Ctab2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.DisplayLabelConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.DisplayLabelConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.DisplayLabelConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.DummyRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.DummyRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.DummyRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.DummyRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.Formula2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.Formula2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.Formula2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.Formula2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.GeneralConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.GeneralConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.GeneralConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.ImageBlock2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.ImageBlock2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.ImageBlock2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.ImageBlock2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.Length3DConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.Length3DConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.Length3DConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.LengthConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.LengthConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.LengthConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.Model3DConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.Model3DConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.Model3DConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.Molecule3DDisplayConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.Molecule3DDisplayConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.Molecule3DDisplayConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.MoleculeDisplayConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.MoleculeDisplayConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.MoleculeDisplayConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.PathGlyph2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.PathGlyph2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.PathGlyph2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.PathGlyph2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.PathGlyphCtab2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.PathGlyphCtab2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.PathGlyphCtab2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.PathGlyphCtab2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.PredefinedConfigsMap.html#event:change">change</a></li><li><a href="Kekule.Render.PredefinedConfigsMap.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.PredefinedConfigsMap.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.Reaction2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.Reaction2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.Reaction2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.Reaction2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.Render2DConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.Render2DConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.Render2DConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.Render3DConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.Render3DConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.Render3DConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.Render3DEnvironmentConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.Render3DEnvironmentConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.Render3DEnvironmentConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.RichTextBased2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.RichTextBased2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.RichTextBased2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.RichTextBased2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.StructFragment2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.StructFragment2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.StructFragment2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.StructFragment2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.StructFragment3DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.StructFragment3DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.StructFragment3DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.StructFragment3DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.TextBasedChemMarker2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.TextBasedChemMarker2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.TextBasedChemMarker2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.TextBasedChemMarker2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.TextBlock2DRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.TextBlock2DRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.TextBlock2DRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.TextBlock2DRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Render.TextFontConfigs.html#event:change">change</a></li><li><a href="Kekule.Render.TextFontConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.Render.TextFontConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Render.UnbondedElectronSetRenderer.html#event:clear">clear</a></li><li><a href="Kekule.Render.UnbondedElectronSetRenderer.html#event:draw">draw</a></li><li><a href="Kekule.Render.UnbondedElectronSetRenderer.html#event:prepareDrawing">prepareDrawing</a></li><li><a href="Kekule.Render.UnbondedElectronSetRenderer.html#event:updateBasicDrawObject">updateBasicDrawObject</a></li><li><a href="Kekule.Scalar.html#event:change">change</a></li><li><a href="Kekule.Scalar.html#event:finalize">finalize</a></li><li><a href="Kekule.Scalar.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.StructureConnectionTable.html#event:change">change</a></li><li><a href="Kekule.StructureConnectionTable.html#event:finalize">finalize</a></li><li><a href="Kekule.StructureConnectionTable.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.StructureFragment.html#event:structureChange">structureChange</a></li><li><a href="Kekule.StructureFragmentGroup.html#event:structureChange">structureChange</a></li><li><a href="Kekule.StructureFragmentShadow.html#event:change">change</a></li><li><a href="Kekule.StructureFragmentShadow.html#event:finalize">finalize</a></li><li><a href="Kekule.StructureFragmentShadow.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.SubGroup.html#event:structureChange">structureChange</a></li><li><a href="Kekule.TextBlock.html#event:change">change</a></li><li><a href="Kekule.TextBlock.html#event:finalize">finalize</a></li><li><a href="Kekule.TextBlock.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.TextLinesBuffer.html#event:change">change</a></li><li><a href="Kekule.TextLinesBuffer.html#event:finalize">finalize</a></li><li><a href="Kekule.TextLinesBuffer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.TokenAnalyzer.html#event:change">change</a></li><li><a href="Kekule.TokenAnalyzer.html#event:finalize">finalize</a></li><li><a href="Kekule.TokenAnalyzer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.UnbondedElectronSet.html#event:change">change</a></li><li><a href="Kekule.UnbondedElectronSet.html#event:finalize">finalize</a></li><li><a href="Kekule.UnbondedElectronSet.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.VariableAtom.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Widget.ArrayDataSet.html#event:dataChange">dataChange</a></li><li><a href="Kekule.Widget.ArrayDataSet.html#event:totalCountChange">totalCountChange</a></li><li><a href="Kekule.Widget.BaseDataSet.html#event:dataChange">dataChange</a></li><li><a href="Kekule.Widget.BaseDataSet.html#event:totalCountChange">totalCountChange</a></li><li><a href="Kekule.Widget.BaseWidget.Settings.html#event:change">change</a></li><li><a href="Kekule.Widget.BaseWidget.Settings.html#event:finalize">finalize</a></li><li><a href="Kekule.Widget.BaseWidget.Settings.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Widget.BaseWidget.html#event:activate">activate</a></li><li><a href="Kekule.Widget.BaseWidget.html#event:bind">bind</a></li><li><a href="Kekule.Widget.BaseWidget.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.BaseWidget.html#event:execute">execute</a></li><li><a href="Kekule.Widget.BaseWidget.html#event:resize">resize</a></li><li><a href="Kekule.Widget.BaseWidget.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.BaseWidget.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.Button.html#event:activate">activate</a></li><li><a href="Kekule.Widget.Button.html#event:bind">bind</a></li><li><a href="Kekule.Widget.Button.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.Button.html#event:execute">execute</a></li><li><a href="Kekule.Widget.Button.html#event:resize">resize</a></li><li><a href="Kekule.Widget.Button.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.Button.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.CheckBox.html#event:buttonExecute">buttonExecute</a></li><li><a href="Kekule.Widget.CheckBox.html#event:valueChange">valueChange</a></li><li><a href="Kekule.Widget.CheckButton.html#event:check">check</a></li><li><a href="Kekule.Widget.CheckButton.html#event:checkChange">checkChange</a></li><li><a href="Kekule.Widget.CheckButton.html#event:uncheck">uncheck</a></li><li><a href="Kekule.Widget.Clipboard.html#event:setData">setData</a></li><li><a href="Kekule.Widget.ColorDropButton.html#event:dropDown">dropDown</a></li><li><a href="Kekule.Widget.ColorPicker.html#event:valueChange">valueChange</a></li><li><a href="Kekule.Widget.ColorPicker.html#event:valueSet">valueSet</a></li><li><a href="Kekule.Widget.ComboBox.html#event:valueSelect">valueSelect</a></li><li><a href="Kekule.Widget.ComboTextBox.html#event:buttonExecute">buttonExecute</a></li><li><a href="Kekule.Widget.ComboTextBox.html#event:valueChange">valueChange</a></li><li><a href="Kekule.Widget.CompactButtonSet.html#event:select">select</a></li><li><a href="Kekule.Widget.Configurator.html#event:configChange">configChange</a></li><li><a href="Kekule.Widget.Container.html#event:activate">activate</a></li><li><a href="Kekule.Widget.Container.html#event:bind">bind</a></li><li><a href="Kekule.Widget.Container.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.Container.html#event:execute">execute</a></li><li><a href="Kekule.Widget.Container.html#event:resize">resize</a></li><li><a href="Kekule.Widget.Container.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.Container.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.DataPager.html#event:dataError">dataError</a></li><li><a href="Kekule.Widget.DataPager.html#event:dataFetched">dataFetched</a></li><li><a href="Kekule.Widget.DataPager.html#event:pageCountChange">pageCountChange</a></li><li><a href="Kekule.Widget.DataPager.html#event:pageRetrieve">pageRetrieve</a></li><li><a href="Kekule.Widget.DataTable.html#event:activate">activate</a></li><li><a href="Kekule.Widget.DataTable.html#event:bind">bind</a></li><li><a href="Kekule.Widget.DataTable.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.DataTable.html#event:execute">execute</a></li><li><a href="Kekule.Widget.DataTable.html#event:resize">resize</a></li><li><a href="Kekule.Widget.DataTable.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.DataTable.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.Dialog.html#event:activate">activate</a></li><li><a href="Kekule.Widget.Dialog.html#event:bind">bind</a></li><li><a href="Kekule.Widget.Dialog.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.Dialog.html#event:execute">execute</a></li><li><a href="Kekule.Widget.Dialog.html#event:resize">resize</a></li><li><a href="Kekule.Widget.Dialog.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.Dialog.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.DropDownButton.html#event:dropDown">dropDown</a></li><li><a href="Kekule.Widget.DumbWidget.html#event:activate">activate</a></li><li><a href="Kekule.Widget.DumbWidget.html#event:bind">bind</a></li><li><a href="Kekule.Widget.DumbWidget.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.DumbWidget.html#event:execute">execute</a></li><li><a href="Kekule.Widget.DumbWidget.html#event:resize">resize</a></li><li><a href="Kekule.Widget.DumbWidget.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.DumbWidget.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.DynamicEvokeHelper.html#event:change">change</a></li><li><a href="Kekule.Widget.DynamicEvokeHelper.html#event:finalize">finalize</a></li><li><a href="Kekule.Widget.DynamicEvokeHelper.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Widget.ExceptionHandler.html#event:change">change</a></li><li><a href="Kekule.Widget.ExceptionHandler.html#event:exceptionThrown">exceptionThrown</a></li><li><a href="Kekule.Widget.ExceptionHandler.html#event:finalize">finalize</a></li><li><a href="Kekule.Widget.ExceptionHandler.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Widget.FormWidget.html#event:buttonExecute">buttonExecute</a></li><li><a href="Kekule.Widget.FormWidget.html#event:valueChange">valueChange</a></li><li><a href="Kekule.Widget.GlobalManager.html#event:widgetCreate">widgetCreate</a></li><li><a href="Kekule.Widget.GlobalManager.html#event:widgetFinalize">widgetFinalize</a></li><li><a href="Kekule.Widget.Glyph.html#event:activate">activate</a></li><li><a href="Kekule.Widget.Glyph.html#event:bind">bind</a></li><li><a href="Kekule.Widget.Glyph.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.Glyph.html#event:execute">execute</a></li><li><a href="Kekule.Widget.Glyph.html#event:resize">resize</a></li><li><a href="Kekule.Widget.Glyph.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.Glyph.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.InteractionController.html#event:change">change</a></li><li><a href="Kekule.Widget.InteractionController.html#event:finalize">finalize</a></li><li><a href="Kekule.Widget.InteractionController.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Widget.Menu.html#event:activate">activate</a></li><li><a href="Kekule.Widget.Menu.html#event:bind">bind</a></li><li><a href="Kekule.Widget.Menu.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.Menu.html#event:execute">execute</a></li><li><a href="Kekule.Widget.Menu.html#event:resize">resize</a></li><li><a href="Kekule.Widget.Menu.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.Menu.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.MenuBar.html#event:activate">activate</a></li><li><a href="Kekule.Widget.MenuBar.html#event:bind">bind</a></li><li><a href="Kekule.Widget.MenuBar.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.MenuBar.html#event:execute">execute</a></li><li><a href="Kekule.Widget.MenuBar.html#event:resize">resize</a></li><li><a href="Kekule.Widget.MenuBar.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.MenuBar.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.MenuItem.html#event:check">check</a></li><li><a href="Kekule.Widget.MoveHelper.html#event:change">change</a></li><li><a href="Kekule.Widget.MoveHelper.html#event:finalize">finalize</a></li><li><a href="Kekule.Widget.MoveHelper.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Widget.MsgGroup.html#event:activate">activate</a></li><li><a href="Kekule.Widget.MsgGroup.html#event:bind">bind</a></li><li><a href="Kekule.Widget.MsgGroup.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.MsgGroup.html#event:execute">execute</a></li><li><a href="Kekule.Widget.MsgGroup.html#event:resize">resize</a></li><li><a href="Kekule.Widget.MsgGroup.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.MsgGroup.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.MsgPanel.html#event:activate">activate</a></li><li><a href="Kekule.Widget.MsgPanel.html#event:bind">bind</a></li><li><a href="Kekule.Widget.MsgPanel.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.MsgPanel.html#event:execute">execute</a></li><li><a href="Kekule.Widget.MsgPanel.html#event:resize">resize</a></li><li><a href="Kekule.Widget.MsgPanel.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.MsgPanel.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.NestedContainer.html#event:activate">activate</a></li><li><a href="Kekule.Widget.NestedContainer.html#event:bind">bind</a></li><li><a href="Kekule.Widget.NestedContainer.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.NestedContainer.html#event:execute">execute</a></li><li><a href="Kekule.Widget.NestedContainer.html#event:resize">resize</a></li><li><a href="Kekule.Widget.NestedContainer.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.NestedContainer.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.ObjectInspector.html#event:activate">activate</a></li><li><a href="Kekule.Widget.ObjectInspector.html#event:bind">bind</a></li><li><a href="Kekule.Widget.ObjectInspector.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.ObjectInspector.html#event:execute">execute</a></li><li><a href="Kekule.Widget.ObjectInspector.html#event:resize">resize</a></li><li><a href="Kekule.Widget.ObjectInspector.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.ObjectInspector.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.ObjPropListEditor.html#event:propertyChange">propertyChange</a></li><li><a href="Kekule.Widget.OperHistoryTreeView.html#event:activate">activate</a></li><li><a href="Kekule.Widget.OperHistoryTreeView.html#event:bind">bind</a></li><li><a href="Kekule.Widget.OperHistoryTreeView.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.OperHistoryTreeView.html#event:execute">execute</a></li><li><a href="Kekule.Widget.OperHistoryTreeView.html#event:resize">resize</a></li><li><a href="Kekule.Widget.OperHistoryTreeView.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.OperHistoryTreeView.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.PageNavigator.html#event:pageChange">pageChange</a></li><li><a href="Kekule.Widget.Panel.html#event:activate">activate</a></li><li><a href="Kekule.Widget.Panel.html#event:bind">bind</a></li><li><a href="Kekule.Widget.Panel.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.Panel.html#event:execute">execute</a></li><li><a href="Kekule.Widget.Panel.html#event:resize">resize</a></li><li><a href="Kekule.Widget.Panel.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.Panel.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.PlaceHolder.html#event:activate">activate</a></li><li><a href="Kekule.Widget.PlaceHolder.html#event:bind">bind</a></li><li><a href="Kekule.Widget.PlaceHolder.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.PlaceHolder.html#event:execute">execute</a></li><li><a href="Kekule.Widget.PlaceHolder.html#event:resize">resize</a></li><li><a href="Kekule.Widget.PlaceHolder.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.PlaceHolder.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.PopupMenu.html#event:activate">activate</a></li><li><a href="Kekule.Widget.PopupMenu.html#event:bind">bind</a></li><li><a href="Kekule.Widget.PopupMenu.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.PopupMenu.html#event:execute">execute</a></li><li><a href="Kekule.Widget.PopupMenu.html#event:resize">resize</a></li><li><a href="Kekule.Widget.PopupMenu.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.PopupMenu.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.RadioButton.html#event:check">check</a></li><li><a href="Kekule.Widget.RadioButton.html#event:checkChange">checkChange</a></li><li><a href="Kekule.Widget.RadioButton.html#event:uncheck">uncheck</a></li><li><a href="Kekule.Widget.ResizeGripper.html#event:activate">activate</a></li><li><a href="Kekule.Widget.ResizeGripper.html#event:bind">bind</a></li><li><a href="Kekule.Widget.ResizeGripper.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.ResizeGripper.html#event:execute">execute</a></li><li><a href="Kekule.Widget.ResizeGripper.html#event:resize">resize</a></li><li><a href="Kekule.Widget.ResizeGripper.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.ResizeGripper.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.SelectBox.html#event:buttonExecute">buttonExecute</a></li><li><a href="Kekule.Widget.SelectBox.html#event:valueChange">valueChange</a></li><li><a href="Kekule.Widget.ShowHideManager.html#event:change">change</a></li><li><a href="Kekule.Widget.ShowHideManager.html#event:finalize">finalize</a></li><li><a href="Kekule.Widget.ShowHideManager.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Widget.ShowHideTransitionSelector.html#event:change">change</a></li><li><a href="Kekule.Widget.ShowHideTransitionSelector.html#event:finalize">finalize</a></li><li><a href="Kekule.Widget.ShowHideTransitionSelector.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Widget.StyleResource.html#event:change">change</a></li><li><a href="Kekule.Widget.StyleResource.html#event:finalize">finalize</a></li><li><a href="Kekule.Widget.StyleResource.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Widget.SysMsgGroup.html#event:activate">activate</a></li><li><a href="Kekule.Widget.SysMsgGroup.html#event:bind">bind</a></li><li><a href="Kekule.Widget.SysMsgGroup.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.SysMsgGroup.html#event:execute">execute</a></li><li><a href="Kekule.Widget.SysMsgGroup.html#event:resize">resize</a></li><li><a href="Kekule.Widget.SysMsgGroup.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.SysMsgGroup.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.TabButtonGroup.html#event:switch">switch</a></li><li><a href="Kekule.Widget.TabPage.html#event:activate">activate</a></li><li><a href="Kekule.Widget.TabPage.html#event:bind">bind</a></li><li><a href="Kekule.Widget.TabPage.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.TabPage.html#event:execute">execute</a></li><li><a href="Kekule.Widget.TabPage.html#event:resize">resize</a></li><li><a href="Kekule.Widget.TabPage.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.TabPage.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.TabView.html#event:switchTab">switchTab</a></li><li><a href="Kekule.Widget.TextArea.html#event:buttonExecute">buttonExecute</a></li><li><a href="Kekule.Widget.TextArea.html#event:valueChange">valueChange</a></li><li><a href="Kekule.Widget.TextBox.html#event:buttonExecute">buttonExecute</a></li><li><a href="Kekule.Widget.TextBox.html#event:valueChange">valueChange</a></li><li><a href="Kekule.Widget.TextEditor.html#event:valueSet">valueSet</a></li><li><a href="Kekule.Widget.Toolbar.html#event:activate">activate</a></li><li><a href="Kekule.Widget.Toolbar.html#event:bind">bind</a></li><li><a href="Kekule.Widget.Toolbar.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.Toolbar.html#event:execute">execute</a></li><li><a href="Kekule.Widget.Toolbar.html#event:resize">resize</a></li><li><a href="Kekule.Widget.Toolbar.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.Toolbar.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.TreeView.html#event:activate">activate</a></li><li><a href="Kekule.Widget.TreeView.html#event:bind">bind</a></li><li><a href="Kekule.Widget.TreeView.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.TreeView.html#event:execute">execute</a></li><li><a href="Kekule.Widget.TreeView.html#event:resize">resize</a></li><li><a href="Kekule.Widget.TreeView.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.TreeView.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.ValueListEditor.html#event:activeRowChange">activeRowChange</a></li><li><a href="Kekule.Widget.ValueListEditor.html#event:editCancel">editCancel</a></li><li><a href="Kekule.Widget.ValueListEditor.html#event:editFinish">editFinish</a></li><li><a href="Kekule.Widget.WidgetGrid.html#event:activate">activate</a></li><li><a href="Kekule.Widget.WidgetGrid.html#event:bind">bind</a></li><li><a href="Kekule.Widget.WidgetGrid.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.WidgetGrid.html#event:execute">execute</a></li><li><a href="Kekule.Widget.WidgetGrid.html#event:resize">resize</a></li><li><a href="Kekule.Widget.WidgetGrid.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.WidgetGrid.html#event:unbind">unbind</a></li><li><a href="Kekule.Widget.WidgetGroup.html#event:activate">activate</a></li><li><a href="Kekule.Widget.WidgetGroup.html#event:bind">bind</a></li><li><a href="Kekule.Widget.WidgetGroup.html#event:deactivate">deactivate</a></li><li><a href="Kekule.Widget.WidgetGroup.html#event:execute">execute</a></li><li><a href="Kekule.Widget.WidgetGroup.html#event:resize">resize</a></li><li><a href="Kekule.Widget.WidgetGroup.html#event:showStateChange">showStateChange</a></li><li><a href="Kekule.Widget.WidgetGroup.html#event:unbind">unbind</a></li><li><a href="ObjectEx.html#event:change">change</a></li><li><a href="ObjectEx.html#event:finalize">finalize</a></li><li><a href="ObjectEx.html#event:propValueSet">propValueSet</a></li></ul><h3>Namespaces</h3><ul><li><a href="Kekule.html">Kekule</a></li><li><a href="Kekule.Calculator.html">Calculator</a></li><li><a href="Kekule.ChemMarker.html">ChemMarker</a></li><li><a href="Kekule.ChemObjOperation.html">ChemObjOperation</a></li><li><a href="Kekule.ChemStructOperation.html">ChemStructOperation</a></li><li><a href="Kekule.ChemWidget.Editor.html">Editor</a></li><li><a href="Kekule.Editor.html">Editor</a></li><li><a href="Kekule.Editor.ObjModifier.html">ObjModifier</a></li><li><a href="Kekule.Glyph.html">Glyph</a></li><li><a href="Kekule.IO.html">IO</a></li><li><a href="Kekule.PropertyEditor.html">PropertyEditor</a></li><li><a href="Kekule.Render.html">Render</a></li><li><a href="Kekule.Widget.html">Widget</a></li><li><a href="Kekule.Widget.PropertyEditor.html">PropertyEditor</a></li></ul><h3>Global</h3><ul><li><a href="global.html#bondTypes">bondTypes</a></li><li><a href="global.html#flashMessage">flashMessage</a></li><li><a href="global.html#jsonToValue">jsonToValue</a></li><li><a href="global.html#loadObj">loadObj</a></li><li><a href="global.html#removeMessage">removeMessage</a></li><li><a href="global.html#reportMessage">reportMessage</a></li><li><a href="global.html#saveObj">saveObj</a></li><li><a href="global.html#valueToJson">valueToJson</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Mon Nov 26 2018 21:21:44 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
