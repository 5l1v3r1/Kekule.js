<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/kekule.electrons.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/kekule.electrons.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview
 * This file contains basic classes related with electrons (bond, lone pair...).
 * @author Partridge Jiang
 */

/*
 * requires /lan/classes.js
 * requires /core/kekule.common.js
 * requires /utils/kekule.utils.js
 */

/**
 * Represent an abstract electron set (bond, lone pair, etc.).
 * @class
 * @augments Kekule.ChemObject
 * @param {Float} electronCount Count of electrons in this set.
 *   Note that there may be partial electron in set, so a float value is used here.
 *
 * @property {Float} electronCount Count of electrons in this set.
 *   Note that there may be partial electron in set, so a float value is used here.
 */
Kekule.ElectronSet = Class.create(Kekule.ChemObject,
/** @lends Kekule.ElectronSet# */
{
	/** @private */
	CLASS_NAME: 'Kekule.ElectronSet',
	/**
	 * @constructs
	 */
	initialize: function($super, electronCount)
	{
		$super();
		this.setElectronCount(electronCount || Kekule.ElectronSet.UNSET_ELECTRONCOUNT);
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('electronCount', {'dataType': DataType.FLOAT});
	}
});
/**
 * Indicate the electron count is uncertain.
 * @constant
 */
Kekule.ElectronSet.UNSET_ELECTRONCOUNT = null;

/**
 * Represent unbonded form of electron sets.
 * @class
 * @augments Kekule.ElectronSet
 * @param {Float} electronCount Count of electrons in this set. If this param is not set,
 *   electron count will be regarded as bondOrder * 2.
 */
Kekule.UnbondedElectronSet = Class.create(Kekule.ElectronSet,
/** @lends Kekule.UnbondedElectronSet# */
{
	/** @private */
	CLASS_NAME: 'Kekule.UnBondedElectronSet',
	/**
	 * @constructs
	 */
	initialize: function($super, electronCount)
	{
		$super(electronCount);
	},
	/** @private */
	initProperties: function()
	{
	}
});

/**
 * Enumeration of bond types
 * @class
 */
Kekule.BondType = {
	/** Covalent bond, the default bond type */
	COVALENT: 'covalent',
	/** Ionic bond */
	IONIC: 'ionic',
	/** Coordinate bond */
	COORDINATE: 'coordinate',
	/** Metallic bond' */
	METALLIC: 'metallic',
	/** HYDROGEN bond */
	HYDROGEN: 'hydrogen',
	/** Unknown */
	UNKNOWN: null,
	/** Default type is covalent bond */
	DEFAULT: 'covalent'
};

/**
 * Enumeration of bond orders
 * @class
 */
Kekule.BondOrder = {
	/** Single bond */
	SINGLE: 1,
	/** Double bond. */
	DOUBLE: 2,
	/** Triple bond. */
	TRIPLE: 3,
	/** Quadruple bond. */
	QUAD: 4,
	/** Explicit Aromatic bond. */
	EXPLICIT_AROMATIC: 10,
	/** Other form of bond. */
	OTHER: 20,
	/** Uncertain bond. */
	UNSET: null,
	/** Default is a single bond */
	DEFAULT: 1,

	/**
	 * Get min valence of an atom to connect to a bond.
	 * @param {Object} bondOrder
	 * @returns {Float} Aromatic bond will return 1.5, means it is between single and double bond.
	 */
	getBondValence: function(bondOrder)
	{
		if (bondOrder === Kekule.BondOrder.UNSET)
			return 0;
		else if (bondOrder == Kekule.BondOrder.EXPLICIT_AROMATIC)
			return 1.5;
		else
			return bondOrder;
	}
};

/**
 * Represent a typical bond form of molecule.
 * @class
 * @augments Kekule.ElectronSet
 * @param {Int} bondOrder Order of bond. Usually electronCount / 2.
 * @param {Float} electronCount Count of electrons in this set. If this param is not set,
 *   electron count will be regarded as bondOrder * 2.
 * @param {String} bondType Type of bond, a value from {@link Kekule.BondType}.
 *   If not specified, the bond will be regarded as a covalent one.
 *
 * @property {String} bondType Type of bond, a value from {@link Kekule.BondType}.
 * @property {Num} bondOrder Order of bond. Values should be retrieved from {@link Kekule.BondOrder}.
 * @property {Num} bondValence Valence comsumed of an atom to connect to this bond. Note this value is different from {@link Kekule.BondForm#bondOrder},
 *   For example, bondOrder value for {@link Kekule.BondOrder.EXPLICIT_AROMATIC} is 10, but the valence is 1.5. This property is read only.
 */
Kekule.BondForm = Class.create(Kekule.ElectronSet,
/** @lends Kekule.BondForm# */
{
	/** @private */
	CLASS_NAME: 'Kekule.BondForm',
	/**
	 * @constructs
	 */
	initialize: function($super, bondOrder, electronCount, bondType)
	{
		$super(electronCount);
		this.setBondOrder(bondOrder || Kekule.BondOrder.DEFAULT);
		if (Kekule.ObjUtils.notUnset(bondType))
			this.setBondType(bondType);
		if (Kekule.ObjUtils.notUnset(electronCount))
			this.setElectronCount(electronCount);
	},
	/** @private */
	initProperties: function()
	{
		this.defineProp('bondType', {
			'dataType': DataType.STRING,
			'enumSource': Kekule.BondType,
			'getter': function() { var r = this.getPropStoreFieldValue('bondType'); return (r? r: Kekule.BondType.DEFAULT); }
		});
		this.defineProp('bondOrder', {
			'dataType': DataType.FLOAT,
			'enumSource': Kekule.BondOrder,
			'setter': function(value)
				{
					if (this.getPropStoreFieldValue('bondOrder') != value)
					{
						this.setPropStoreFieldValue('bondOrder', value);
						if (value)
						{
							if (this.getBondType() == Kekule.BondType.COVALENT)
							{
								this.setElectronCount(this.getBondValence() * 2);
							}
						}
						else if (value === Kekule.BondOrder.UNSET)
							this.setElectronCount(Kekule.ElectronSet.UNSET_ELECTRONCOUNT);
					}
				}
		});
		this.defineProp('electronCount', {
			'dataType': DataType.FLOAT
		});
		this.defineProp('bondValence', {
			'dataType': DataType.FLOAT,
			'serializable': false,
			'getter': function() { return Kekule.BondOrder.getBondValence(this.getBondOrder()); },
			'setter': null
		});
	}
});

/*
 * Indicate the bond order is uncertain.
 * @constant
 */
//Kekule.BondForm.UNSET_BONDORDER = null;

//======================================================
/**
 * Factory to create and get suitable bond form objects.
 * @class
 */
Kekule.BondFormFactory = {
	/** @private */
	_bondForms: {},
	/** @private */
	getBondFormId: function(bondOrder, electronCount, bondType)
	{
		var result = '';
		if (bondType)
			result += bondType + '_';
		if (bondOrder)
			result += Number(bondOrder).toString();
		if (electronCount)
			result += '_' + Number(electronCount).toString();
		return result;
	},
	/**
	 * Returns a suitable {@link Kekule.BondForm} object.
	 * @param {Int} bondOrder Order of bond.
	 * @param {Float} electronCount Number of electrons. Usually you can bypass this param.
	 * @param {String} bondType Type of bond.
	 * @returns {Kekule.BondForm}
	 */
	getBondForm: function(bondOrder, electronCount, bondType)
	{
		if ((!bondOrder) &amp;&amp; (!electronCount) &amp;&amp; (!bondType))
			return undefined;
		if (!bondType)
			bondType = Kekule.BondType.DEFAULT;
		if ((!electronCount) &amp;&amp; (bondOrder) &amp;&amp; (bondType === Kekule.BondType.COVALENT))
		{
			var bondValence = Kekule.BondOrder.getBondValence(bondOrder);
			electronCount = bondValence * 2;
		}
		var id = Kekule.BondFormFactory.getBondFormId(bondOrder, electronCount, bondType);
		if (!Kekule.BondFormFactory._bondForms[id])
			Kekule.BondFormFactory._bondForms[id] = new Kekule.BondForm(bondOrder, electronCount, bondType);
		return Kekule.BondFormFactory._bondForms[id];
	}
};

/**
 * Enumeration of radical types
 * @class
 */
Kekule.RadicalOrder = {
	NONE: 0,
	SINGLET: 1,
	DOUBLET: 2,
	TRIPLET: 3,
	DEFAULT: 0,

	/**
	 * Returns the electron number of this radical.
	 * @param {Int} radicalOrder Value from {@link Kekule.RadicalOrder}.
	 * @returns {Int}
	 */
	getRadicalElectronCount: function(radicalOrder)
	{
		var O = Kekule.RadicalOrder;
		if (Kekule.ObjUtils.isUnset(radicalOrder) || (radicalOrder === O.NONE))
			return 0;
		else if (radicalOrder === O.DOUBLET)
			return 1;
		else
			return 2;
	}
};

/**
 * Enumeration of hybridization types
 * @class
 */
Kekule.HybridizationType = {
	/** hybridization type is not determined. **/
	UNKNOWN: null,
	/** sp. **/
	SP: 1,
	/** sp2 **/
	SP2: 2,
	/** sp3 **/
	SP3: 3,
	/** Explicitly no hybridization. */
	NONE: 0
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Class.html">Class</a></li><li><a href="ClassEx.html">ClassEx</a></li><li><a href="JsonObjSerializer.html">JsonObjSerializer</a></li><li><a href="Kekule.AbstractAtom.html">AbstractAtom</a></li><li><a href="Kekule.AbstractConfigs.html">AbstractConfigs</a></li><li><a href="Kekule.ArrayUtils.html">ArrayUtils</a></li><li><a href="Kekule.Atom.html">Atom</a></li><li><a href="Kekule.AtomType.html">AtomType</a></li><li><a href="Kekule.BaseStructureConnector.html">BaseStructureConnector</a></li><li><a href="Kekule.BaseStructureNode.html">BaseStructureNode</a></li><li><a href="Kekule.Bond.html">Bond</a></li><li><a href="Kekule.BondForm.html">BondForm</a></li><li><a href="Kekule.BondFormFactory.html">BondFormFactory</a></li><li><a href="Kekule.BondOrder.html">BondOrder</a></li><li><a href="Kekule.BondStereo.html">BondStereo</a></li><li><a href="Kekule.BondType.html">BondType</a></li><li><a href="Kekule.BoxUtils.html">BoxUtils</a></li><li><a href="Kekule.ChemMarker.BaseMarker.html">BaseMarker</a></li><li><a href="Kekule.ChemMarker.Charge.html">Charge</a></li><li><a href="Kekule.ChemMarker.ChemPropertyMarker.html">ChemPropertyMarker</a></li><li><a href="Kekule.ChemMarker.Radical.html">Radical</a></li><li><a href="Kekule.ChemMarker.UnbondedElectronSet.html">UnbondedElectronSet</a></li><li><a href="Kekule.ChemStructureBuilder.html">ChemStructureBuilder</a></li><li><a href="Kekule.ChemStructureConnector.html">ChemStructureConnector</a></li><li><a href="Kekule.ChemStructureNode.html">ChemStructureNode</a></li><li><a href="Kekule.ChemStructureNodeFactory.html">ChemStructureNodeFactory</a></li><li><a href="Kekule.ChemStructureNodeLabels.html">ChemStructureNodeLabels</a></li><li><a href="Kekule.ChemStructureObjectGroup.html">ChemStructureObjectGroup</a></li><li><a href="Kekule.ChemStructureUtils.html">ChemStructureUtils</a></li><li><a href="Kekule.ChemTextAnalyzer.html">ChemTextAnalyzer</a></li><li><a href="Kekule.ClassUtils.html">ClassUtils</a></li><li><a href="Kekule.CompositeMolecule.html">CompositeMolecule</a></li><li><a href="Kekule.ConfigPresetMap.html">ConfigPresetMap</a></li><li><a href="Kekule.ContentBlock.html">ContentBlock</a></li><li><a href="Kekule.CoordUtils.html">CoordUtils</a></li><li><a href="Kekule.DomHelper.html">DomHelper</a></li><li><a href="Kekule.ElectronSet.html">ElectronSet</a></li><li><a href="Kekule.Element.html">Element</a></li><li><a href="Kekule.FactoryUtils.html">FactoryUtils</a></li><li><a href="Kekule.FormulaUtils.html">FormulaUtils</a></li><li><a href="Kekule.GeometryUtils.html">GeometryUtils</a></li><li><a href="Kekule.Glyph.AddSymbol.html">AddSymbol</a></li><li><a href="Kekule.Glyph.Arc.html">Arc</a></li><li><a href="Kekule.Glyph.ArrowSide.html">ArrowSide</a></li><li><a href="Kekule.Glyph.ArrowType.html">ArrowType</a></li><li><a href="Kekule.Glyph.Base.html">Base</a></li><li><a href="Kekule.Glyph.HeatSymbol.html">HeatSymbol</a></li><li><a href="Kekule.Glyph.NodeType.html">NodeType</a></li><li><a href="Kekule.Glyph.PathGlyph.html">PathGlyph</a></li><li><a href="Kekule.Glyph.PathGlyphArcConnector.html">PathGlyphArcConnector</a></li><li><a href="Kekule.Glyph.PathGlyphArcConnectorControlNode.html">PathGlyphArcConnectorControlNode</a></li><li><a href="Kekule.Glyph.PathGlyphConnector.html">PathGlyphConnector</a></li><li><a href="Kekule.Glyph.PathGlyphConnectorControlNode.html">PathGlyphConnectorControlNode</a></li><li><a href="Kekule.Glyph.PathGlyphNode.html">PathGlyphNode</a></li><li><a href="Kekule.Glyph.PathType.html">PathType</a></li><li><a href="Kekule.Glyph.Polygon.html">Polygon</a></li><li><a href="Kekule.Glyph.StraightLine.html">StraightLine</a></li><li><a href="Kekule.HybridizationType.html">HybridizationType</a></li><li><a href="Kekule.ImageBlock.html">ImageBlock</a></li><li><a href="Kekule.Isotope.html">Isotope</a></li><li><a href="Kekule.IsotopeFactory.html">IsotopeFactory</a></li><li><a href="Kekule.MatrixUtils.html">MatrixUtils</a></li><li><a href="Kekule.MolecularFormula.html">MolecularFormula</a></li><li><a href="Kekule.Molecule.html">Molecule</a></li><li><a href="Kekule.MoleculeGroup.html">MoleculeGroup</a></li><li><a href="Kekule.MoleculeList.html">MoleculeList</a></li><li><a href="Kekule.NumUtils.html">NumUtils</a></li><li><a href="Kekule.ObjUtils.html">ObjUtils</a></li><li><a href="Kekule.PredefinedResLoader.html">PredefinedResLoader</a></li><li><a href="Kekule.PredefinedResReferer.html">PredefinedResReferer</a></li><li><a href="Kekule.Pseudoatom.html">Pseudoatom</a></li><li><a href="Kekule.PseudoatomType.html">PseudoatomType</a></li><li><a href="Kekule.RadicalOrder.html">RadicalOrder</a></li><li><a href="Kekule.Reaction.html">Reaction</a></li><li><a href="Kekule.ReactionComponent.html">ReactionComponent</a></li><li><a href="Kekule.ReactionList.html">ReactionList</a></li><li><a href="Kekule.ReactionRole.html">ReactionRole</a></li><li><a href="Kekule.RectUtils.html">RectUtils</a></li><li><a href="Kekule.RoleMapUtils.html">RoleMapUtils</a></li><li><a href="Kekule.StructureConnectionTable.html">StructureConnectionTable</a></li><li><a href="Kekule.StructureFragment.html">StructureFragment</a></li><li><a href="Kekule.StructureFragmentGroup.html">StructureFragmentGroup</a></li><li><a href="Kekule.StructureFragmentShadow.html">StructureFragmentShadow</a></li><li><a href="Kekule.StrUtils.html">StrUtils</a></li><li><a href="Kekule.SubGroup.html">SubGroup</a></li><li><a href="Kekule.TextBlock.html">TextBlock</a></li><li><a href="Kekule.TextLinesBuffer.html">TextLinesBuffer</a></li><li><a href="Kekule.TokenAnalyzer.html">TokenAnalyzer</a></li><li><a href="Kekule.UnbondedElectronSet.html">UnbondedElectronSet</a></li><li><a href="Kekule.ValenceUtils.html">ValenceUtils</a></li><li><a href="Kekule.VariableAtom.html">VariableAtom</a></li><li><a href="Kekule.ZoomUtils.html">ZoomUtils</a></li><li><a href="ObjectEx.html">ObjectEx</a></li><li><a href="ObjSerializerFactory.html">ObjSerializerFactory</a></li><li><a href="XmlObjSerializer.html">XmlObjSerializer</a></li><li><a href="XmlUtility.html">XmlUtility</a></li></ul><h3>Events</h3><ul><li><a href="Kekule.AbstractAtom.html#event:structureChange">structureChange</a></li><li><a href="Kekule.AbstractConfigs.html#event:change">change</a></li><li><a href="Kekule.AbstractConfigs.html#event:finalize">finalize</a></li><li><a href="Kekule.AbstractConfigs.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Atom.html#event:structureChange">structureChange</a></li><li><a href="Kekule.BaseStructureConnector.html#event:structureChange">structureChange</a></li><li><a href="Kekule.BaseStructureNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Bond.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ChemStructureBuilder.html#event:change">change</a></li><li><a href="Kekule.ChemStructureBuilder.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemStructureBuilder.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.ChemStructureConnector.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ChemStructureNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ChemStructureObject.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ChemStructureObjectGroup.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ChemTextAnalyzer.html#event:change">change</a></li><li><a href="Kekule.ChemTextAnalyzer.html#event:finalize">finalize</a></li><li><a href="Kekule.ChemTextAnalyzer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.CompositeMolecule.html#event:structureChange">structureChange</a></li><li><a href="Kekule.ConfigPresetMap.html#event:change">change</a></li><li><a href="Kekule.ConfigPresetMap.html#event:finalize">finalize</a></li><li><a href="Kekule.ConfigPresetMap.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.DomHelper.html#event:change">change</a></li><li><a href="Kekule.DomHelper.html#event:finalize">finalize</a></li><li><a href="Kekule.DomHelper.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Glyph.PathGlyphArcConnector.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Glyph.PathGlyphArcConnectorControlNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Glyph.PathGlyphConnector.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Glyph.PathGlyphConnectorControlNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.Glyph.PathGlyphNode.html#event:structureChange">structureChange</a></li><li><a href="Kekule.MolecularFormula.html#event:change">change</a></li><li><a href="Kekule.MolecularFormula.html#event:finalize">finalize</a></li><li><a href="Kekule.MolecularFormula.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Molecule.html#event:structureChange">structureChange</a></li><li><a href="Kekule.MoleculeGroup.html#event:structureChange">structureChange</a></li><li><a href="Kekule.PredefinedResLoader.html#event:change">change</a></li><li><a href="Kekule.PredefinedResLoader.html#event:finalize">finalize</a></li><li><a href="Kekule.PredefinedResLoader.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.Pseudoatom.html#event:structureChange">structureChange</a></li><li><a href="Kekule.StructureConnectionTable.html#event:change">change</a></li><li><a href="Kekule.StructureConnectionTable.html#event:finalize">finalize</a></li><li><a href="Kekule.StructureConnectionTable.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.StructureFragment.html#event:structureChange">structureChange</a></li><li><a href="Kekule.StructureFragmentGroup.html#event:structureChange">structureChange</a></li><li><a href="Kekule.StructureFragmentShadow.html#event:change">change</a></li><li><a href="Kekule.StructureFragmentShadow.html#event:finalize">finalize</a></li><li><a href="Kekule.StructureFragmentShadow.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.SubGroup.html#event:structureChange">structureChange</a></li><li><a href="Kekule.TextLinesBuffer.html#event:change">change</a></li><li><a href="Kekule.TextLinesBuffer.html#event:finalize">finalize</a></li><li><a href="Kekule.TextLinesBuffer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.TokenAnalyzer.html#event:change">change</a></li><li><a href="Kekule.TokenAnalyzer.html#event:finalize">finalize</a></li><li><a href="Kekule.TokenAnalyzer.html#event:propValueSet">propValueSet</a></li><li><a href="Kekule.VariableAtom.html#event:structureChange">structureChange</a></li><li><a href="ObjectEx.html#event:change">change</a></li><li><a href="ObjectEx.html#event:finalize">finalize</a></li><li><a href="ObjectEx.html#event:propValueSet">propValueSet</a></li></ul><h3>Namespaces</h3><ul><li><a href="Kekule.ChemMarker.html">ChemMarker</a></li><li><a href="Kekule.Glyph.html">Glyph</a></li></ul><h3>Global</h3><ul><li><a href="global.html#jsonToValue">jsonToValue</a></li><li><a href="global.html#loadObj">loadObj</a></li><li><a href="global.html#saveObj">saveObj</a></li><li><a href="global.html#valueToJson">valueToJson</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Mon Nov 26 2018 21:08:32 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
